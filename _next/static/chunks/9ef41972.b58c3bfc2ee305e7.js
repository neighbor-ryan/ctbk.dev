(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[227],{14953:function(t,e,r){var n=r(55872).Buffer,i=r(14224);!function(){var e={1964:function(t,e,r){t.exports={alpha_shape:r(3502),convex_hull:r(7352),delaunay_triangulate:r(7642),gl_cone3d:r(6405),gl_error3d:r(9165),gl_heatmap2d:r(2510),gl_line3d:r(5714),gl_mesh3d:r(7201),gl_plot2d:r(1850),gl_plot3d:r(4100),gl_pointcloud2d:r(4696),gl_scatter3d:r(8418),gl_select_box:r(3161),gl_spikes2d:r(4098),gl_streamtube3d:r(7815),gl_surface3d:r(9499),ndarray:r(9618),ndarray_linear_interpolate:r(4317)}},4793:function(t,e,r){"use strict";function n(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(n=function(){return!!t})()}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function o(t,e){return(o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=r(7507),u=r(3778),h="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function f(t){if(t>2147483647)throw RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,r){if("number"==typeof t){if("string"==typeof e)throw TypeError('The "string" argument must be of type string. Received type number');return d(t)}return c(t,e,r)}function c(t,e,r){if("string"==typeof t)return function(t,e){if(("string"!=typeof e||""===e)&&(e="utf8"),!l.isEncoding(e))throw TypeError("Unknown encoding: "+e);var r=0|b(t,e),n=f(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(j(t,Uint8Array)){var e=new Uint8Array(t);return g(e.buffer,e.byteOffset,e.byteLength)}return v(t)}(t);if(null==t)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(t));if(j(t,ArrayBuffer)||t&&j(t.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(j(t,SharedArrayBuffer)||t&&j(t.buffer,SharedArrayBuffer)))return g(t,e,r);if("number"==typeof t)throw TypeError('The "value" argument must not be of type number. Received type number');var n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return l.from(n,e,r);var i=function(t){if(l.isBuffer(t)){var e,r=0|m(t.length),n=f(r);return 0===n.length||t.copy(n,0,0,r),n}return void 0!==t.length?"number"!=typeof t.length||(e=t.length)!=e?f(0):v(t):"Buffer"===t.type&&Array.isArray(t.data)?v(t.data):void 0}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+a(t))}function p(t){if("number"!=typeof t)throw TypeError('"size" argument must be of type number');if(t<0)throw RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return p(t),f(t<0?0:0|m(t))}function v(t){for(var e=t.length<0?0:0|m(t.length),r=f(e),n=0;n<e;n+=1)r[n]=255&t[n];return r}function g(t,e,r){var n;if(e<0||t.byteLength<e)throw RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),l.prototype),n}function m(t){if(t>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|t}function b(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||j(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+a(t));var r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return D(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return U(t).length;default:if(i)return n?-1:D(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,r){var n,i,o=!1;if((void 0===e||e<0)&&(e=0),e>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(e>>>=0)))return"";for(t||(t="utf8");;)switch(t){case"hex":return function(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=V[t[o]];return i}(this,e,r);case"utf8":case"utf-8":return E(this,e,r);case"ascii":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}(this,e,r);case"latin1":case"binary":return function(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}(this,e,r);case"base64":return n=e,i=r,0===n&&i===this.length?s.fromByteArray(this):s.fromByteArray(this.slice(n,i));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length-1;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}(this,e,r);default:if(o)throw TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),o=!0}}function x(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(t,e,r,n,i){var o;if(0===t.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(o=r=+r)!=o&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return -1;r=t.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof e&&(e=l.from(e,n)),l.isBuffer(e))return 0===e.length?-1:w(t,e,r,n,i);if("number"==typeof e)return(e&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):w(t,[e],r,n,i);throw TypeError("val must be string, number or Buffer")}function w(t,e,r,n,i){var o,a=1,s=t.length,u=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return -1;a=2,s/=2,u/=2,r/=2}function h(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var f=-1;for(o=r;o<s;o++)if(h(t,o)===h(e,-1===f?0:o-f)){if(-1===f&&(f=o),o-f+1===u)return f*a}else -1!==f&&(o-=o-f),f=-1}else for(r+u>s&&(r=s-u),o=r;o>=0;o--){for(var l=!0,c=0;c<u;c++)if(h(t,o+c)!==h(e,c)){l=!1;break}if(l)return o}return -1}function E(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(i+s<=r){var u=void 0,h=void 0,f=void 0,l=void 0;switch(s){case 1:o<128&&(a=o);break;case 2:(192&(u=t[i+1]))==128&&(l=(31&o)<<6|63&u)>127&&(a=l);break;case 3:u=t[i+1],h=t[i+2],(192&u)==128&&(192&h)==128&&(l=(15&o)<<12|(63&u)<<6|63&h)>2047&&(l<55296||l>57343)&&(a=l);break;case 4:u=t[i+1],h=t[i+2],f=t[i+3],(192&u)==128&&(192&h)==128&&(192&f)==128&&(l=(15&o)<<18|(63&u)<<12|(63&h)<<6|63&f)>65535&&l<1114112&&(a=l)}}null===a?(a=65533,s=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=s}return function(t){var e=t.length;if(e<=4096)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=4096));return r}(n)}function M(t,e,r){if(t%1!=0||t<0)throw RangeError("offset is not uint");if(t+e>r)throw RangeError("Trying to access beyond buffer length")}function A(t,e,r,n,i,o){if(!l.isBuffer(t))throw TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw RangeError('"value" argument is out of bounds');if(r+n>t.length)throw RangeError("Index out of range")}function T(t,e,r,n,i){P(e,n,i,t,r,7);var o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;var a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,a>>=8,t[r++]=a,r}function R(t,e,r,n,i){P(e,n,i,t,r,7);var o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;var a=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=a,a>>=8,t[r+2]=a,a>>=8,t[r+1]=a,a>>=8,t[r]=a,r+8}function O(t,e,r,n,i,o){if(r+n>t.length||r<0)throw RangeError("Index out of range")}function S(t,e,r,n,i){return e=+e,r>>>=0,i||O(t,e,r,4,34028234663852886e22,-34028234663852886e22),u.write(t,e,r,n,23,4),r+4}function k(t,e,r,n,i){return e=+e,r>>>=0,i||O(t,e,r,8,17976931348623157e292,-17976931348623157e292),u.write(t,e,r,n,52,8),r+8}e.hp=l,e.IS=50,l.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,r){return c(t,e,r)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,r){return(p(t),t<=0)?f(t):void 0!==e?"string"==typeof r?f(t).fill(e,r):f(t).fill(e):f(t)},l.allocUnsafe=function(t){return d(t)},l.allocUnsafeSlow=function(t){return d(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(j(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),j(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);if(void 0===e)for(r=0,e=0;r<t.length;++r)e+=t[r].length;var r,n=l.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var o=t[r];if(j(o,Uint8Array))i+o.length>n.length?(l.isBuffer(o)||(o=l.from(o)),o.copy(n,i)):Uint8Array.prototype.set.call(n,o,i);else if(l.isBuffer(o))o.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=o.length}return n},l.byteLength=b,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)x(this,e,e+1);return this},l.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)x(this,e,e+3),x(this,e+1,e+2);return this},l.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)x(this,e,e+7),x(this,e+1,e+6),x(this,e+2,e+5),x(this,e+3,e+4);return this},l.prototype.toString=function(){var t=this.length;return 0===t?"":0==arguments.length?E(this,0,t):y.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){var t="",r=e.IS;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},h&&(l.prototype[h]=l.prototype.inspect),l.prototype.compare=function(t,e,r,n,i){if(j(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+a(t));if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return -1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,u=Math.min(o,s),h=this.slice(n,i),f=t.slice(e,r),c=0;c<u;++c)if(h[c]!==f[c]){o=h[c],s=f[c];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,r){return -1!==this.indexOf(t,e,r)},l.prototype.indexOf=function(t,e,r){return _(this,t,e,r,!0)},l.prototype.lastIndexOf=function(t,e,r){return _(this,t,e,r,!1)},l.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else if(isFinite(e))e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,o,a,s,u,h,f,l,c=this.length-e;if((void 0===r||r>c)&&(r=c),t.length>0&&(r<0||e<0)||e>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var p=!1;;)switch(n){case"hex":return function(t,e,r,n){r=Number(r)||0;var i,o=t.length-r;n?(n=Number(n))>o&&(n=o):n=o;var a=e.length;for(n>a/2&&(n=a/2),i=0;i<n;++i){var s=parseInt(e.substr(2*i,2),16);if(s!=s)break;t[r+i]=s}return i}(this,t,e,r);case"utf8":case"utf-8":return i=e,o=r,z(D(t,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return a=e,s=r,z(function(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(t),this,a,s);case"base64":return u=e,h=r,z(U(t),this,u,h);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f=e,l=r,z(function(t,e){for(var r,n,i=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(r=t.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(t,this.length-f),this,f,l);default:if(p)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),p=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r)<0&&(t=0):t>r&&(t=r),e<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);var n=this.subarray(t,e);return Object.setPrototypeOf(n,l.prototype),n},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readBigUInt64LE=G(function(t){B(t>>>=0,"offset");var e=this[t],r=this[t+7];(void 0===e||void 0===r)&&F(t,this.length-8);var n=e+256*this[++t]+65536*this[++t]+16777216*this[++t],i=this[++t]+256*this[++t]+65536*this[++t]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),l.prototype.readBigUInt64BE=G(function(t){B(t>>>=0,"offset");var e=this[t],r=this[t+7];(void 0===e||void 0===r)&&F(t,this.length-8);var n=16777216*e+65536*this[++t]+256*this[++t]+this[++t],i=16777216*this[++t]+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),l.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*e)),n},l.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||M(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return(t>>>=0,e||M(t,1,this.length),128&this[t])?-((255-this[t]+1)*1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||M(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(t,e){t>>>=0,e||M(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readBigInt64LE=G(function(t){B(t>>>=0,"offset");var e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&F(t,this.length-8),(BigInt(this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24))<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+16777216*this[++t])}),l.prototype.readBigInt64BE=G(function(t){B(t>>>=0,"offset");var e=this[t],r=this[t+7];return(void 0===e||void 0===r)&&F(t,this.length-8),(BigInt((e<<24)+65536*this[++t]+256*this[++t]+this[++t])<<BigInt(32))+BigInt(16777216*this[++t]+65536*this[++t]+256*this[++t]+r)}),l.prototype.readFloatLE=function(t,e){return t>>>=0,e||M(t,4,this.length),u.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||M(t,4,this.length),u.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||M(t,8,this.length),u.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||M(t,8,this.length),u.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;A(this,t,e,r,i,0)}var o=1,a=0;for(this[e]=255&t;++a<r&&(o*=256);)this[e+a]=t/o&255;return e+r},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;A(this,t,e,r,i,0)}var o=r-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+r},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigUInt64LE=G(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return T(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=G(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);A(this,t,e,r,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<r&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){var i=Math.pow(2,8*r-1);A(this,t,e,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+r},l.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||A(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigInt64LE=G(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return T(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=G(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(t,e,r){return S(this,t,e,!0,r)},l.prototype.writeFloatBE=function(t,e,r){return S(this,t,e,!1,r)},l.prototype.writeDoubleLE=function(t,e,r){return k(this,t,e,!0,r)},l.prototype.writeDoubleBE=function(t,e,r){return k(this,t,e,!1,r)},l.prototype.copy=function(t,e,r,n){if(!l.isBuffer(t))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r||0===t.length||0===this.length)return 0;if(e<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},l.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===t.length){var i,o=t.charCodeAt(0);("utf8"===n&&o<128||"latin1"===n)&&(t=o)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw RangeError("Out of range index");if(r<=e)return this;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{var a=l.isBuffer(t)?t:l.from(t,n),s=a.length;if(0===s)throw TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=a[i%s]}return this};var C={};function L(t,e,r){C[t]=function(r){var s;function u(){var r,o,s;return!/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,u),o=i(o=u),Object.defineProperty(r=function(t,e){if(e&&("object"===a(e)||"function"==typeof e))return e;if(void 0!==e)throw TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,n()?Reflect.construct(o,[],i(this).constructor):o.apply(this,s)),"message",{value:e.apply(r,arguments),writable:!0,configurable:!0}),r.name="".concat(r.name," [").concat(t,"]"),r.stack,delete r.name,r}return!function(t,e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o(t,e)}(u,r),s=[{key:"code",get:function(){return t},set:function(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}},{key:"toString",value:function(){return"".concat(this.name," [").concat(t,"]: ").concat(this.message)}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,function(t){var e=function(t,e){if("object"!=a(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!=a(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==a(e)?e:e+""}(n.key),n)}}(u.prototype,s),Object.defineProperty(u,"prototype",{writable:!1}),u}(r)}function I(t){for(var e="",r=t.length,n="-"===t[0]?1:0;r>=n+4;r-=3)e="_".concat(t.slice(r-3,r)).concat(e);return"".concat(t.slice(0,r)).concat(e)}function P(t,e,r,n,i,o){if(t>r||t<e){var a,s="bigint"==typeof e?"n":"";throw a=o>3?0===e||e===BigInt(0)?">= 0".concat(s," and < 2").concat(s," ** ").concat((o+1)*8).concat(s):">= -(2".concat(s," ** ").concat((o+1)*8-1).concat(s,") and < 2 ** ")+"".concat((o+1)*8-1).concat(s):">= ".concat(e).concat(s," and <= ").concat(r).concat(s),new C.ERR_OUT_OF_RANGE("value",a,t)}B(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&F(i,n.length-(o+1))}function B(t,e){if("number"!=typeof t)throw new C.ERR_INVALID_ARG_TYPE(e,"number",t)}function F(t,e,r){if(Math.floor(t)!==t)throw B(t,r),new C.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new C.ERR_BUFFER_OUT_OF_BOUNDS;throw new C.ERR_OUT_OF_RANGE(r||"offset",">= ".concat(r?1:0," and <= ").concat(e),t)}L("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?"".concat(t," is outside of buffer bounds"):"Attempt to access memory outside buffer bounds"},RangeError),L("ERR_INVALID_ARG_TYPE",function(t,e){return'The "'.concat(t,'" argument must be of type number. Received type ').concat(a(e))},TypeError),L("ERR_OUT_OF_RANGE",function(t,e,r){var n='The value of "'.concat(t,'" is out of range.'),i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=I(String(r)):"bigint"==typeof r&&(i=String(r),(r>Math.pow(BigInt(2),BigInt(32))||r<-Math.pow(BigInt(2),BigInt(32)))&&(i=I(i)),i+="n"),n+=" It must be ".concat(e,". Received ").concat(i)},RangeError);var N=/[^+/0-9A-Za-z-_]/g;function D(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],a=0;a<n;++a){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function U(t){return s.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(N,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function z(t,e,r,n){var i;for(i=0;i<n&&!(i+r>=e.length)&&!(i>=t.length);++i)e[i+r]=t[i];return i}function j(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}var V=function(){for(var t="0123456789abcdef",e=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)e[n+i]=t[r]+t[i];return e}();function G(t){return"undefined"==typeof BigInt?H:t}function H(){throw Error("BigInt not supported")}},9216:function(t){"use strict";t.exports=i,t.exports.isMobile=i,t.exports.default=i;var e=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,r=/CrOS/,n=/android|ipad|playbook|silk/i;function i(t){t||(t={});var i=t.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var o=e.test(i)&&!r.test(i)||!!t.tablet&&n.test(i);return!o&&t.tablet&&t.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(o=!0),o}},6296:function(t,e,r){"use strict";t.exports=function(t){var e=(t=t||{}).eye||[0,0,1],r=t.center||[0,0,0],s=t.up||[0,1,0],u=t.distanceLimits||[0,1/0],h=t.mode||"turntable",f=n(),l=i(),c=o();return f.setDistanceLimits(u[0],u[1]),f.lookAt(0,e,r,s),l.setDistanceLimits(u[0],u[1]),l.lookAt(0,e,r,s),c.setDistanceLimits(u[0],u[1]),c.lookAt(0,e,r,s),new a({turntable:f,orbit:l,matrix:c},h)};var n=r(7261),i=r(9977),o=r(4192);function a(t,e){this._controllerNames=Object.keys(t),this._controllerList=this._controllerNames.map(function(e){return t[e]}),this._mode=e,this._active=t[e],this._active||(this._mode="turntable",this._active=t.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var s=a.prototype;s.flush=function(t){for(var e=this._controllerList,r=0;r<e.length;++r)e[r].flush(t)},s.idle=function(t){for(var e=this._controllerList,r=0;r<e.length;++r)e[r].idle(t)},s.lookAt=function(t,e,r,n){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].lookAt(t,e,r,n)},s.rotate=function(t,e,r,n){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].rotate(t,e,r,n)},s.pan=function(t,e,r,n){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].pan(t,e,r,n)},s.translate=function(t,e,r,n){for(var i=this._controllerList,o=0;o<i.length;++o)i[o].translate(t,e,r,n)},s.setMatrix=function(t,e){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setMatrix(t,e)},s.setDistanceLimits=function(t,e){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setDistanceLimits(t,e)},s.setDistance=function(t,e){for(var r=this._controllerList,n=0;n<r.length;++n)r[n].setDistance(t,e)},s.recalcMatrix=function(t){this._active.recalcMatrix(t)},s.getDistance=function(t){return this._active.getDistance(t)},s.getDistanceLimits=function(t){return this._active.getDistanceLimits(t)},s.lastT=function(){return this._active.lastT()},s.setMode=function(t){if(t!==this._mode){var e=this._controllerNames.indexOf(t);if(!(e<0)){var r=this._active,n=this._controllerList[e],i=Math.max(r.lastT(),n.lastT());r.recalcMatrix(i),n.setMatrix(i,r.computedMatrix),this._active=n,this._mode=t,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},s.getMode=function(){return this._mode}},7169:function(t,e,r){"use strict";var n="undefined"==typeof WeakMap?r(1538):WeakMap,i=r(2762),o=r(8116),a=new n;t.exports=function(t){var e=a.get(t),r=e&&(e._triangleBuffer.handle||e._triangleBuffer.buffer);if(!r||!t.isBuffer(r)){var n=i(t,new Float32Array([-1,-1,-1,4,4,-1]));(e=o(t,[{buffer:n,type:t.FLOAT,size:2}]))._triangleBuffer=n,a.set(t,e)}e.bind(),t.drawArrays(t.TRIANGLES,0,3),e.unbind()}},1085:function(t,e,r){var n=r(1371);t.exports=function(t,e,r){e="number"==typeof e?e:1,r=r||": ";var i=t.split(/\r?\n/),o=String(i.length+e-1).length;return i.map(function(t,i){var a=i+e,s=String(a).length;return n(a,o-s)+r+t}).join("\n")}},3952:function(t,e,r){"use strict";t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[0];for(var r=t[0].length,i=[t[0]],o=[0],a=1;a<e;++a){if(i.push(t[a]),!function(t,e){for(var r=Array(e+1),i=0;i<t.length;++i)r[i]=t[i];for(var i=0;i<=t.length;++i){for(var o=t.length;o<=e;++o){for(var a=Array(e),s=0;s<e;++s)a[s]=Math.pow(o+1-i,s);r[o]=a}if(n.apply(void 0,r))return!0}return!1}(i,r)){i.pop();continue}if(o.push(a),o.length===r+1)break}return o};var n=r(3250)},5995:function(t,e,r){"use strict";t.exports=function(t,e){return n(e).filter(function(r){for(var n=Array(r.length),o=0;o<r.length;++o)n[o]=e[r[o]];return i(n)*t<1})};var n=r(7642),i=r(6037)},3502:function(t,e,r){t.exports=function(t,e){return i(n(t,e))};var n=r(5995),i=r(9127)},6468:function(t){t.exports=function(t){return atob(t)}},2642:function(t,e,r){"use strict";t.exports=function(t,e){for(var r=e.length,o=Array(r+1),a=0;a<r;++a){for(var s=Array(r+1),u=0;u<=r;++u)s[u]=t[u][a];o[a]=s}o[r]=Array(r+1);for(var a=0;a<=r;++a)o[r][a]=1;for(var h=Array(r+1),a=0;a<r;++a)h[a]=e[a];h[r]=1;var f=n(o,h),l=i(f[r+1]);0===l&&(l=1);for(var c=Array(r+1),a=0;a<=r;++a)c[a]=i(f[a])/l;return c};var n=r(727);function i(t){for(var e=0,r=0;r<t.length;++r)e+=t[r];return e}},7507:function(t,e){"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return(r+n)*3/4-n},e.toByteArray=function(t){var e,r,o=u(t),a=o[0],s=o[1],h=new i((a+s)*3/4-s),f=0,l=s>0?a-4:a;for(r=0;r<l;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],h[f++]=e>>16&255,h[f++]=e>>8&255,h[f++]=255&e;return 2===s&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,h[f++]=255&e),1===s&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,h[f++]=e>>8&255,h[f++]=255&e),h},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(function(t,e,n){for(var i,o=[],a=e;a<n;a+=3)o.push(r[(i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]))>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return o.join("")}(t,a,a+16383>s?s:a+16383));return 1===i?o.push(r[(e=t[n-1])>>2]+r[e<<4&63]+"=="):2===i&&o.push(r[(e=(t[n-2]<<8)+t[n-1])>>10]+r[e>>4&63]+r[e<<2&63]+"="),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");-1===r&&(r=e);var n=r===e?0:4-r%4;return[r,n]}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},3865:function(t,e,r){"use strict";var n=r(869);t.exports=function(t,e){return n(t[0].mul(e[1]).add(e[0].mul(t[1])),t[1].mul(e[1]))}},1318:function(t){"use strict";t.exports=function(t,e){return t[0].mul(e[1]).cmp(e[0].mul(t[1]))}},8697:function(t,e,r){"use strict";var n=r(869);t.exports=function(t,e){return n(t[0].mul(e[1]),t[1].mul(e[0]))}},7842:function(t,e,r){"use strict";var n=r(6330),i=r(1533),o=r(2651),a=r(4387),s=r(869),u=r(8697);t.exports=function t(e,r){if(n(e))return r?u(e,t(r)):[e[0].clone(),e[1].clone()];var h,f,l=0;if(i(e))h=e.clone();else if("string"==typeof e)h=a(e);else if(0===e)return[o(0),o(1)];else if(e===Math.floor(e))h=o(e);else{for(;e!==Math.floor(e);)e*=1157920892373162e62,l-=256;h=o(e)}if(n(r))h.mul(r[1]),f=r[0].clone();else if(i(r))f=r.clone();else if("string"==typeof r)f=a(r);else if(r){if(r===Math.floor(r))f=o(r);else{for(;r!==Math.floor(r);)r*=1157920892373162e62,l+=256;f=o(r)}}else f=o(1);return l>0?h=h.ushln(l):l<0&&(f=f.ushln(-l)),s(h,f)}},6330:function(t,e,r){"use strict";var n=r(1533);t.exports=function(t){return Array.isArray(t)&&2===t.length&&n(t[0])&&n(t[1])}},5716:function(t,e,r){"use strict";var n=r(6859);t.exports=function(t){return t.cmp(new n(0))}},1369:function(t,e,r){"use strict";var n=r(5716);t.exports=function(t){var e=t.length,r=t.words,i=0;if(1===e)i=r[0];else if(2===e)i=r[0]+67108864*r[1];else for(var o=0;o<e;o++)i+=r[o]*Math.pow(67108864,o);return n(t)*i}},4025:function(t,e,r){"use strict";var n=r(2361),i=r(8828).countTrailingZeros;t.exports=function(t){var e=i(n.lo(t));if(e<32)return e;var r=i(n.hi(t));return r>20?52:r+32}},1533:function(t,e,r){"use strict";r(6859),t.exports=function(t){return t&&"object"==typeof t&&!!t.words}},2651:function(t,e,r){"use strict";var n=r(6859),i=r(2361);t.exports=function(t){var e=i.exponent(t);return e<52?new n(t):new n(t*Math.pow(2,52-e)).ushln(e-52)}},869:function(t,e,r){"use strict";var n=r(2651),i=r(5716);t.exports=function(t,e){var r=i(t),o=i(e);if(0===r)return[n(0),n(1)];if(0===o)return[n(0),n(0)];o<0&&(t=t.neg(),e=e.neg());var a=t.gcd(e);return a.cmpn(1)?[t.div(a),e.div(a)]:[t,e]}},4387:function(t,e,r){"use strict";var n=r(6859);t.exports=function(t){return new n(t)}},6504:function(t,e,r){"use strict";var n=r(869);t.exports=function(t,e){return n(t[0].mul(e[0]),t[1].mul(e[1]))}},7721:function(t,e,r){"use strict";var n=r(5716);t.exports=function(t){return n(t[0])*n(t[1])}},5572:function(t,e,r){"use strict";var n=r(869);t.exports=function(t,e){return n(t[0].mul(e[1]).sub(t[1].mul(e[0])),t[1].mul(e[1]))}},946:function(t,e,r){"use strict";var n=r(1369),i=r(4025);t.exports=function(t){var e=t[0],r=t[1];if(0===e.cmpn(0))return 0;var o=e.abs().divmod(r.abs()),a=n(o.div),s=o.mod,u=e.negative!==r.negative?-1:1;if(0===s.cmpn(0))return u*a;if(a){var h=i(a)+4,f=n(s.ushln(h).divRound(r));return u*(a+f*Math.pow(2,-h))}var l=r.bitLength()-s.bitLength()+53,f=n(s.ushln(l).divRound(r));return l<1023?u*f*Math.pow(2,-l):u*(f*=11125369292536007e-324)*Math.pow(2,1023-l)}},2478:function(t){"use strict";function e(t,e,r,n,i){for(var o=i+1;n<=i;){var a=n+i>>>1,s=t[a];(void 0!==r?r(s,e):s-e)>=0?(o=a,i=a-1):n=a+1}return o}function r(t,e,r,n,i){for(var o=i+1;n<=i;){var a=n+i>>>1,s=t[a];(void 0!==r?r(s,e):s-e)>0?(o=a,i=a-1):n=a+1}return o}function n(t,e,r,n,i){for(var o=n-1;n<=i;){var a=n+i>>>1,s=t[a];(void 0!==r?r(s,e):s-e)<0?(o=a,n=a+1):i=a-1}return o}function i(t,e,r,n,i){for(var o=n-1;n<=i;){var a=n+i>>>1,s=t[a];(void 0!==r?r(s,e):s-e)<=0?(o=a,n=a+1):i=a-1}return o}function o(t,e,r,n,i){for(;n<=i;){var o=n+i>>>1,a=t[o],s=void 0!==r?r(a,e):a-e;if(0===s)return o;s<=0?n=o+1:i=o-1}return -1}function a(t,e,r,n,i,o){return"function"==typeof r?o(t,e,r,void 0===n?0:0|n,void 0===i?t.length-1:0|i):o(t,e,void 0,void 0===r?0:0|r,void 0===n?t.length-1:0|n)}t.exports={ge:function(t,r,n,i,o){return a(t,r,n,i,o,e)},gt:function(t,e,n,i,o){return a(t,e,n,i,o,r)},lt:function(t,e,r,i,o){return a(t,e,r,i,o,n)},le:function(t,e,r,n,o){return a(t,e,r,n,o,i)},eq:function(t,e,r,n,i){return a(t,e,r,n,i,o)}}},8828:function(t,e){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-2147483648,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1)&&!!t},e.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,(e|=r)|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)*16843009>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,e&=65535,(t=((t=((t=((t=(t|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)|(e=((e=((e=((e=(e|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)<<1},e.deinterleave2=function(t,e){return(t=((t=((t=((t=((t=t>>>e&1431655765)|t>>>1)&858993459)|t>>>2)&252645135)|t>>>4)&16711935)|t>>>16)&65535)<<16>>16},e.interleave3=function(t,e,r){return t&=1023,e&=1023,r&=1023,r=((r=((r=((r=(r|r<<16)&4278190335)|r<<8)&251719695)|r<<4)&3272356035)|r<<2)&1227133513,(t=((t=((t=((t=(t|t<<16)&4278190335)|t<<8)&251719695)|t<<4)&3272356035)|t<<2)&1227133513|(e=((e=((e=((e=(e|e<<16)&4278190335)|e<<8)&251719695)|e<<4)&3272356035)|e<<2)&1227133513)<<1)|r<<2},e.deinterleave3=function(t,e){return(t=((t=((t=((t=((t=t>>>e&1227133513)|t>>>2)&3272356035)|t>>>4)&251719695)|t>>>8)&4278190335)|t>>>16)&1023)<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},6859:function(t,e,r){!function(t,e){"use strict";function n(t,e){if(!t)throw Error(e||"Assertion failed")}function i(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}function o(t,e,r){if(o.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&(("le"===e||"be"===e)&&(r=e,e=10),this._init(t||0,e||10,r||"be"))}"object"==typeof t?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;try{h="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(7790).Buffer}catch(t){}function a(t,e){var r=t.charCodeAt(e);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function s(t,e,r){var n=a(t,r);return r-1>=e&&(n|=a(t,r-1)<<4),n}function u(t,e,r,n){for(var i=0,o=Math.min(t.length,r),a=e;a<o;a++){var s=t.charCodeAt(a)-48;i*=n,s>=49?i+=s-49+10:s>=17?i+=s-17+10:i+=s}return i}o.isBN=function(t){return t instanceof o||null!==t&&"object"==typeof t&&t.constructor.wordSize===o.wordSize&&Array.isArray(t.words)},o.max=function(t,e){return t.cmp(e)>0?t:e},o.min=function(t,e){return 0>t.cmp(e)?t:e},o.prototype._init=function(t,e,r){if("number"==typeof t)return this._initNumber(t,e,r);if("object"==typeof t)return this._initArray(t,e,r);"hex"===e&&(e=16),n(e===(0|e)&&e>=2&&e<=36);var i=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(i++,this.negative=1),i<t.length&&(16===e?this._parseHex(t,i,r):(this._parseBase(t,e,i),"le"===r&&this._initArray(this.toArray(),e,r)))},o.prototype._initNumber=function(t,e,r){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(n(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),e,r)},o.prototype._initArray=function(t,e,r){if(n("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=Array(this.length);for(var i,o,a=0;a<this.length;a++)this.words[a]=0;var s=0;if("be"===r)for(a=t.length-1,i=0;a>=0;a-=3)o=t[a]|t[a-1]<<8|t[a-2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);else if("le"===r)for(a=0,i=0;a<t.length;a+=3)o=t[a]|t[a+1]<<8|t[a+2]<<16,this.words[i]|=o<<s&67108863,this.words[i+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,i++);return this.strip()},o.prototype._parseHex=function(t,e,r){this.length=Math.ceil((t.length-e)/6),this.words=Array(this.length);for(var n,i=0;i<this.length;i++)this.words[i]=0;var o=0,a=0;if("be"===r)for(i=t.length-1;i>=e;i-=2)n=s(t,e,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;else for(i=(t.length-e)%2==0?e+1:e;i<t.length;i+=2)n=s(t,e,i)<<o,this.words[a]|=67108863&n,o>=18?(o-=18,a+=1,this.words[a]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(t,e,r){this.words=[0],this.length=1;for(var n=0,i=1;i<=67108863;i*=e)n++;n--,i=i/e|0;for(var o=t.length-r,a=o%n,s=Math.min(o,o-a)+r,h=0,f=r;f<s;f+=n)h=u(t,f,f+n,e),this.imuln(i),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==a){var l=1;for(h=u(t,f,t.length,e),f=0;f<a;f++)l*=e;this.imuln(l),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},o.prototype.copy=function(t){t.words=Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},o.prototype.clone=function(){var t=new o(null);return this.copy(t),t},o.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h,f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],l=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(t,e,r){r.negative=e.negative^t.negative;var n=t.length+e.length|0;r.length=n,n=n-1|0;var i=0|t.words[0],o=0|e.words[0],a=i*o,s=67108863&a,u=a/67108864|0;r.words[0]=s;for(var h=1;h<n;h++){for(var f=u>>>26,l=67108863&u,c=Math.min(h,e.length-1),p=Math.max(0,h-t.length+1);p<=c;p++){var d=h-p|0;f+=(a=(i=0|t.words[d])*(o=0|e.words[p])+l)/67108864|0,l=67108863&a}r.words[h]=0|l,u=0|f}return 0!==u?r.words[h]=0|u:r.length--,r.strip()}o.prototype.toString=function(t,e){if(e=0|e||1,16===(t=t||10)||"hex"===t){r="";for(var r,i=0,o=0,a=0;a<this.length;a++){var s=this.words[a],u=((s<<i|o)&16777215).toString(16);r=0!=(o=s>>>24-i&16777215)||a!==this.length-1?f[6-u.length]+u+r:u+r,(i+=2)>=26&&(i-=26,a--)}for(0!==o&&(r=o.toString(16)+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(t===(0|t)&&t>=2&&t<=36){var h=l[t],p=c[t];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var v=d.modn(p).toString(t);r=(d=d.idivn(p)).isZero()?v+r:f[h-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%e!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(t,e){return n(void 0!==h),this.toArrayLike(h,t,e)},o.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},o.prototype.toArrayLike=function(t,e,r){var i,o,a=this.byteLength(),s=r||Math.max(1,a);n(a<=s,"byte array longer than desired length"),n(s>0,"Requested array length <= 0"),this.strip();var u=new t(s),h=this.clone();if("le"===e){for(o=0;!h.isZero();o++)i=h.andln(255),h.iushrn(8),u[o]=i;for(;o<s;o++)u[o]=0}else{for(o=0;o<s-a;o++)u[o]=0;for(o=0;!h.isZero();o++)i=h.andln(255),h.iushrn(8),u[s-o-1]=i}return u},Math.clz32?o.prototype._countBits=function(t){return 32-Math.clz32(t)}:o.prototype._countBits=function(t){var e=t,r=0;return e>=4096&&(r+=13,e>>>=13),e>=64&&(r+=7,e>>>=7),e>=8&&(r+=4,e>>>=4),e>=2&&(r+=2,e>>>=2),r+e},o.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,r=0;return(8191&e)==0&&(r+=13,e>>>=13),(127&e)==0&&(r+=7,e>>>=7),(15&e)==0&&(r+=4,e>>>=4),(3&e)==0&&(r+=2,e>>>=2),(1&e)==0&&r++,r},o.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return(this.length-1)*26+e},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var r=this._zeroBits(this.words[e]);if(t+=r,26!==r)break}return t},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},o.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},o.prototype.ior=function(t){return n((this.negative|t.negative)==0),this.iuor(t)},o.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},o.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},o.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var r=0;r<e.length;r++)this.words[r]=this.words[r]&t.words[r];return this.length=e.length,this.strip()},o.prototype.iand=function(t){return n((this.negative|t.negative)==0),this.iuand(t)},o.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},o.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},o.prototype.iuxor=function(t){this.length>t.length?(e=this,r=t):(e=t,r=this);for(var e,r,n=0;n<r.length;n++)this.words[n]=e.words[n]^r.words[n];if(this!==e)for(;n<e.length;n++)this.words[n]=e.words[n];return this.length=e.length,this.strip()},o.prototype.ixor=function(t){return n((this.negative|t.negative)==0),this.iuxor(t)},o.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},o.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},o.prototype.inotn=function(t){n("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),r=t%26;this._expand(e),r>0&&e--;for(var i=0;i<e;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},o.prototype.notn=function(t){return this.clone().inotn(t)},o.prototype.setn=function(t,e){n("number"==typeof t&&t>=0);var r=t/26|0,i=t%26;return this._expand(r+1),e?this.words[r]=this.words[r]|1<<i:this.words[r]=this.words[r]&~(1<<i),this.strip()},o.prototype.iadd=function(t){if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(r=this,n=t):(r=t,n=this);for(var e,r,n,i=0,o=0;o<n.length;o++)e=(0|r.words[o])+(0|n.words[o])+i,this.words[o]=67108863&e,i=e>>>26;for(;0!==i&&o<r.length;o++)e=(0|r.words[o])+i,this.words[o]=67108863&e,i=e>>>26;if(this.length=r.length,0!==i)this.words[this.length]=i,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},o.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e,r,n=this.iadd(t);return t.negative=1,n._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i=this.cmp(t);if(0===i)return this.negative=0,this.length=1,this.words[0]=0,this;i>0?(e=this,r=t):(e=t,r=this);for(var o=0,a=0;a<r.length;a++)o=(n=(0|e.words[a])-(0|r.words[a])+o)>>26,this.words[a]=67108863&n;for(;0!==o&&a<e.length;a++)o=(n=(0|e.words[a])+o)>>26,this.words[a]=67108863&n;if(0===o&&a<e.length&&e!==this)for(;a<e.length;a++)this.words[a]=e.words[a];return this.length=Math.max(this.length,a),e!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(t){return this.clone().isub(t)};var d=function(t,e,r){var n,i,o,a=t.words,s=e.words,u=r.words,h=0,f=0|a[0],l=8191&f,c=f>>>13,p=0|a[1],d=8191&p,v=p>>>13,g=0|a[2],m=8191&g,b=g>>>13,y=0|a[3],x=8191&y,_=y>>>13,w=0|a[4],E=8191&w,M=w>>>13,A=0|a[5],T=8191&A,R=A>>>13,O=0|a[6],S=8191&O,k=O>>>13,C=0|a[7],L=8191&C,I=C>>>13,P=0|a[8],B=8191&P,F=P>>>13,N=0|a[9],D=8191&N,U=N>>>13,z=0|s[0],j=8191&z,V=z>>>13,G=0|s[1],H=8191&G,W=G>>>13,X=0|s[2],Y=8191&X,q=X>>>13,Z=0|s[3],K=8191&Z,Q=Z>>>13,J=0|s[4],$=8191&J,tt=J>>>13,te=0|s[5],tr=8191&te,tn=te>>>13,ti=0|s[6],to=8191&ti,ta=ti>>>13,ts=0|s[7],tu=8191&ts,th=ts>>>13,tf=0|s[8],tl=8191&tf,tc=tf>>>13,tp=0|s[9],td=8191&tp,tv=tp>>>13;r.negative=t.negative^e.negative,r.length=19;var tg=(h+(n=Math.imul(l,j))|0)+((8191&(i=(i=Math.imul(l,V))+Math.imul(c,j)|0))<<13)|0;h=((o=Math.imul(c,V))+(i>>>13)|0)+(tg>>>26)|0,tg&=67108863,n=Math.imul(d,j),i=(i=Math.imul(d,V))+Math.imul(v,j)|0,o=Math.imul(v,V);var tm=(h+(n=n+Math.imul(l,H)|0)|0)+((8191&(i=(i=i+Math.imul(l,W)|0)+Math.imul(c,H)|0))<<13)|0;h=((o=o+Math.imul(c,W)|0)+(i>>>13)|0)+(tm>>>26)|0,tm&=67108863,n=Math.imul(m,j),i=(i=Math.imul(m,V))+Math.imul(b,j)|0,o=Math.imul(b,V),n=n+Math.imul(d,H)|0,i=(i=i+Math.imul(d,W)|0)+Math.imul(v,H)|0,o=o+Math.imul(v,W)|0;var tb=(h+(n=n+Math.imul(l,Y)|0)|0)+((8191&(i=(i=i+Math.imul(l,q)|0)+Math.imul(c,Y)|0))<<13)|0;h=((o=o+Math.imul(c,q)|0)+(i>>>13)|0)+(tb>>>26)|0,tb&=67108863,n=Math.imul(x,j),i=(i=Math.imul(x,V))+Math.imul(_,j)|0,o=Math.imul(_,V),n=n+Math.imul(m,H)|0,i=(i=i+Math.imul(m,W)|0)+Math.imul(b,H)|0,o=o+Math.imul(b,W)|0,n=n+Math.imul(d,Y)|0,i=(i=i+Math.imul(d,q)|0)+Math.imul(v,Y)|0,o=o+Math.imul(v,q)|0;var ty=(h+(n=n+Math.imul(l,K)|0)|0)+((8191&(i=(i=i+Math.imul(l,Q)|0)+Math.imul(c,K)|0))<<13)|0;h=((o=o+Math.imul(c,Q)|0)+(i>>>13)|0)+(ty>>>26)|0,ty&=67108863,n=Math.imul(E,j),i=(i=Math.imul(E,V))+Math.imul(M,j)|0,o=Math.imul(M,V),n=n+Math.imul(x,H)|0,i=(i=i+Math.imul(x,W)|0)+Math.imul(_,H)|0,o=o+Math.imul(_,W)|0,n=n+Math.imul(m,Y)|0,i=(i=i+Math.imul(m,q)|0)+Math.imul(b,Y)|0,o=o+Math.imul(b,q)|0,n=n+Math.imul(d,K)|0,i=(i=i+Math.imul(d,Q)|0)+Math.imul(v,K)|0,o=o+Math.imul(v,Q)|0;var tx=(h+(n=n+Math.imul(l,$)|0)|0)+((8191&(i=(i=i+Math.imul(l,tt)|0)+Math.imul(c,$)|0))<<13)|0;h=((o=o+Math.imul(c,tt)|0)+(i>>>13)|0)+(tx>>>26)|0,tx&=67108863,n=Math.imul(T,j),i=(i=Math.imul(T,V))+Math.imul(R,j)|0,o=Math.imul(R,V),n=n+Math.imul(E,H)|0,i=(i=i+Math.imul(E,W)|0)+Math.imul(M,H)|0,o=o+Math.imul(M,W)|0,n=n+Math.imul(x,Y)|0,i=(i=i+Math.imul(x,q)|0)+Math.imul(_,Y)|0,o=o+Math.imul(_,q)|0,n=n+Math.imul(m,K)|0,i=(i=i+Math.imul(m,Q)|0)+Math.imul(b,K)|0,o=o+Math.imul(b,Q)|0,n=n+Math.imul(d,$)|0,i=(i=i+Math.imul(d,tt)|0)+Math.imul(v,$)|0,o=o+Math.imul(v,tt)|0;var t_=(h+(n=n+Math.imul(l,tr)|0)|0)+((8191&(i=(i=i+Math.imul(l,tn)|0)+Math.imul(c,tr)|0))<<13)|0;h=((o=o+Math.imul(c,tn)|0)+(i>>>13)|0)+(t_>>>26)|0,t_&=67108863,n=Math.imul(S,j),i=(i=Math.imul(S,V))+Math.imul(k,j)|0,o=Math.imul(k,V),n=n+Math.imul(T,H)|0,i=(i=i+Math.imul(T,W)|0)+Math.imul(R,H)|0,o=o+Math.imul(R,W)|0,n=n+Math.imul(E,Y)|0,i=(i=i+Math.imul(E,q)|0)+Math.imul(M,Y)|0,o=o+Math.imul(M,q)|0,n=n+Math.imul(x,K)|0,i=(i=i+Math.imul(x,Q)|0)+Math.imul(_,K)|0,o=o+Math.imul(_,Q)|0,n=n+Math.imul(m,$)|0,i=(i=i+Math.imul(m,tt)|0)+Math.imul(b,$)|0,o=o+Math.imul(b,tt)|0,n=n+Math.imul(d,tr)|0,i=(i=i+Math.imul(d,tn)|0)+Math.imul(v,tr)|0,o=o+Math.imul(v,tn)|0;var tw=(h+(n=n+Math.imul(l,to)|0)|0)+((8191&(i=(i=i+Math.imul(l,ta)|0)+Math.imul(c,to)|0))<<13)|0;h=((o=o+Math.imul(c,ta)|0)+(i>>>13)|0)+(tw>>>26)|0,tw&=67108863,n=Math.imul(L,j),i=(i=Math.imul(L,V))+Math.imul(I,j)|0,o=Math.imul(I,V),n=n+Math.imul(S,H)|0,i=(i=i+Math.imul(S,W)|0)+Math.imul(k,H)|0,o=o+Math.imul(k,W)|0,n=n+Math.imul(T,Y)|0,i=(i=i+Math.imul(T,q)|0)+Math.imul(R,Y)|0,o=o+Math.imul(R,q)|0,n=n+Math.imul(E,K)|0,i=(i=i+Math.imul(E,Q)|0)+Math.imul(M,K)|0,o=o+Math.imul(M,Q)|0,n=n+Math.imul(x,$)|0,i=(i=i+Math.imul(x,tt)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,tt)|0,n=n+Math.imul(m,tr)|0,i=(i=i+Math.imul(m,tn)|0)+Math.imul(b,tr)|0,o=o+Math.imul(b,tn)|0,n=n+Math.imul(d,to)|0,i=(i=i+Math.imul(d,ta)|0)+Math.imul(v,to)|0,o=o+Math.imul(v,ta)|0;var tE=(h+(n=n+Math.imul(l,tu)|0)|0)+((8191&(i=(i=i+Math.imul(l,th)|0)+Math.imul(c,tu)|0))<<13)|0;h=((o=o+Math.imul(c,th)|0)+(i>>>13)|0)+(tE>>>26)|0,tE&=67108863,n=Math.imul(B,j),i=(i=Math.imul(B,V))+Math.imul(F,j)|0,o=Math.imul(F,V),n=n+Math.imul(L,H)|0,i=(i=i+Math.imul(L,W)|0)+Math.imul(I,H)|0,o=o+Math.imul(I,W)|0,n=n+Math.imul(S,Y)|0,i=(i=i+Math.imul(S,q)|0)+Math.imul(k,Y)|0,o=o+Math.imul(k,q)|0,n=n+Math.imul(T,K)|0,i=(i=i+Math.imul(T,Q)|0)+Math.imul(R,K)|0,o=o+Math.imul(R,Q)|0,n=n+Math.imul(E,$)|0,i=(i=i+Math.imul(E,tt)|0)+Math.imul(M,$)|0,o=o+Math.imul(M,tt)|0,n=n+Math.imul(x,tr)|0,i=(i=i+Math.imul(x,tn)|0)+Math.imul(_,tr)|0,o=o+Math.imul(_,tn)|0,n=n+Math.imul(m,to)|0,i=(i=i+Math.imul(m,ta)|0)+Math.imul(b,to)|0,o=o+Math.imul(b,ta)|0,n=n+Math.imul(d,tu)|0,i=(i=i+Math.imul(d,th)|0)+Math.imul(v,tu)|0,o=o+Math.imul(v,th)|0;var tM=(h+(n=n+Math.imul(l,tl)|0)|0)+((8191&(i=(i=i+Math.imul(l,tc)|0)+Math.imul(c,tl)|0))<<13)|0;h=((o=o+Math.imul(c,tc)|0)+(i>>>13)|0)+(tM>>>26)|0,tM&=67108863,n=Math.imul(D,j),i=(i=Math.imul(D,V))+Math.imul(U,j)|0,o=Math.imul(U,V),n=n+Math.imul(B,H)|0,i=(i=i+Math.imul(B,W)|0)+Math.imul(F,H)|0,o=o+Math.imul(F,W)|0,n=n+Math.imul(L,Y)|0,i=(i=i+Math.imul(L,q)|0)+Math.imul(I,Y)|0,o=o+Math.imul(I,q)|0,n=n+Math.imul(S,K)|0,i=(i=i+Math.imul(S,Q)|0)+Math.imul(k,K)|0,o=o+Math.imul(k,Q)|0,n=n+Math.imul(T,$)|0,i=(i=i+Math.imul(T,tt)|0)+Math.imul(R,$)|0,o=o+Math.imul(R,tt)|0,n=n+Math.imul(E,tr)|0,i=(i=i+Math.imul(E,tn)|0)+Math.imul(M,tr)|0,o=o+Math.imul(M,tn)|0,n=n+Math.imul(x,to)|0,i=(i=i+Math.imul(x,ta)|0)+Math.imul(_,to)|0,o=o+Math.imul(_,ta)|0,n=n+Math.imul(m,tu)|0,i=(i=i+Math.imul(m,th)|0)+Math.imul(b,tu)|0,o=o+Math.imul(b,th)|0,n=n+Math.imul(d,tl)|0,i=(i=i+Math.imul(d,tc)|0)+Math.imul(v,tl)|0,o=o+Math.imul(v,tc)|0;var tA=(h+(n=n+Math.imul(l,td)|0)|0)+((8191&(i=(i=i+Math.imul(l,tv)|0)+Math.imul(c,td)|0))<<13)|0;h=((o=o+Math.imul(c,tv)|0)+(i>>>13)|0)+(tA>>>26)|0,tA&=67108863,n=Math.imul(D,H),i=(i=Math.imul(D,W))+Math.imul(U,H)|0,o=Math.imul(U,W),n=n+Math.imul(B,Y)|0,i=(i=i+Math.imul(B,q)|0)+Math.imul(F,Y)|0,o=o+Math.imul(F,q)|0,n=n+Math.imul(L,K)|0,i=(i=i+Math.imul(L,Q)|0)+Math.imul(I,K)|0,o=o+Math.imul(I,Q)|0,n=n+Math.imul(S,$)|0,i=(i=i+Math.imul(S,tt)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,tt)|0,n=n+Math.imul(T,tr)|0,i=(i=i+Math.imul(T,tn)|0)+Math.imul(R,tr)|0,o=o+Math.imul(R,tn)|0,n=n+Math.imul(E,to)|0,i=(i=i+Math.imul(E,ta)|0)+Math.imul(M,to)|0,o=o+Math.imul(M,ta)|0,n=n+Math.imul(x,tu)|0,i=(i=i+Math.imul(x,th)|0)+Math.imul(_,tu)|0,o=o+Math.imul(_,th)|0,n=n+Math.imul(m,tl)|0,i=(i=i+Math.imul(m,tc)|0)+Math.imul(b,tl)|0,o=o+Math.imul(b,tc)|0;var tT=(h+(n=n+Math.imul(d,td)|0)|0)+((8191&(i=(i=i+Math.imul(d,tv)|0)+Math.imul(v,td)|0))<<13)|0;h=((o=o+Math.imul(v,tv)|0)+(i>>>13)|0)+(tT>>>26)|0,tT&=67108863,n=Math.imul(D,Y),i=(i=Math.imul(D,q))+Math.imul(U,Y)|0,o=Math.imul(U,q),n=n+Math.imul(B,K)|0,i=(i=i+Math.imul(B,Q)|0)+Math.imul(F,K)|0,o=o+Math.imul(F,Q)|0,n=n+Math.imul(L,$)|0,i=(i=i+Math.imul(L,tt)|0)+Math.imul(I,$)|0,o=o+Math.imul(I,tt)|0,n=n+Math.imul(S,tr)|0,i=(i=i+Math.imul(S,tn)|0)+Math.imul(k,tr)|0,o=o+Math.imul(k,tn)|0,n=n+Math.imul(T,to)|0,i=(i=i+Math.imul(T,ta)|0)+Math.imul(R,to)|0,o=o+Math.imul(R,ta)|0,n=n+Math.imul(E,tu)|0,i=(i=i+Math.imul(E,th)|0)+Math.imul(M,tu)|0,o=o+Math.imul(M,th)|0,n=n+Math.imul(x,tl)|0,i=(i=i+Math.imul(x,tc)|0)+Math.imul(_,tl)|0,o=o+Math.imul(_,tc)|0;var tR=(h+(n=n+Math.imul(m,td)|0)|0)+((8191&(i=(i=i+Math.imul(m,tv)|0)+Math.imul(b,td)|0))<<13)|0;h=((o=o+Math.imul(b,tv)|0)+(i>>>13)|0)+(tR>>>26)|0,tR&=67108863,n=Math.imul(D,K),i=(i=Math.imul(D,Q))+Math.imul(U,K)|0,o=Math.imul(U,Q),n=n+Math.imul(B,$)|0,i=(i=i+Math.imul(B,tt)|0)+Math.imul(F,$)|0,o=o+Math.imul(F,tt)|0,n=n+Math.imul(L,tr)|0,i=(i=i+Math.imul(L,tn)|0)+Math.imul(I,tr)|0,o=o+Math.imul(I,tn)|0,n=n+Math.imul(S,to)|0,i=(i=i+Math.imul(S,ta)|0)+Math.imul(k,to)|0,o=o+Math.imul(k,ta)|0,n=n+Math.imul(T,tu)|0,i=(i=i+Math.imul(T,th)|0)+Math.imul(R,tu)|0,o=o+Math.imul(R,th)|0,n=n+Math.imul(E,tl)|0,i=(i=i+Math.imul(E,tc)|0)+Math.imul(M,tl)|0,o=o+Math.imul(M,tc)|0;var tO=(h+(n=n+Math.imul(x,td)|0)|0)+((8191&(i=(i=i+Math.imul(x,tv)|0)+Math.imul(_,td)|0))<<13)|0;h=((o=o+Math.imul(_,tv)|0)+(i>>>13)|0)+(tO>>>26)|0,tO&=67108863,n=Math.imul(D,$),i=(i=Math.imul(D,tt))+Math.imul(U,$)|0,o=Math.imul(U,tt),n=n+Math.imul(B,tr)|0,i=(i=i+Math.imul(B,tn)|0)+Math.imul(F,tr)|0,o=o+Math.imul(F,tn)|0,n=n+Math.imul(L,to)|0,i=(i=i+Math.imul(L,ta)|0)+Math.imul(I,to)|0,o=o+Math.imul(I,ta)|0,n=n+Math.imul(S,tu)|0,i=(i=i+Math.imul(S,th)|0)+Math.imul(k,tu)|0,o=o+Math.imul(k,th)|0,n=n+Math.imul(T,tl)|0,i=(i=i+Math.imul(T,tc)|0)+Math.imul(R,tl)|0,o=o+Math.imul(R,tc)|0;var tS=(h+(n=n+Math.imul(E,td)|0)|0)+((8191&(i=(i=i+Math.imul(E,tv)|0)+Math.imul(M,td)|0))<<13)|0;h=((o=o+Math.imul(M,tv)|0)+(i>>>13)|0)+(tS>>>26)|0,tS&=67108863,n=Math.imul(D,tr),i=(i=Math.imul(D,tn))+Math.imul(U,tr)|0,o=Math.imul(U,tn),n=n+Math.imul(B,to)|0,i=(i=i+Math.imul(B,ta)|0)+Math.imul(F,to)|0,o=o+Math.imul(F,ta)|0,n=n+Math.imul(L,tu)|0,i=(i=i+Math.imul(L,th)|0)+Math.imul(I,tu)|0,o=o+Math.imul(I,th)|0,n=n+Math.imul(S,tl)|0,i=(i=i+Math.imul(S,tc)|0)+Math.imul(k,tl)|0,o=o+Math.imul(k,tc)|0;var tk=(h+(n=n+Math.imul(T,td)|0)|0)+((8191&(i=(i=i+Math.imul(T,tv)|0)+Math.imul(R,td)|0))<<13)|0;h=((o=o+Math.imul(R,tv)|0)+(i>>>13)|0)+(tk>>>26)|0,tk&=67108863,n=Math.imul(D,to),i=(i=Math.imul(D,ta))+Math.imul(U,to)|0,o=Math.imul(U,ta),n=n+Math.imul(B,tu)|0,i=(i=i+Math.imul(B,th)|0)+Math.imul(F,tu)|0,o=o+Math.imul(F,th)|0,n=n+Math.imul(L,tl)|0,i=(i=i+Math.imul(L,tc)|0)+Math.imul(I,tl)|0,o=o+Math.imul(I,tc)|0;var tC=(h+(n=n+Math.imul(S,td)|0)|0)+((8191&(i=(i=i+Math.imul(S,tv)|0)+Math.imul(k,td)|0))<<13)|0;h=((o=o+Math.imul(k,tv)|0)+(i>>>13)|0)+(tC>>>26)|0,tC&=67108863,n=Math.imul(D,tu),i=(i=Math.imul(D,th))+Math.imul(U,tu)|0,o=Math.imul(U,th),n=n+Math.imul(B,tl)|0,i=(i=i+Math.imul(B,tc)|0)+Math.imul(F,tl)|0,o=o+Math.imul(F,tc)|0;var tL=(h+(n=n+Math.imul(L,td)|0)|0)+((8191&(i=(i=i+Math.imul(L,tv)|0)+Math.imul(I,td)|0))<<13)|0;h=((o=o+Math.imul(I,tv)|0)+(i>>>13)|0)+(tL>>>26)|0,tL&=67108863,n=Math.imul(D,tl),i=(i=Math.imul(D,tc))+Math.imul(U,tl)|0,o=Math.imul(U,tc);var tI=(h+(n=n+Math.imul(B,td)|0)|0)+((8191&(i=(i=i+Math.imul(B,tv)|0)+Math.imul(F,td)|0))<<13)|0;h=((o=o+Math.imul(F,tv)|0)+(i>>>13)|0)+(tI>>>26)|0,tI&=67108863;var tP=(h+(n=Math.imul(D,td))|0)+((8191&(i=(i=Math.imul(D,tv))+Math.imul(U,td)|0))<<13)|0;return h=((o=Math.imul(U,tv))+(i>>>13)|0)+(tP>>>26)|0,tP&=67108863,u[0]=tg,u[1]=tm,u[2]=tb,u[3]=ty,u[4]=tx,u[5]=t_,u[6]=tw,u[7]=tE,u[8]=tM,u[9]=tA,u[10]=tT,u[11]=tR,u[12]=tO,u[13]=tS,u[14]=tk,u[15]=tC,u[16]=tL,u[17]=tI,u[18]=tP,0!==h&&(u[19]=h,r.length++),r};function v(t,e,r){return new g().mulp(t,e,r)}function g(t,e){this.x=t,this.y=e}Math.imul||(d=p),o.prototype.mulTo=function(t,e){var r=this.length+t.length;return 10===this.length&&10===t.length?d(this,t,e):r<63?p(this,t,e):r<1024?function(t,e,r){r.negative=e.negative^t.negative,r.length=t.length+e.length;for(var n=0,i=0,o=0;o<r.length-1;o++){var a=i;i=0;for(var s=67108863&n,u=Math.min(o,e.length-1),h=Math.max(0,o-t.length+1);h<=u;h++){var f=o-h,l=(0|t.words[f])*(0|e.words[h]),c=67108863&l;a=a+(l/67108864|0)|0,s=67108863&(c=c+s|0),i+=(a=a+(c>>>26)|0)>>>26,a&=67108863}r.words[o]=s,n=a,a=i}return 0!==n?r.words[o]=n:r.length--,r.strip()}(this,t,e):v(this,t,e)},g.prototype.makeRBT=function(t){for(var e=Array(t),r=o.prototype._countBits(t)-1,n=0;n<t;n++)e[n]=this.revBin(n,r,t);return e},g.prototype.revBin=function(t,e,r){if(0===t||t===r-1)return t;for(var n=0,i=0;i<e;i++)n|=(1&t)<<e-i-1,t>>=1;return n},g.prototype.permute=function(t,e,r,n,i,o){for(var a=0;a<o;a++)n[a]=e[t[a]],i[a]=r[t[a]]},g.prototype.transform=function(t,e,r,n,i,o){this.permute(o,t,e,r,n,i);for(var a=1;a<i;a<<=1)for(var s=a<<1,u=Math.cos(2*Math.PI/s),h=Math.sin(2*Math.PI/s),f=0;f<i;f+=s)for(var l=u,c=h,p=0;p<a;p++){var d=r[f+p],v=n[f+p],g=r[f+p+a],m=n[f+p+a],b=l*g-c*m;m=l*m+c*g,g=b,r[f+p]=d+g,n[f+p]=v+m,r[f+p+a]=d-g,n[f+p+a]=v-m,p!==s&&(b=u*l-h*c,c=u*c+h*l,l=b)}},g.prototype.guessLen13b=function(t,e){var r=1|Math.max(e,t),n=1&r,i=0;for(r=r/2|0;r;r>>>=1)i++;return 1<<i+1+n},g.prototype.conjugate=function(t,e,r){if(!(r<=1))for(var n=0;n<r/2;n++){var i=t[n];t[n]=t[r-n-1],t[r-n-1]=i,i=e[n],e[n]=-e[r-n-1],e[r-n-1]=-i}},g.prototype.normalize13b=function(t,e){for(var r=0,n=0;n<e/2;n++){var i=8192*Math.round(t[2*n+1]/e)+Math.round(t[2*n]/e)+r;t[n]=67108863&i,r=i<67108864?0:i/67108864|0}return t},g.prototype.convert13b=function(t,e,r,i){for(var o=0,a=0;a<e;a++)o+=0|t[a],r[2*a]=8191&o,o>>>=13,r[2*a+1]=8191&o,o>>>=13;for(a=2*e;a<i;++a)r[a]=0;n(0===o),n((-8192&o)==0)},g.prototype.stub=function(t){for(var e=Array(t),r=0;r<t;r++)e[r]=0;return e},g.prototype.mulp=function(t,e,r){var n=2*this.guessLen13b(t.length,e.length),i=this.makeRBT(n),o=this.stub(n),a=Array(n),s=Array(n),u=Array(n),h=Array(n),f=Array(n),l=Array(n),c=r.words;c.length=n,this.convert13b(t.words,t.length,a,n),this.convert13b(e.words,e.length,h,n),this.transform(a,o,s,u,n,i),this.transform(h,o,f,l,n,i);for(var p=0;p<n;p++){var d=s[p]*f[p]-u[p]*l[p];u[p]=s[p]*l[p]+u[p]*f[p],s[p]=d}return this.conjugate(s,u,n),this.transform(s,u,c,o,n,i),this.conjugate(c,o,n),this.normalize13b(c,n),r.negative=t.negative^e.negative,r.length=t.length+e.length,r.strip()},o.prototype.mul=function(t){var e=new o(null);return e.words=Array(this.length+t.length),this.mulTo(t,e)},o.prototype.mulf=function(t){var e=new o(null);return e.words=Array(this.length+t.length),v(this,t,e)},o.prototype.imul=function(t){return this.clone().mulTo(t,this)},o.prototype.imuln=function(t){n("number"==typeof t),n(t<67108864);for(var e=0,r=0;r<this.length;r++){var i=(0|this.words[r])*t,o=(67108863&i)+(67108863&e);e>>=26,e+=(i/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==e&&(this.words[r]=e,this.length++),this},o.prototype.muln=function(t){return this.clone().imuln(t)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(t){var e=function(t){for(var e=Array(t.bitLength()),r=0;r<e.length;r++){var n=r/26|0,i=r%26;e[r]=(t.words[n]&1<<i)>>>i}return e}(t);if(0===e.length)return new o(1);for(var r=this,n=0;n<e.length&&0===e[n];n++,r=r.sqr());if(++n<e.length)for(var i=r.sqr();n<e.length;n++,i=i.sqr())0!==e[n]&&(r=r.mul(i));return r},o.prototype.iushln=function(t){n("number"==typeof t&&t>=0);var e,r=t%26,i=(t-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var a=0;for(e=0;e<this.length;e++){var s=this.words[e]&o,u=(0|this.words[e])-s<<r;this.words[e]=u|a,a=s>>>26-r}a&&(this.words[e]=a,this.length++)}if(0!==i){for(e=this.length-1;e>=0;e--)this.words[e+i]=this.words[e];for(e=0;e<i;e++)this.words[e]=0;this.length+=i}return this.strip()},o.prototype.ishln=function(t){return n(0===this.negative),this.iushln(t)},o.prototype.iushrn=function(t,e,r){n("number"==typeof t&&t>=0),i=e?(e-e%26)/26:0;var i,o=t%26,a=Math.min((t-o)/26,this.length),s=67108863^67108863>>>o<<o;if(i-=a,i=Math.max(0,i),r){for(var u=0;u<a;u++)r.words[u]=this.words[u];r.length=a}if(0===a);else if(this.length>a)for(this.length-=a,u=0;u<this.length;u++)this.words[u]=this.words[u+a];else this.words[0]=0,this.length=1;var h=0;for(u=this.length-1;u>=0&&(0!==h||u>=i);u--){var f=0|this.words[u];this.words[u]=h<<26-o|f>>>o,h=f&s}return r&&0!==h&&(r.words[r.length++]=h),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(t,e,r){return n(0===this.negative),this.iushrn(t,e,r)},o.prototype.shln=function(t){return this.clone().ishln(t)},o.prototype.ushln=function(t){return this.clone().iushln(t)},o.prototype.shrn=function(t){return this.clone().ishrn(t)},o.prototype.ushrn=function(t){return this.clone().iushrn(t)},o.prototype.testn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return!(this.length<=r)&&!!(this.words[r]&1<<e)},o.prototype.imaskn=function(t){n("number"==typeof t&&t>=0);var e=t%26,r=(t-e)/26;return(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)?this:(0!==e&&r++,this.length=Math.min(r,this.length),0!==e&&(this.words[this.length-1]&=67108863^67108863>>>e<<e),this.strip())},o.prototype.maskn=function(t){return this.clone().imaskn(t)},o.prototype.iaddn=function(t){return(n("number"==typeof t),n(t<67108864),t<0)?this.isubn(-t):0!==this.negative?(1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0):(this.negative=0,this.isubn(t),this.negative=1),this):this._iaddn(t)},o.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},o.prototype.isubn=function(t){if(n("number"==typeof t),n(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},o.prototype.addn=function(t){return this.clone().iaddn(t)},o.prototype.subn=function(t){return this.clone().isubn(t)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(t,e,r){var i,o,a=t.length+r;this._expand(a);var s=0;for(i=0;i<t.length;i++){o=(0|this.words[i+r])+s;var u=(0|t.words[i])*e;o-=67108863&u,s=(o>>26)-(u/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)s=(o=(0|this.words[i+r])+s)>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)s=(o=-(0|this.words[i])+s)>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(t,e){var r,n=this.length-t.length,i=this.clone(),a=t,s=0|a.words[a.length-1];0!=(n=26-this._countBits(s))&&(a=a.ushln(n),i.iushln(n),s=0|a.words[a.length-1]);var u=i.length-a.length;if("mod"!==e){(r=new o(null)).length=u+1,r.words=Array(r.length);for(var h=0;h<r.length;h++)r.words[h]=0}var f=i.clone()._ishlnsubmul(a,1,u);0===f.negative&&(i=f,r&&(r.words[u]=1));for(var l=u-1;l>=0;l--){var c=(0|i.words[a.length+l])*67108864+(0|i.words[a.length+l-1]);for(c=Math.min(c/s|0,67108863),i._ishlnsubmul(a,c,l);0!==i.negative;)c--,i.negative=0,i._ishlnsubmul(a,1,l),i.isZero()||(i.negative^=1);r&&(r.words[l]=c)}return r&&r.strip(),i.strip(),"div"!==e&&0!==n&&i.iushrn(n),{div:r||null,mod:i}},o.prototype.divmod=function(t,e,r){var i,a,s;return(n(!t.isZero()),this.isZero())?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===t.negative?(s=this.neg().divmod(t,e),"mod"!==e&&(i=s.div.neg()),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.iadd(t)),{div:i,mod:a}):0===this.negative&&0!==t.negative?(s=this.divmod(t.neg(),e),"mod"!==e&&(i=s.div.neg()),{div:i,mod:s.mod}):(this.negative&t.negative)!=0?(s=this.neg().divmod(t.neg(),e),"div"!==e&&(a=s.mod.neg(),r&&0!==a.negative&&a.isub(t)),{div:s.div,mod:a}):t.length>this.length||0>this.cmp(t)?{div:new o(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new o(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new o(this.modn(t.words[0]))}:this._wordDiv(t,e)},o.prototype.div=function(t){return this.divmod(t,"div",!1).div},o.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},o.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},o.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var r=0!==e.div.negative?e.mod.isub(t):e.mod,n=t.ushrn(1),i=t.andln(1),o=r.cmp(n);return o<0||1===i&&0===o?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},o.prototype.modn=function(t){n(t<=67108863);for(var e=67108864%t,r=0,i=this.length-1;i>=0;i--)r=(e*r+(0|this.words[i]))%t;return r},o.prototype.idivn=function(t){n(t<=67108863);for(var e=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*e;this.words[r]=i/t|0,e=i%t}return this.strip()},o.prototype.divn=function(t){return this.clone().idivn(t)},o.prototype.egcd=function(t){n(0===t.negative),n(!t.isZero());var e=this,r=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var i=new o(1),a=new o(0),s=new o(0),u=new o(1),h=0;e.isEven()&&r.isEven();)e.iushrn(1),r.iushrn(1),++h;for(var f=r.clone(),l=e.clone();!e.isZero();){for(var c=0,p=1;(e.words[0]&p)==0&&c<26;++c,p<<=1);if(c>0)for(e.iushrn(c);c-- >0;)(i.isOdd()||a.isOdd())&&(i.iadd(f),a.isub(l)),i.iushrn(1),a.iushrn(1);for(var d=0,v=1;(r.words[0]&v)==0&&d<26;++d,v<<=1);if(d>0)for(r.iushrn(d);d-- >0;)(s.isOdd()||u.isOdd())&&(s.iadd(f),u.isub(l)),s.iushrn(1),u.iushrn(1);e.cmp(r)>=0?(e.isub(r),i.isub(s),a.isub(u)):(r.isub(e),s.isub(i),u.isub(a))}return{a:s,b:u,gcd:r.iushln(h)}},o.prototype._invmp=function(t){n(0===t.negative),n(!t.isZero());var e,r=this,i=t.clone();r=0!==r.negative?r.umod(t):r.clone();for(var a=new o(1),s=new o(0),u=i.clone();r.cmpn(1)>0&&i.cmpn(1)>0;){for(var h=0,f=1;(r.words[0]&f)==0&&h<26;++h,f<<=1);if(h>0)for(r.iushrn(h);h-- >0;)a.isOdd()&&a.iadd(u),a.iushrn(1);for(var l=0,c=1;(i.words[0]&c)==0&&l<26;++l,c<<=1);if(l>0)for(i.iushrn(l);l-- >0;)s.isOdd()&&s.iadd(u),s.iushrn(1);r.cmp(i)>=0?(r.isub(i),a.isub(s)):(i.isub(r),s.isub(a))}return 0>(e=0===r.cmpn(1)?a:s).cmpn(0)&&e.iadd(t),e},o.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),r=t.clone();e.negative=0,r.negative=0;for(var n=0;e.isEven()&&r.isEven();n++)e.iushrn(1),r.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;r.isEven();)r.iushrn(1);var i=e.cmp(r);if(i<0){var o=e;e=r,r=o}else if(0===i||0===r.cmpn(1))break;e.isub(r)}return r.iushln(n)},o.prototype.invm=function(t){return this.egcd(t).a.umod(t)},o.prototype.isEven=function(){return(1&this.words[0])==0},o.prototype.isOdd=function(){return(1&this.words[0])==1},o.prototype.andln=function(t){return this.words[0]&t},o.prototype.bincn=function(t){n("number"==typeof t);var e=t%26,r=(t-e)/26,i=1<<e;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var o=i,a=r;0!==o&&a<this.length;a++){var s=0|this.words[a];s+=o,o=s>>>26,s&=67108863,this.words[a]=s}return 0!==o&&(this.words[a]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(t){var e,r=t<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)e=1;else{r&&(t=-t),n(t<=67108863,"Number is too big");var i=0|this.words[0];e=i===t?0:i<t?-1:1}return 0!==this.negative?0|-e:e},o.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return -1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},o.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return -1;for(var e=0,r=this.length-1;r>=0;r--){var n=0|this.words[r],i=0|t.words[r];if(n!==i){n<i?e=-1:n>i&&(e=1);break}}return e},o.prototype.gtn=function(t){return 1===this.cmpn(t)},o.prototype.gt=function(t){return 1===this.cmp(t)},o.prototype.gten=function(t){return this.cmpn(t)>=0},o.prototype.gte=function(t){return this.cmp(t)>=0},o.prototype.ltn=function(t){return -1===this.cmpn(t)},o.prototype.lt=function(t){return -1===this.cmp(t)},o.prototype.lten=function(t){return 0>=this.cmpn(t)},o.prototype.lte=function(t){return 0>=this.cmp(t)},o.prototype.eqn=function(t){return 0===this.cmpn(t)},o.prototype.eq=function(t){return 0===this.cmp(t)},o.red=function(t){return new E(t)},o.prototype.toRed=function(t){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},o.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(t){return this.red=t,this},o.prototype.forceRed=function(t){return n(!this.red,"Already a number in reduction context"),this._forceRed(t)},o.prototype.redAdd=function(t){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},o.prototype.redIAdd=function(t){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},o.prototype.redSub=function(t){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},o.prototype.redISub=function(t){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},o.prototype.redShl=function(t){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},o.prototype.redMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},o.prototype.redIMul=function(t){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},o.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(t){return n(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var m={k256:null,p224:null,p192:null,p25519:null};function b(t,e){this.name=t,this.p=new o(e,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function y(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function _(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=o._prime(t);this.m=e.p,this.prime=e}else n(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function M(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var t=new o(null);return t.words=Array(Math.ceil(this.n/13)),t},b.prototype.ireduce=function(t){var e,r=t;do this.split(r,this.tmp),e=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(e>this.n);var n=e<this.n?-1:r.ucmp(this.p);return 0===n?(r.words[0]=0,r.length=1):n>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(t,e){t.iushrn(this.n,0,e)},b.prototype.imulK=function(t){return t.imul(this.k)},i(y,b),y.prototype.split=function(t,e){for(var r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9){t.words[0]=0,t.length=1;return}var i=t.words[9];for(n=10,e.words[e.length++]=4194303&i;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(4194303&o)<<4|i>>>22,i=o}i>>>=22,t.words[n-10]=i,0===i&&t.length>10?t.length-=10:t.length-=9},y.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,r=0;r<t.length;r++){var n=0|t.words[r];e+=977*n,t.words[r]=67108863&e,e=64*n+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},i(x,b),i(_,b),i(w,b),w.prototype.imulK=function(t){for(var e=0,r=0;r<t.length;r++){var n=(0|t.words[r])*19+e,i=67108863&n;n>>>=26,t.words[r]=i,e=n}return 0!==e&&(t.words[t.length++]=e),t},o._prime=function(t){var e;if(m[t])return m[t];if("k256"===t)e=new y;else if("p224"===t)e=new x;else if("p192"===t)e=new _;else if("p25519"===t)e=new w;else throw Error("Unknown prime "+t);return m[t]=e,e},E.prototype._verify1=function(t){n(0===t.negative,"red works only with positives"),n(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){n((t.negative|e.negative)==0,"red works only with positives"),n(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var r=t.add(e);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var r=t.iadd(e);return r.cmp(this.m)>=0&&r.isub(this.m),r},E.prototype.sub=function(t,e){this._verify2(t,e);var r=t.sub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var r=t.isub(e);return 0>r.cmpn(0)&&r.iadd(this.m),r},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(n(e%2==1),3===e){var r=this.m.add(new o(1)).iushrn(2);return this.pow(t,r)}for(var i=this.m.subn(1),a=0;!i.isZero()&&0===i.andln(1);)a++,i.iushrn(1);n(!i.isZero());var s=new o(1).toRed(this),u=s.redNeg(),h=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new o(2*f*f).toRed(this);0!==this.pow(f,h).cmp(u);)f.redIAdd(u);for(var l=this.pow(f,i),c=this.pow(t,i.addn(1).iushrn(1)),p=this.pow(t,i),d=a;0!==p.cmp(s);){for(var v=p,g=0;0!==v.cmp(s);g++)v=v.redSqr();n(g<d);var m=this.pow(l,new o(1).iushln(d-g-1));c=c.redMul(m),l=m.redSqr(),p=p.redMul(l),d=g}return c},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new o(1).toRed(this);if(0===e.cmpn(1))return t.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=t;for(var n=2;n<r.length;n++)r[n]=this.mul(r[n-1],t);var i=r[0],a=0,s=0,u=e.bitLength()%26;for(0===u&&(u=26),n=e.length-1;n>=0;n--){for(var h=e.words[n],f=u-1;f>=0;f--){var l=h>>f&1;if(i!==r[0]&&(i=this.sqr(i)),0===l&&0===a){s=0;continue}a<<=1,a|=l,(4==++s||0===n&&0===f)&&(i=this.mul(i,r[a]),s=0,a=0)}u=26}return i},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},o.mont=function(t){return new M(t)},i(M,E),M.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},M.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},M.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var r=t.imul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),o=i;return i.cmp(this.m)>=0?o=i.isub(this.m):0>i.cmpn(0)&&(o=i.iadd(this.m)),o._forceRed(this)},M.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new o(0)._forceRed(this);var r=t.mul(e),n=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=r.isub(n).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):0>i.cmpn(0)&&(a=i.iadd(this.m)),a._forceRed(this)},M.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=r.nmd(t),this)},6204:function(t){"use strict";t.exports=function(t){var e,r,n,i=t.length,o=0;for(e=0;e<i;++e)o+=t[e].length;var a=Array(o),s=0;for(e=0;e<i;++e){var u=t[e],h=u.length;for(r=0;r<h;++r){var f=a[s++]=Array(h-1),l=0;for(n=0;n<h;++n)n!==r&&(f[l++]=u[n]);if(1&r){var c=f[1];f[1]=f[0],f[0]=c}}}return a}},6867:function(t,e,r){"use strict";t.exports=function(t,e,r){switch(arguments.length){case 1:return n=[],u(t,t,h,!0),n;case 2:if("function"==typeof e)return u(t,t,e,!0);return n=[],u(t,e,h,!1),n;case 3:return u(t,e,r,!1);default:throw Error("box-intersect: Invalid arguments")}};var n,i=r(1888),o=r(855),a=r(7150);function s(t,e,r,n){for(var i=0,o=0,a=0,s=t.length;a<s;++a){var u=t[a];if(!function(t,e){for(var r=0;r<t;++r)if(!(e[r]<=e[r+t]))return!0;return!1}(e,u)){for(var h=0;h<2*e;++h)r[i++]=u[h];n[o++]=a}}return o}function u(t,e,r,n){var u,h=t.length,f=e.length;if(!(h<=0)&&!(f<=0)){var l=t[0].length>>>1;if(!(l<=0)){var c=i.mallocDouble(2*l*h),p=i.mallocInt32(h);if((h=s(t,l,c,p))>0){if(1===l&&n)o.init(h),u=o.sweepComplete(l,r,0,h,c,p,0,h,c,p);else{var d=i.mallocDouble(2*l*f),v=i.mallocInt32(f);(f=s(e,l,d,v))>0&&(o.init(h+f),u=1===l?o.sweepBipartite(l,r,0,h,c,p,0,f,d,v):a(l,r,n,h,c,p,f,d,v),i.free(d),i.free(v))}i.free(c),i.free(p)}return u}}}function h(t,e){n.push([t,e])}},2455:function(t,e){"use strict";function r(t){return t?function(t,e,r,n,i,o,a,s,u,h,f){return i-n>u-s?function(t,e,r,n,i,o,a,s,u,h,f){for(var l=2*t,c=n,p=l*n;c<i;++c,p+=l){var d=o[e+p],v=o[e+p+t],g=a[c];t:for(var m=s,b=l*s;m<u;++m,b+=l){var y=h[e+b],x=h[e+b+t],_=f[m];if(!(x<d)&&!(v<y)){for(var w=e+1;w<t;++w){var E=o[w+p],M=o[w+t+p],A=h[w+b],T=h[w+t+b];if(M<A||T<E)continue t}var R=r(g,_);if(void 0!==R)return R}}}}(t,e,r,n,i,o,a,s,u,h,f):function(t,e,r,n,i,o,a,s,u,h,f){for(var l=2*t,c=s,p=l*s;c<u;++c,p+=l){var d=h[e+p],v=h[e+p+t],g=f[c];t:for(var m=n,b=l*n;m<i;++m,b+=l){var y=o[e+b],x=o[e+b+t],_=a[m];if(!(v<y)&&!(x<d)){for(var w=e+1;w<t;++w){var E=o[w+b],M=o[w+t+b],A=h[w+p],T=h[w+t+p];if(M<A||T<E)continue t}var R=r(_,g);if(void 0!==R)return R}}}}(t,e,r,n,i,o,a,s,u,h,f)}:function(t,e,r,n,i,o,a,s,u,h,f,l){return o-i>h-u?n?function(t,e,r,n,i,o,a,s,u,h,f){for(var l=2*t,c=n,p=l*n;c<i;++c,p+=l){var d=o[e+p],v=o[e+p+t],g=a[c];t:for(var m=s,b=l*s;m<u;++m,b+=l){var y=h[e+b],x=f[m];if(!(y<=d)&&!(v<y)){for(var _=e+1;_<t;++_){var w=o[_+p],E=o[_+t+p],M=h[_+b],A=h[_+t+b];if(E<M||A<w)continue t}var T=r(x,g);if(void 0!==T)return T}}}}(t,e,r,i,o,a,s,u,h,f,l):function(t,e,r,n,i,o,a,s,u,h,f){for(var l=2*t,c=n,p=l*n;c<i;++c,p+=l){var d=o[e+p],v=o[e+p+t],g=a[c];t:for(var m=s,b=l*s;m<u;++m,b+=l){var y=h[e+b],x=f[m];if(!(y<d)&&!(v<y)){for(var _=e+1;_<t;++_){var w=o[_+p],E=o[_+t+p],M=h[_+b],A=h[_+t+b];if(E<M||A<w)continue t}var T=r(g,x);if(void 0!==T)return T}}}}(t,e,r,i,o,a,s,u,h,f,l):n?function(t,e,r,n,i,o,a,s,u,h,f){for(var l=2*t,c=s,p=l*s;c<u;++c,p+=l){var d=h[e+p],v=f[c];t:for(var g=n,m=l*n;g<i;++g,m+=l){var b=o[e+m],y=o[e+m+t],x=a[g];if(!(d<=b)&&!(y<d)){for(var _=e+1;_<t;++_){var w=o[_+m],E=o[_+t+m],M=h[_+p],A=h[_+t+p];if(E<M||A<w)continue t}var T=r(v,x);if(void 0!==T)return T}}}}(t,e,r,i,o,a,s,u,h,f,l):function(t,e,r,n,i,o,a,s,u,h,f){for(var l=2*t,c=s,p=l*s;c<u;++c,p+=l){var d=h[e+p],v=f[c];t:for(var g=n,m=l*n;g<i;++g,m+=l){var b=o[e+m],y=o[e+m+t],x=a[g];if(!(d<b)&&!(y<d)){for(var _=e+1;_<t;++_){var w=o[_+m],E=o[_+t+m],M=h[_+p],A=h[_+t+p];if(E<M||A<w)continue t}var T=r(x,v);if(void 0!==T)return T}}}}(t,e,r,i,o,a,s,u,h,f,l)}}e.partial=r(!1),e.full=r(!0)},7150:function(t,e,r){"use strict";t.exports=function(t,e,r,o,f,x,_,w,E){W=o+_,X=8*i.log2(W+1)*(t+1)|0,Y=i.nextPow2(6*X),m.length<Y&&(n.free(m),m=n.mallocInt32(Y)),q=i.nextPow2(2*X),b.length<q&&(n.free(b),b=n.mallocDouble(q));var M=0,A=2*t;for(y(M++,0,0,o,0,_,r?16:0,-1/0,1/0),r||y(M++,0,0,_,0,o,1,-1/0,1/0);M>0;){var T=6*(M-=1),R=m[T],O=m[T+1],S=m[T+2],k=m[T+3],C=m[T+4],L=m[T+5],I=2*M,P=b[I],B=b[I+1],F=1&L,N=!!(16&L),D=f,U=x,z=w,j=E;if(F&&(D=w,U=E,z=f,j=x),!(2&L&&(S=p(t,R,O,S,D,U,B),O>=S)||4&L&&(O=d(t,R,O,S,D,U,P))>=S)){var V=S-O,G=C-k;if(N){if(t*V*(V+G)<4194304){if(void 0!==(Z=u.scanComplete(t,R,e,O,S,D,U,k,C,z,j)))return Z;continue}}else{if(t*Math.min(V,G)<128){if(void 0!==(Z=a(t,R,e,F,O,S,D,U,k,C,z,j)))return Z;continue}if(t*V*G<4194304){if(void 0!==(Z=u.scanBipartite(t,R,e,F,O,S,D,U,k,C,z,j)))return Z;continue}}var H=l(t,R,O,S,D,U,P,B);if(O<H){if(t*(H-O)<128){if(void 0!==(Z=s(t,R+1,e,O,H,D,U,k,C,z,j)))return Z}else if(R===t-2){if(void 0!==(Z=F?u.sweepBipartite(t,e,k,C,z,j,O,H,D,U):u.sweepBipartite(t,e,O,H,D,U,k,C,z,j)))return Z}else y(M++,R+1,O,H,k,C,F,-1/0,1/0),y(M++,R+1,k,C,O,H,1^F,-1/0,1/0)}if(H<S){var W,X,Y,q,Z,K,Q=h(t,R,k,C,z,j),J=z[A*Q+R],$=c(t,R,Q,C,z,j,J);if($<C&&y(M++,R,H,S,$,C,(4|F)+(N?16:0),J,B),k<Q&&y(M++,R,H,S,k,Q,(2|F)+(N?16:0),P,J),Q+1===$){if(void 0!==(Z=N?function(t,e,r,n,i,o,a,s,u,h){var f=2*t,l=s*f,c=u[l+e];e:for(var p=n,d=n*f;p<i;++p,d+=f){var v=a[p];if(v!==h){var g=o[d+e],m=o[d+e+t];if(!(c<g)&&!(m<c)){for(var b=e+1;b<t;++b){var g=o[d+b],m=o[d+b+t],y=u[l+b],x=u[l+b+t];if(m<y||x<g)continue e}var _=r(v,h);if(void 0!==_)return _}}}}(t,R,e,H,S,D,U,Q,z,j[Q]):function(t,e,r,n,i,o,a,s,u,h,f){var l=2*t,c=u*l,p=h[c+e];e:for(var d=i,v=i*l;d<o;++d,v+=l){var g,m=a[v+e],b=a[v+e+t];if(!(p<m)&&!(b<p)&&(!n||p!==m)){for(var y=s[d],x=e+1;x<t;++x){var m=a[v+x],b=a[v+x+t],_=h[c+x],w=h[c+x+t];if(b<_||w<m)continue e}if(void 0!==(g=n?r(f,y):r(y,f)))return g}}}(t,R,e,F,H,S,D,U,Q,z,j[Q])))return Z}else if(Q<$){if(N){if(K=v(t,R,H,S,D,U,J),H<K){var tt=c(t,R,H,K,D,U,J);if(R===t-2){if(H<tt&&void 0!==(Z=u.sweepComplete(t,e,H,tt,D,U,Q,$,z,j))||tt<K&&void 0!==(Z=u.sweepBipartite(t,e,tt,K,D,U,Q,$,z,j)))return Z}else H<tt&&y(M++,R+1,H,tt,Q,$,16,-1/0,1/0),tt<K&&(y(M++,R+1,tt,K,Q,$,0,-1/0,1/0),y(M++,R+1,Q,$,tt,K,1,-1/0,1/0))}}else K=F?g(t,R,H,S,D,U,J):v(t,R,H,S,D,U,J),H<K&&(R===t-2?Z=F?u.sweepBipartite(t,e,Q,$,z,j,H,K,D,U):u.sweepBipartite(t,e,H,K,D,U,Q,$,z,j):(y(M++,R+1,H,K,Q,$,F,-1/0,1/0),y(M++,R+1,Q,$,H,K,1^F,-1/0,1/0)))}}}}};var n=r(1888),i=r(8828),o=r(2455),a=o.partial,s=o.full,u=r(855),h=r(3545),f=r(8105),l=f("!(lo>=p0)&&!(p1>=hi)"),c=f("lo===p0"),p=f("lo<p0"),d=f("hi<=p0"),v=f("lo<=p0&&p0<=hi"),g=f("lo<p0&&p0<=hi"),m=n.mallocInt32(1024),b=n.mallocDouble(1024);function y(t,e,r,n,i,o,a,s,u){var h=6*t;m[h]=e,m[h+1]=r,m[h+2]=n,m[h+3]=i,m[h+4]=o,m[h+5]=a;var f=2*t;b[f]=s,b[f+1]=u}},3545:function(t,e,r){"use strict";t.exports=function(t,e,r,i,o,a){if(i<=r+1)return r;for(var s=r,u=i,h=i+r>>>1,f=2*t,l=h,c=o[f*h+e];s<u;){if(u-s<8){!function(t,e,r,n,i,o){for(var a=2*t,s=a*(r+1)+e,u=r+1;u<n;++u,s+=a)for(var h=i[s],f=u,l=a*(u-1);f>r&&i[l+e]>h;--f,l-=a){for(var c=l,p=l+a,d=0;d<a;++d,++c,++p){var v=i[c];i[c]=i[p],i[p]=v}var g=o[f];o[f]=o[f-1],o[f-1]=g}}(t,e,s,u,o,a),c=o[f*h+e];break}var p=u-s,d=Math.random()*p+s|0,v=o[f*d+e],g=Math.random()*p+s|0,m=o[f*g+e],b=Math.random()*p+s|0,y=o[f*b+e];v<=m?y>=m?(l=g,c=m):v>=y?(l=d,c=v):(l=b,c=y):m>=y?(l=g,c=m):y>=v?(l=d,c=v):(l=b,c=y);for(var x=f*(u-1),_=f*l,w=0;w<f;++w,++x,++_){var E=o[x];o[x]=o[_],o[_]=E}var M=a[u-1];a[u-1]=a[l],a[l]=M,l=n(t,e,s,u-1,o,a,c);for(var x=f*(u-1),_=f*l,w=0;w<f;++w,++x,++_){var E=o[x];o[x]=o[_],o[_]=E}var M=a[u-1];if(a[u-1]=a[l],a[l]=M,h<l){for(u=l-1;s<u&&o[f*(u-1)+e]===c;)u-=1;u+=1}else if(l<h)for(s=l+1;s<u&&o[f*s+e]===c;)s+=1;else break}return n(t,e,r,h,o,a,o[f*h+e])};var n=r(8105)("lo<p0")},8105:function(t){"use strict";t.exports=function(t){return e[t]};var e={"lo===p0":function(t,e,r,n,i,o,a){for(var s=2*t,u=s*r,h=u,f=r,l=r;n>l;++l,u+=s)if(i[u+e]===a){if(f===l)f+=1,h+=s;else{for(var c=0;s>c;++c){var p=i[u+c];i[u+c]=i[h],i[h++]=p}var d=o[l];o[l]=o[f],o[f++]=d}}return f},"lo<p0":function(t,e,r,n,i,o,a){for(var s=2*t,u=s*r,h=u,f=r,l=r;n>l;++l,u+=s)if(i[u+e]<a){if(f===l)f+=1,h+=s;else{for(var c=0;s>c;++c){var p=i[u+c];i[u+c]=i[h],i[h++]=p}var d=o[l];o[l]=o[f],o[f++]=d}}return f},"lo<=p0":function(t,e,r,n,i,o,a){for(var s=2*t,u=s*r,h=u,f=r,l=t+e,c=r;n>c;++c,u+=s)if(i[u+l]<=a){if(f===c)f+=1,h+=s;else{for(var p=0;s>p;++p){var d=i[u+p];i[u+p]=i[h],i[h++]=d}var v=o[c];o[c]=o[f],o[f++]=v}}return f},"hi<=p0":function(t,e,r,n,i,o,a){for(var s=2*t,u=s*r,h=u,f=r,l=t+e,c=r;n>c;++c,u+=s)if(i[u+l]<=a){if(f===c)f+=1,h+=s;else{for(var p=0;s>p;++p){var d=i[u+p];i[u+p]=i[h],i[h++]=d}var v=o[c];o[c]=o[f],o[f++]=v}}return f},"lo<p0&&p0<=hi":function(t,e,r,n,i,o,a){for(var s=2*t,u=s*r,h=u,f=r,l=t+e,c=r;n>c;++c,u+=s){var p=i[u+e],d=i[u+l];if(p<a&&a<=d){if(f===c)f+=1,h+=s;else{for(var v=0;s>v;++v){var g=i[u+v];i[u+v]=i[h],i[h++]=g}var m=o[c];o[c]=o[f],o[f++]=m}}}return f},"lo<=p0&&p0<=hi":function(t,e,r,n,i,o,a){for(var s=2*t,u=s*r,h=u,f=r,l=t+e,c=r;n>c;++c,u+=s){var p=i[u+e],d=i[u+l];if(p<=a&&a<=d){if(f===c)f+=1,h+=s;else{for(var v=0;s>v;++v){var g=i[u+v];i[u+v]=i[h],i[h++]=g}var m=o[c];o[c]=o[f],o[f++]=m}}}return f},"!(lo>=p0)&&!(p1>=hi)":function(t,e,r,n,i,o,a,s){for(var u=2*t,h=u*r,f=h,l=r,c=t+e,p=r;n>p;++p,h+=u){var d=i[h+e],v=i[h+c];if(!(d>=a)&&!(s>=v)){if(l===p)l+=1,f+=u;else{for(var g=0;u>g;++g){var m=i[h+g];i[h+g]=i[f],i[f++]=m}var b=o[p];o[p]=o[l],o[l++]=b}}}return l}}},1811:function(t){"use strict";function e(t,e,r){for(var n=2*(t+1),i=t+1;i<=e;++i){for(var o=r[n++],a=r[n++],s=i,u=n-2;s-- >t;){var h=r[u-2],f=r[u-1];if(h<o||h===o&&f<a)break;r[u]=h,r[u+1]=f,u-=2}r[u]=o,r[u+1]=a}}function r(t,e,r){e*=2;var n=r[t*=2],i=r[t+1];r[t]=r[e],r[t+1]=r[e+1],r[e]=n,r[e+1]=i}function n(t,e,r){e*=2,r[t*=2]=r[e],r[t+1]=r[e+1]}function i(t,e,r,n,i){e*=2,i[t*=2]=i[e],i[e]=r,i[t+1]=i[e+1],i[e+1]=n}function o(t,e,r){e*=2;var n=r[t*=2],i=r[e];return!(n<i)&&(n!==i||r[t+1]>r[e+1])}function a(t,e,r,n){var i=n[t*=2];return i<e||i===e&&n[t+1]<r}t.exports=function(t,s){s<=128?e(0,s-1,t):function t(s,u,h){var f=(u-s+1)/6|0,l=s+f,c=u-f,p=s+u>>1,d=p-f,v=p+f,g=l,m=d,b=p,y=v,x=c,_=s+1,w=u-1,E=0;o(g,m,h)&&(E=g,g=m,m=E),o(y,x,h)&&(E=y,y=x,x=E),o(g,b,h)&&(E=g,g=b,b=E),o(m,b,h)&&(E=m,m=b,b=E),o(g,y,h)&&(E=g,g=y,y=E),o(b,y,h)&&(E=b,b=y,y=E),o(m,x,h)&&(E=m,m=x,x=E),o(m,b,h)&&(E=m,m=b,b=E),o(y,x,h)&&(E=y,y=x,x=E);for(var M=h[2*m],A=h[2*m+1],T=h[2*y],R=h[2*y+1],O=2*g,S=2*b,k=2*x,C=2*l,L=2*p,I=2*c,P=0;P<2;++P){var B=h[O+P],F=h[S+P],N=h[k+P];h[C+P]=B,h[L+P]=F,h[I+P]=N}n(d,s,h),n(v,u,h);for(var D=_;D<=w;++D)if(a(D,M,A,h))D!==_&&r(D,_,h),++_;else if(!a(D,T,R,h))for(;;){if(a(w,T,R,h)){a(w,M,A,h)?(function(t,e,r,n){e*=2,r*=2;var i=n[t*=2],o=n[t+1];n[t]=n[e],n[t+1]=n[e+1],n[e]=n[r],n[e+1]=n[r+1],n[r]=i,n[r+1]=o}(D,_,w,h),++_):r(D,w,h),--w;break}if(--w<D)break}i(s,_-1,M,A,h),i(u,w+1,T,R,h),_-2-s<=32?e(s,_-2,h):t(s,_-2,h),u-(w+2)<=32?e(w+2,u,h):t(w+2,u,h),w-_<=32?e(_,w,h):t(_,w,h)}(0,s-1,t)}},855:function(t,e,r){"use strict";t.exports={init:function(t){var e=i.nextPow2(t);a.length<e&&(n.free(a),a=n.mallocInt32(e)),s.length<e&&(n.free(s),s=n.mallocInt32(e)),u.length<e&&(n.free(u),u=n.mallocInt32(e)),h.length<e&&(n.free(h),h=n.mallocInt32(e)),f.length<e&&(n.free(f),f=n.mallocInt32(e)),l.length<e&&(n.free(l),l=n.mallocInt32(e));var r=8*e;c.length<r&&(n.free(c),c=n.mallocDouble(r))},sweepBipartite:function(t,e,r,n,i,f,l,v,g,m){for(var b=0,y=2*t,x=t-1,_=y-1,w=r;w<n;++w){var E=f[w],M=y*w;c[b++]=i[M+x],c[b++]=-(E+1),c[b++]=i[M+_],c[b++]=E}for(var w=l;w<v;++w){var E=m[w]+268435456,A=y*w;c[b++]=g[A+x],c[b++]=-E,c[b++]=g[A+_],c[b++]=E}var T=b>>>1;o(c,T);for(var R=0,O=0,w=0;w<T;++w){var S=0|c[2*w+1];if(S>=268435456)S=S-268435456|0,p(u,h,O--,S);else if(S>=0)p(a,s,R--,S);else if(S<=-268435456){S=-S-268435456|0;for(var k=0;k<R;++k){var C=e(a[k],S);if(void 0!==C)return C}d(u,h,O++,S)}else{S=-S-1|0;for(var k=0;k<O;++k){var C=e(S,u[k]);if(void 0!==C)return C}d(a,s,R++,S)}}},sweepComplete:function(t,e,r,n,i,v,g,m,b,y){for(var x=0,_=2*t,w=t-1,E=_-1,M=r;M<n;++M){var A=v[M]+1<<1,T=_*M;c[x++]=i[T+w],c[x++]=-A,c[x++]=i[T+E],c[x++]=A}for(var M=g;M<m;++M){var A=y[M]+1<<1,R=_*M;c[x++]=b[R+w],c[x++]=1|-A,c[x++]=b[R+E],c[x++]=1|A}var O=x>>>1;o(c,O);for(var S=0,k=0,C=0,M=0;M<O;++M){var L=0|c[2*M+1],I=1&L;if(M<O-1&&L>>1==c[2*M+3]>>1&&(I=2,M+=1),L<0){for(var P=-(L>>1)-1,B=0;B<C;++B){var F=e(f[B],P);if(void 0!==F)return F}if(0!==I)for(var B=0;B<S;++B){var F=e(a[B],P);if(void 0!==F)return F}if(1!==I)for(var B=0;B<k;++B){var F=e(u[B],P);if(void 0!==F)return F}0===I?d(a,s,S++,P):1===I?d(u,h,k++,P):2===I&&d(f,l,C++,P)}else{var P=(L>>1)-1;0===I?p(a,s,S--,P):1===I?p(u,h,k--,P):2===I&&p(f,l,C--,P)}}},scanBipartite:function(t,e,r,n,i,u,h,f,l,v,g,m){var b=0,y=2*t,x=e+t,_=1,w=1;n?w=268435456:_=268435456;for(var E=i;E<u;++E){var M=E+_,A=y*E;c[b++]=h[A+e],c[b++]=-M,c[b++]=h[A+x],c[b++]=M}for(var E=l;E<v;++E){var M=E+w,T=y*E;c[b++]=g[T+e],c[b++]=-M}var R=b>>>1;o(c,R);for(var O=0,E=0;E<R;++E){var S=0|c[2*E+1];if(S<0){var M=-S,k=!1;if(M>=268435456?(k=!n,M-=268435456):(k=!!n,M-=1),k)d(a,s,O++,M);else{var C=m[M],L=y*M,I=g[L+e+1],P=g[L+e+1+t];e:for(var B=0;B<O;++B){var F,N=a[B],D=y*N;if(!(P<h[D+e+1])&&!(h[D+e+1+t]<I)){for(var U=e+2;U<t;++U)if(g[L+U+t]<h[D+U]||h[D+U+t]<g[L+U])continue e;var z=f[N];if(void 0!==(F=n?r(C,z):r(z,C)))return F}}}}else p(a,s,O--,S-_)}},scanComplete:function(t,e,r,n,i,s,u,h,f,l,p){for(var d=0,v=2*t,g=e+t,m=n;m<i;++m){var b=m+268435456,y=v*m;c[d++]=s[y+e],c[d++]=-b,c[d++]=s[y+g],c[d++]=b}for(var m=h;m<f;++m){var b=m+1,x=v*m;c[d++]=l[x+e],c[d++]=-b}var _=d>>>1;o(c,_);for(var w=0,m=0;m<_;++m){var E=0|c[2*m+1];if(E<0){var b=-E;if(b>=268435456)a[w++]=b-268435456;else{var M=p[b-=1],A=v*b,T=l[A+e+1],R=l[A+e+1+t];e:for(var O=0;O<w;++O){var S=a[O],k=u[S];if(k===M)break;var C=v*S;if(!(R<s[C+e+1])&&!(s[C+e+1+t]<T)){for(var L=e+2;L<t;++L)if(l[A+L+t]<s[C+L]||s[C+L+t]<l[A+L])continue e;var I=r(k,M);if(void 0!==I)return I}}}}else{for(var b=E-268435456,O=w-1;O>=0;--O)if(a[O]===b){for(var L=O+1;L<w;++L)a[L-1]=a[L];break}--w}}}};var n=r(1888),i=r(8828),o=r(1811),a=n.mallocInt32(1024),s=n.mallocInt32(1024),u=n.mallocInt32(1024),h=n.mallocInt32(1024),f=n.mallocInt32(1024),l=n.mallocInt32(1024),c=n.mallocDouble(8192);function p(t,e,r,n){var i=e[n],o=t[r-1];t[i]=o,e[o]=i}function d(t,e,r,n){t[r]=n,e[n]=r}},2538:function(t,e,r){"use strict";var n=r(8902),i=r(5542),o=r(2272),a=r(5023);function s(t){return[Math.min(t[0],t[1]),Math.max(t[0],t[1])]}function u(t,e){return t[0]-e[0]||t[1]-e[1]}function h(t,e,r){return e in t?t[e]:r}t.exports=function(t,e,r){Array.isArray(e)?(r=r||{},e=e||[]):(r=e||{},e=[]);var f=!!h(r,"delaunay",!0),l=!!h(r,"interior",!0),c=!!h(r,"exterior",!0),p=!!h(r,"infinity",!1);if(!l&&!c||0===t.length)return[];var d=n(t,e);if(!f&&l===c&&!p)return d;for(var v=i(t.length,e.map(s).sort(u)),g=0;g<d.length;++g){var m=d[g];v.addTriangle(m[0],m[1],m[2])}return(f&&o(t,v),c)?l?p?a(v,0,p):v.cells():a(v,1,p):a(v,-1)}},2272:function(t,e,r){"use strict";var n=r(2646)[4];function i(t,e,r,i,o,a){var s=e.opposite(i,o);if(!(s<0)){if(o<i){var u=i;i=o,o=u,u=a,a=s,s=u}!e.isConstraint(i,o)&&0>n(t[i],t[o],t[a],t[s])&&r.push(i,o)}}r(2478),t.exports=function(t,e){for(var r=[],o=t.length,a=e.stars,s=0;s<o;++s)for(var u=a[s],h=1;h<u.length;h+=2){var f=u[h];if(!(f<s||e.isConstraint(s,f))){for(var l=u[h-1],c=-1,p=1;p<u.length;p+=2)if(u[p-1]===f){c=u[p];break}!(c<0)&&0>n(t[s],t[f],t[l],t[c])&&r.push(s,f)}}for(;r.length>0;){for(var f=r.pop(),s=r.pop(),l=-1,c=-1,u=a[s],d=1;d<u.length;d+=2){var v=u[d-1],g=u[d];v===f?c=g:g===f&&(l=v)}l<0||c<0||n(t[s],t[f],t[l],t[c])>=0||(e.flip(s,f),i(t,e,r,l,s,c),i(t,e,r,s,c,l),i(t,e,r,c,f,l),i(t,e,r,f,l,c))}}},5023:function(t,e,r){"use strict";var n,i=r(2478);function o(t,e,r,n,i,o,a){this.cells=t,this.neighbor=e,this.flags=n,this.constraint=r,this.active=i,this.next=o,this.boundary=a}function a(t,e){return t[0]-e[0]||t[1]-e[1]||t[2]-e[2]}t.exports=function(t,e,r){var n=function(t,e){for(var r=t.cells(),n=r.length,i=0;i<n;++i){var s=r[i],u=s[0],h=s[1],f=s[2];h<f?h<u&&(s[0]=h,s[1]=f,s[2]=u):f<u&&(s[0]=f,s[1]=u,s[2]=h)}r.sort(a);for(var l=Array(n),i=0;i<l.length;++i)l[i]=0;var c=[],p=[],d=Array(3*n),v=Array(3*n),g=null;e&&(g=[]);for(var m=new o(r,d,v,l,c,p,g),i=0;i<n;++i)for(var s=r[i],b=0;b<3;++b){var u=s[b],h=s[(b+1)%3],y=d[3*i+b]=m.locate(h,u,t.opposite(h,u)),x=v[3*i+b]=t.isConstraint(u,h);y<0&&(x?p.push(i):(c.push(i),l[i]=1),e&&g.push([h,u,-1]))}return m}(t,r);if(0===e)return r?n.cells.concat(n.boundary):n.cells;for(var i=1,s=n.active,u=n.next,h=n.flags,f=n.cells,l=n.constraint,c=n.neighbor;s.length>0||u.length>0;){for(;s.length>0;){var p=s.pop();if(h[p]!==-i){h[p]=i,f[p];for(var d=0;d<3;++d){var v=c[3*p+d];v>=0&&0===h[v]&&(l[3*p+d]?u.push(v):(s.push(v),h[v]=i))}}}var g=u;u=s,s=g,u.length=0,i=-i}var m=function(t,e,r){for(var n=0,i=0;i<t.length;++i)e[i]===r&&(t[n++]=t[i]);return t.length=n,t}(f,h,e);return r?m.concat(n.boundary):m},o.prototype.locate=(n=[0,0,0],function(t,e,r){var o=t,s=e,u=r;return(e<r?e<t&&(o=e,s=r,u=t):r<t&&(o=r,s=t,u=e),o<0)?-1:(n[0]=o,n[1]=s,n[2]=u,i.eq(this.cells,n,a))})},8902:function(t,e,r){"use strict";var n=r(2478),i=r(3250)[3];function o(t,e,r,n,i){this.a=t,this.b=e,this.idx=r,this.lowerIds=n,this.upperIds=i}function a(t,e,r,n){this.a=t,this.b=e,this.type=r,this.idx=n}function s(t,e){var r=t.a[0]-e.a[0]||t.a[1]-e.a[1]||t.type-e.type;return r||0!==t.type&&(r=i(t.a,t.b,e.b))?r:t.idx-e.idx}function u(t,e){return i(t.a,t.b,e)}function h(t,e){var r;return(r=t.a[0]<e.a[0]?i(t.a,t.b,e.a):i(e.b,e.a,t.a))?r:(r=e.b[0]<t.b[0]?i(t.a,t.b,e.b):i(e.b,e.a,t.b))||t.idx-e.idx}t.exports=function(t,e){for(var r=t.length,f=e.length,l=[],c=0;c<r;++c)l.push(new a(t[c],null,0,c));for(var c=0;c<f;++c){var p=e[c],d=t[p[0]],v=t[p[1]];d[0]<v[0]?l.push(new a(d,v,2,c),new a(v,d,1,c)):d[0]>v[0]&&l.push(new a(v,d,2,c),new a(d,v,1,c))}l.sort(s);for(var g=l[0].a[0]-(1+Math.abs(l[0].a[0]))*2220446049250313e-31,m=[new o([g,1],[g,0],-1,[],[],[],[])],b=[],c=0,y=l.length;c<y;++c){var x=l[c],_=x.type;0===_?function(t,e,r,o,a){for(var s=n.lt(e,o,u),h=n.gt(e,o,u),f=s;f<h;++f){for(var l=e[f],c=l.lowerIds,p=c.length;p>1&&i(r[c[p-2]],r[c[p-1]],o)>0;)t.push([c[p-1],c[p-2],a]),p-=1;c.length=p,c.push(a);for(var d=l.upperIds,p=d.length;p>1&&0>i(r[d[p-2]],r[d[p-1]],o);)t.push([d[p-2],d[p-1],a]),p-=1;d.length=p,d.push(a)}}(b,m,t,x.a,x.idx):2===_?function(t,e,r){var i=n.le(t,r,h),a=t[i],s=a.upperIds,u=s[s.length-1];a.upperIds=[u],t.splice(i+1,0,new o(r.a,r.b,r.idx,[u],s))}(m,0,x):function(t,e,r){var i=r.a;r.a=r.b,r.b=i;var o=n.eq(t,r,h),a=t[o];t[o-1].upperIds=a.upperIds,t.splice(o,1)}(m,0,x)}return b}},5542:function(t,e,r){"use strict";var n=r(2478);function i(t,e){this.stars=t,this.edges=e}t.exports=function(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=[];return new i(r,e)};var o=i.prototype;function a(t,e,r){for(var n=1,i=t.length;n<i;n+=2)if(t[n-1]===e&&t[n]===r){t[n-1]=t[i-2],t[n]=t[i-1],t.length=i-2;return}}o.isConstraint=function(){var t=[0,0];function e(t,e){return t[0]-e[0]||t[1]-e[1]}return function(r,i){return t[0]=Math.min(r,i),t[1]=Math.max(r,i),n.eq(this.edges,t,e)>=0}}(),o.removeTriangle=function(t,e,r){var n=this.stars;a(n[t],e,r),a(n[e],r,t),a(n[r],t,e)},o.addTriangle=function(t,e,r){var n=this.stars;n[t].push(e,r),n[e].push(r,t),n[r].push(t,e)},o.opposite=function(t,e){for(var r=this.stars[e],n=1,i=r.length;n<i;n+=2)if(r[n]===t)return r[n-1];return -1},o.flip=function(t,e){var r=this.opposite(t,e),n=this.opposite(e,t);this.removeTriangle(t,e,r),this.removeTriangle(e,t,n),this.addTriangle(t,n,r),this.addTriangle(e,r,n)},o.edges=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;o+=2)e.push([i[o],i[o+1]]);return e},o.cells=function(){for(var t=this.stars,e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;o+=2){var s=i[o],u=i[o+1];r<Math.min(s,u)&&e.push([r,s,u])}return e}},2419:function(t){"use strict";t.exports=function(t){for(var e=1,r=1;r<t.length;++r)for(var n=0;n<r;++n)if(t[r]<t[n])e=-e;else if(t[n]===t[r])return 0;return e}},3628:function(t,e,r){"use strict";var n=r(1338),i=r(727);function o(t,e){for(var r=0,n=t.length,i=0;i<n;++i)r+=t[i]*e[i];return r}function a(t){var e=t.length;if(0===e)return[];t[0].length;var r=n([t.length+1,t.length+1],1),a=n([t.length+1],1);r[e][e]=0;for(var s=0;s<e;++s){for(var u=0;u<=s;++u)r[u][s]=r[s][u]=2*o(t[s],t[u]);a[s]=o(t[s],t[s])}for(var h=i(r,a),f=0,l=h[e+1],s=0;s<l.length;++s)f+=l[s];for(var c=Array(e),s=0;s<e;++s){for(var l=h[s],p=0,u=0;u<l.length;++u)p+=l[u];c[s]=p/f}return c}function s(t){if(0===t.length)return[];for(var e=t[0].length,r=n([e]),i=a(t),o=0;o<t.length;++o)for(var s=0;s<e;++s)r[s]+=t[o][s]*i[o];return r}s.barycenetric=a,t.exports=s},6037:function(t,e,r){t.exports=function(t){for(var e=n(t),r=0,i=0;i<t.length;++i)for(var o=t[i],a=0;a<e.length;++a)r+=Math.pow(o[a]-e[a],2);return Math.sqrt(r/t.length)};var n=r(3628)},332:function(t,e,r){"use strict";t.exports=function(t,e,r){if(r){A=e;for(var n,c,v,g,b,y,x,_,w,E,M,A,T=Array(e.length),R=0;R<e.length;++R){var O=e[R];T[R]=[O[0],O[1],r[R]]}e=T}for(var S=(n=e,c=!!r,m(n,v=d(t,[],p(t)),c),!!v);g=e,b=!!r,y=function(t,e){for(var r=Array(e.length),n=0;n<e.length;++n){var i=e[n],o=t[i[0]],a=t[i[1]];r[n]=[f(Math.min(o[0],a[0]),-1/0),f(Math.min(o[1],a[1]),-1/0),f(Math.max(o[0],a[0]),1/0),f(Math.max(o[1],a[1]),1/0)]}return r}(t,g),x=[],i(y,function(e,r){var n=g[e],i=g[r];n[0]!==i[0]&&n[0]!==i[1]&&n[1]!==i[0]&&n[1]!==i[1]&&o(t[n[0]],t[n[1]],t[i[0]],t[i[1]])&&x.push([e,r])}),_=p(t),w=[],i(y,_,function(e,r){var n=g[e];if(n[0]!==r&&n[1]!==r){var i=t[r];o(t[n[0]],t[n[1]],i,i)&&w.push([e,r])}}),E=function(t,e,r,n,i){var o=t.map(function(t){return[a(t[0]),a(t[1])]});for(m=0;m<r.length;++m){var f=r[m];b=f[0];var c=f[1],p=e[b],d=e[c],v=l(h(t[p[0]]),h(t[p[1]]),h(t[d[0]]),h(t[d[1]]));if(v){var g=t.length;t.push([u(v[0]),u(v[1])]),o.push(v),n.push([b,g],[c,g])}}for(n.sort(function(t,e){if(t[0]!==e[0])return t[0]-e[0];var r=o[t[1]],n=o[e[1]];return s(r[0],n[0])||s(r[1],n[1])}),m=n.length-1;m>=0;--m){var m,b,y,x=n[m],_=e[b=x[0]],w=_[0],E=_[1],M=t[w],A=t[E];if(0>(M[0]-A[0]||M[1]-A[1])){var T=w;w=E,E=T}_[0]=w;var R=_[1]=x[1];for(i&&(y=_[2]);m>0&&n[m-1][0]===b;){var x=n[--m],O=x[1];i?e.push([R,O,y]):e.push([R,O]),R=O}i?e.push([R,E,y]):e.push([R,E])}return o}(t,g,x,w,b),m(g,M=d(t,E,_),b),M||x.length>0||w.length>0;)S=!0;if(r&&S){A.length=0,r.length=0;for(var R=0;R<e.length;++R){var O=e[R];A.push([O[0],O[1]]),r.push(O[2])}}return S};var n=r(1755),i=r(6867),o=r(1125),a=r(7842),s=r(1318),u=r(946),h=r(5838),f=r(1278),l=r(3637);function c(t){var e=u(t);return[f(e,-1/0),f(e,1/0)]}function p(t){for(var e=Array(t.length),r=0;r<t.length;++r){var n=t[r];e[r]=[f(n[0],-1/0),f(n[1],-1/0),f(n[0],1/0),f(n[1],1/0)]}return e}function d(t,e,r){for(var o=e.length,a=new n(o),s=[],u=0;u<e.length;++u){var h=e[u],l=c(h[0]),p=c(h[1]);s.push([f(l[0],-1/0),f(p[0],-1/0),f(l[1],1/0),f(p[1],1/0)])}i(s,function(t,e){a.link(t,e)});for(var d=!0,v=Array(o),u=0;u<o;++u){var g=a.find(u);g!==u&&(d=!1,t[g]=[Math.min(t[u][0],t[g][0]),Math.min(t[u][1],t[g][1])])}if(d)return null;for(var m=0,u=0;u<o;++u){var g=a.find(u);g===u?(v[u]=m,t[m++]=t[u]):v[u]=-1}t.length=m;for(var u=0;u<o;++u)v[u]<0&&(v[u]=v[a.find(u)]);return v}function v(t,e){return t[0]-e[0]||t[1]-e[1]}function g(t,e){return t[0]-e[0]||t[1]-e[1]||(t[2]<e[2]?-1:t[2]>e[2]?1:0)}function m(t,e,r){if(0!==t.length){if(e)for(var n=0;n<t.length;++n){var i=t[n],o=e[i[0]],a=e[i[1]];i[0]=Math.min(o,a),i[1]=Math.max(o,a)}else for(var n=0;n<t.length;++n){var i=t[n],o=i[0],a=i[1];i[0]=Math.min(o,a),i[1]=Math.max(o,a)}r?t.sort(g):t.sort(v);for(var s=1,n=1;n<t.length;++n){var u=t[n-1],h=t[n];(h[0]!==u[0]||h[1]!==u[1]||r&&h[2]!==u[2])&&(t[s++]=h)}t.length=s}}},3637:function(t,e,r){"use strict";t.exports=function(t,e,r,n){var o=s(e,t),l=s(n,r),c=f(o,l);if(0===a(c))return null;var p=h(o,i(f(l,s(t,r)),c));return u(t,p)};var n=r(6504),i=r(8697),o=r(5572),a=r(7721),s=r(544),u=r(2653),h=r(8987);function f(t,e){return o(n(t[0],e[1]),n(t[1],e[0]))}},3642:function(t){t.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},6729:function(t,e,r){"use strict";var n=r(3642),i=r(395);function o(t){return[t[0]/255,t[1]/255,t[2]/255,t[3]]}function a(t){for(var e,r="#",n=0;n<3;++n)r+=("00"+(e=(e=t[n]).toString(16))).substr(e.length);return r}function s(t){return"rgba("+t.join(",")+")"}t.exports=function(t){if(t||(t={}),p=(t.nshades||72)-1,c=t.format||"hex",(l=t.colormap)||(l="jet"),"string"==typeof l){if(!n[l=l.toLowerCase()])throw Error(l+" not a supported colorscale");f=n[l]}else if(Array.isArray(l))f=l.slice();else throw Error("unsupported colormap option",l);if(f.length>p+1)throw Error(l+" map requires nshades to be at least size "+f.length);v=Array.isArray(t.alpha)?2!==t.alpha.length?[1,1]:t.alpha.slice():"number"==typeof t.alpha?[t.alpha,t.alpha]:[1,1],e=f.map(function(t){return Math.round(t.index*p)}),v[0]=Math.min(Math.max(v[0],0),1),v[1]=Math.min(Math.max(v[1],0),1);var e,r,u,h,f,l,c,p,d,v,g,m=f.map(function(t,e){var r=f[e].index,n=f[e].rgb.slice();return 4===n.length&&n[3]>=0&&n[3]<=1||(n[3]=v[0]+(v[1]-v[0])*r),n}),d=[];for(g=0;g<e.length-1;++g){h=e[g+1]-e[g],r=m[g],u=m[g+1];for(var b=0;b<h;b++){var y=b/h;d.push([Math.round(i(r[0],u[0],y)),Math.round(i(r[1],u[1],y)),Math.round(i(r[2],u[2],y)),i(r[3],u[3],y)])}}return d.push(f[f.length-1].rgb.concat(v[1])),"hex"===c?d=d.map(a):"rgbaString"===c?d=d.map(s):"float"===c&&(d=d.map(o)),d}},3140:function(t,e,r){"use strict";t.exports=function(t,e,r,o){var a=n(e,r,o);if(0===a){var s=i(n(t,e,r)),h=i(n(t,e,o));if(s===h){if(0===s){var f=u(t,e,r);if(f===u(t,e,o));else if(f)return 1;else return -1}return 0}return 0===h?s>0?-1:u(t,e,o)?-1:1:0===s?h>0?1:u(t,e,r)?1:-1:i(h-s)}var l=n(t,e,r);return l>0?a>0&&n(t,e,o)>0?1:-1:l<0?a>0||n(t,e,o)>0?1:-1:n(t,e,o)>0?1:u(t,e,r)?1:-1};var n=r(3250),i=r(8572),o=r(9362),a=r(5382),s=r(8210);function u(t,e,r){var n=o(t[0],-e[0]),i=o(t[1],-e[1]),u=o(r[0],-e[0]),h=o(r[1],-e[1]),f=s(a(n,u),a(i,h));return f[f.length-1]>=0}},8572:function(t){"use strict";t.exports=function(t){return t<0?-1:t>0?1:0}},8507:function(t){t.exports=function(t,n){var i=t.length,o=t.length-n.length;if(o)return o;switch(i){case 0:return 0;case 1:return t[0]-n[0];case 2:return t[0]+t[1]-n[0]-n[1]||e(t[0],t[1])-e(n[0],n[1]);case 3:var a=t[0]+t[1],s=n[0]+n[1];if(o=a+t[2]-(s+n[2]))return o;var u=e(t[0],t[1]),h=e(n[0],n[1]);return e(u,t[2])-e(h,n[2])||e(u+t[2],a)-e(h+n[2],s);case 4:var f=t[0],l=t[1],c=t[2],p=t[3],d=n[0],v=n[1],g=n[2],m=n[3];return f+l+c+p-(d+v+g+m)||e(f,l,c,p)-e(d,v,g,m,d)||e(f+l,f+c,f+p,l+c,l+p,c+p)-e(d+v,d+g,d+m,v+g,v+m,g+m)||e(f+l+c,f+l+p,f+c+p,l+c+p)-e(d+v+g,d+v+m,d+g+m,v+g+m);default:for(var b=t.slice().sort(r),y=n.slice().sort(r),x=0;x<i;++x)if(o=b[x]-y[x])return o;return 0}};var e=Math.min;function r(t,e){return t-e}},3788:function(t,e,r){"use strict";var n=r(8507),i=r(2419);t.exports=function(t,e){return n(t,e)||i(t)-i(e)}},7352:function(t,e,r){"use strict";var n=r(5721),i=r(4750),o=r(2690);t.exports=function(t){var e=t.length;if(0===e)return[];if(1===e)return[[0]];var r=t[0].length;return 0===r?[]:1===r?n(t):2===r?i(t):o(t,r)}},5721:function(t){"use strict";t.exports=function(t){for(var e=0,r=0,n=1;n<t.length;++n)t[n][0]<t[e][0]&&(e=n),t[n][0]>t[r][0]&&(r=n);return e<r?[[e],[r]]:e>r?[[r],[e]]:[[e]]}},4750:function(t,e,r){"use strict";t.exports=function(t){var e=n(t),r=e.length;if(r<=2)return[];for(var i=Array(r),o=e[r-1],a=0;a<r;++a){var s=e[a];i[a]=[o,s],o=s}return i};var n=r(3090)},2690:function(t,e,r){"use strict";t.exports=function(t,e){try{return n(t,!0)}catch(o){var r=i(t);if(r.length<=e)return[];return function(t,e){for(var r=t.length,n=e.length,i=0;i<r;++i)for(var o=t[i],a=0;a<o.length;++a){var s=o[a];if(s<n)o[a]=e[s];else{s-=n;for(var u=0;u<n;++u)s>=e[u]&&(s+=1);o[a]=s}}return t}(n(function(t,e){for(var r=t.length,n=Array(r),i=0;i<e.length;++i)n[i]=t[e[i]];for(var o=e.length,i=0;i<r;++i)0>e.indexOf(i)&&(n[o++]=t[i]);return n}(t,r),!0),r)}};var n=r(8954),i=r(3952)},4769:function(t){"use strict";t.exports=function(t,e,r,n,i,o){var a=i-1,s=i*i,u=a*a,h=(1+2*i)*u,f=i*u,l=s*(3-2*i),c=s*a;if(t.length){o||(o=Array(t.length));for(var p=t.length-1;p>=0;--p)o[p]=h*t[p]+f*e[p]+l*r[p]+c*n[p];return o}return h*t+f*e+l*r+c*n},t.exports.derivative=function(t,e,r,n,i,o){var a=6*i*i-6*i,s=3*i*i-4*i+1,u=-6*i*i+6*i,h=3*i*i-2*i;if(t.length){o||(o=Array(t.length));for(var f=t.length-1;f>=0;--f)o[f]=a*t[f]+s*e[f]+u*r[f]+h*n[f];return o}return a*t+s*e+u*r[f]+h*n}},7642:function(t,e,r){"use strict";var n=r(8954),i=r(1682);function o(t,e){this.point=t,this.index=e}function a(t,e){for(var r=t.point,n=e.point,i=r.length,o=0;o<i;++o){var a=n[o]-r[o];if(a)return a}return 0}t.exports=function(t,e){var r=t.length;if(0===r)return[];var s=t[0].length;if(s<1)return[];if(1===s)return function(t,e,r){if(1===t)return r?[[-1,0]]:[];var n=e.map(function(t,e){return[t[0],e]});n.sort(function(t,e){return t[0]-e[0]});for(var i=Array(t-1),o=1;o<t;++o){var a=n[o-1],s=n[o];i[o-1]=[a[1],s[1]]}return r&&i.push([-1,i[0][1]],[i[t-1][1],-1]),i}(r,t,e);for(var u=Array(r),h=1,f=0;f<r;++f){for(var l=t[f],c=Array(s+1),p=0,d=0;d<s;++d){var v=l[d];c[d]=v,p+=v*v}c[s]=p,u[f]=new o(c,f),h=Math.max(p,h)}i(u,a);for(var g=Array((r=u.length)+s+1),m=Array(r+s+1),b=(s+1)*(s+1)*h,y=Array(s+1),f=0;f<=s;++f)y[f]=0;y[s]=b,g[0]=y.slice(),m[0]=-1;for(var f=0;f<=s;++f){var c=y.slice();c[f]=1,g[f+1]=c,m[f+1]=-1}for(var f=0;f<r;++f){var x=u[f];g[f+s+1]=x.point,m[f+s+1]=x.index}var _=n(g,!1);if(_=e?_.filter(function(t){for(var e=0,r=0;r<=s;++r){var n=m[t[r]];if(n<0&&++e>=2)return!1;t[r]=n}return!0}):_.filter(function(t){for(var e=0;e<=s;++e){var r=m[t[e]];if(r<0)return!1;t[e]=r}return!0}),1&s)for(var f=0;f<_.length;++f){var x=_[f],c=x[0];x[0]=x[1],x[1]=c}return _}},2361:function(t){var e=!1;if("undefined"!=typeof Float64Array){var r=new Float64Array(1),i=new Uint32Array(r.buffer);(r[0]=1,e=!0,1072693248===i[1])?(t.exports=function(t){return r[0]=t,[i[0],i[1]]},t.exports.pack=function(t,e){return i[0]=t,i[1]=e,r[0]},t.exports.lo=function(t){return r[0]=t,i[0]},t.exports.hi=function(t){return r[0]=t,i[1]}):1072693248===i[0]?(t.exports=function(t){return r[0]=t,[i[1],i[0]]},t.exports.pack=function(t,e){return i[1]=t,i[0]=e,r[0]},t.exports.lo=function(t){return r[0]=t,i[1]},t.exports.hi=function(t){return r[0]=t,i[0]}):e=!1}if(!e){var o=new n(8);t.exports=function(t){return o.writeDoubleLE(t,0,!0),[o.readUInt32LE(0,!0),o.readUInt32LE(4,!0)]},t.exports.pack=function(t,e){return o.writeUInt32LE(t,0,!0),o.writeUInt32LE(e,4,!0),o.readDoubleLE(0,!0)},t.exports.lo=function(t){return o.writeDoubleLE(t,0,!0),o.readUInt32LE(0,!0)},t.exports.hi=function(t){return o.writeDoubleLE(t,0,!0),o.readUInt32LE(4,!0)}}t.exports.sign=function(e){return t.exports.hi(e)>>>31},t.exports.exponent=function(e){return(t.exports.hi(e)<<1>>>21)-1023},t.exports.fraction=function(e){var r=t.exports.lo(e),n=t.exports.hi(e),i=1048575&n;return 2146435072&n&&(i+=1048576),[r,i]},t.exports.denormalized=function(e){return!(2146435072&t.exports.hi(e))}},1338:function(t){"use strict";t.exports=function(t,e){switch(void 0===e&&(e=0),typeof t){case"number":if(t>0)return function(t,e){var r,n;for(n=0,r=Array(t);n<t;++n)r[n]=e;return r}(0|t,e);break;case"object":if("number"==typeof t.length)return function t(e,r,n){var i=0|e[n];if(i<=0)return[];var o,a=Array(i);if(n===e.length-1)for(o=0;o<i;++o)a[o]=r;else for(o=0;o<i;++o)a[o]=t(e,r,n+1);return a}(t,e,0)}return[]}},3134:function(t,e,r){"use strict";t.exports=function(t,e){var r=t.length;if("number"!=typeof e){e=0;for(var i=0;i<r;++i){var o=t[i];e=Math.max(e,o[0],o[1])}e=(0|e)+1}for(var a=Array(e|=0),i=0;i<e;++i)a[i]=[];for(var i=0;i<r;++i){var o=t[i];a[o[0]].push(o[1]),a[o[1]].push(o[0])}for(var s=0;s<e;++s)n(a[s],function(t,e){return t-e});return a};var n=r(1682)},5033:function(t){"use strict";t.exports=function(t,e,r){var n=e||0,i=r||1;return[[t[12]+t[0],t[13]+t[1],t[14]+t[2],t[15]+t[3]],[t[12]-t[0],t[13]-t[1],t[14]-t[2],t[15]-t[3]],[t[12]+t[4],t[13]+t[5],t[14]+t[6],t[15]+t[7]],[t[12]-t[4],t[13]-t[5],t[14]-t[6],t[15]-t[7]],[n*t[12]+t[8],n*t[13]+t[9],n*t[14]+t[10],n*t[15]+t[11]],[i*t[12]-t[8],i*t[13]-t[9],i*t[14]-t[10],i*t[15]-t[11]]]}},9215:function(t,e,r){"use strict";t.exports=function(t,e,r){switch(arguments.length){case 0:return new a([0],[0],0);case 1:if("number"!=typeof t)return new a(t,u(t.length),0);var n=u(t);return new a(n,n,0);case 2:if("number"==typeof e){var n=u(t.length);return new a(t,n,+e)}r=0;case 3:if(t.length!==e.length)throw Error("state and velocity lengths must match");return new a(t,e,r)}};var n=r(4769),i=r(2478);function o(t,e,r){return Math.min(e,Math.max(t,r))}function a(t,e,r){this.dimension=t.length,this.bounds=[Array(this.dimension),Array(this.dimension)];for(var n=0;n<this.dimension;++n)this.bounds[0][n]=-1/0,this.bounds[1][n]=1/0;this._state=t.slice().reverse(),this._velocity=e.slice().reverse(),this._time=[r],this._scratch=[t.slice(),t.slice(),t.slice(),t.slice(),t.slice()]}var s=a.prototype;function u(t){for(var e=Array(t),r=0;r<t;++r)e[r]=0;return e}s.flush=function(t){var e=i.gt(this._time,t)-1;e<=0||(this._time.splice(0,e),this._state.splice(0,e*this.dimension),this._velocity.splice(0,e*this.dimension))},s.curve=function(t){var e=this._time,r=e.length,a=i.le(e,t),s=this._scratch[0],u=this._state,h=this._velocity,f=this.dimension,l=this.bounds;if(a<0)for(var c=f-1,p=0;p<f;++p,--c)s[p]=u[c];else if(a>=r-1)for(var c=u.length-1,d=t-e[r-1],p=0;p<f;++p,--c)s[p]=u[c]+d*h[c];else{for(var c=f*(a+1)-1,v=e[a],g=e[a+1]-v||1,m=this._scratch[1],b=this._scratch[2],y=this._scratch[3],x=this._scratch[4],_=!0,p=0;p<f;++p,--c)m[p]=u[c],y[p]=h[c]*g,b[p]=u[c+f],x[p]=h[c+f]*g,_=_&&m[p]===b[p]&&y[p]===x[p]&&0===y[p];if(_)for(var p=0;p<f;++p)s[p]=m[p];else n(m,y,b,x,(t-v)/g,s)}for(var w=l[0],E=l[1],p=0;p<f;++p)s[p]=o(w[p],E[p],s[p]);return s},s.dcurve=function(t){var e=this._time,r=e.length,o=i.le(e,t),a=this._scratch[0],s=this._state,u=this._velocity,h=this.dimension;if(o>=r-1){var f=s.length-1;e[r-1];for(var l=0;l<h;++l,--f)a[l]=u[f]}else{for(var f=h*(o+1)-1,c=e[o],p=e[o+1]-c||1,d=this._scratch[1],v=this._scratch[2],g=this._scratch[3],m=this._scratch[4],b=!0,l=0;l<h;++l,--f)d[l]=s[f],g[l]=u[f]*p,v[l]=s[f+h],m[l]=u[f+h]*p,b=b&&d[l]===v[l]&&g[l]===m[l]&&0===g[l];if(b)for(var l=0;l<h;++l)a[l]=0;else{n.derivative(d,g,v,m,(t-c)/p,a);for(var l=0;l<h;++l)a[l]/=p}}return a},s.lastT=function(){var t=this._time;return t[t.length-1]},s.stable=function(){for(var t=this._velocity,e=t.length,r=this.dimension-1;r>=0;--r)if(t[--e])return!1;return!0},s.jump=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e)&&arguments.length===r+1){var n=this._state,i=this._velocity,a=n.length-this.dimension,s=this.bounds,u=s[0],h=s[1];this._time.push(e,t);for(var f=0;f<2;++f)for(var l=0;l<r;++l)n.push(n[a++]),i.push(0);this._time.push(t);for(var l=r;l>0;--l)n.push(o(u[l-1],h[l-1],arguments[l])),i.push(0)}},s.push=function(t){var e=this.lastT(),r=this.dimension;if(!(t<e)&&arguments.length===r+1){var n=this._state,i=this._velocity,a=n.length-this.dimension,s=t-e,u=this.bounds,h=u[0],f=u[1],l=s>1e-6?1/s:0;this._time.push(t);for(var c=r;c>0;--c){var p=o(h[c-1],f[c-1],arguments[c]);n.push(p),i.push((p-n[a++])*l)}}},s.set=function(t){var e=this.dimension;if(!(t<this.lastT())&&arguments.length===e+1){var r=this._state,n=this._velocity,i=this.bounds,a=i[0],s=i[1];this._time.push(t);for(var u=e;u>0;--u)r.push(o(a[u-1],s[u-1],arguments[u])),n.push(0)}},s.move=function(t){var e=this.lastT(),r=this.dimension;if(!(t<=e)&&arguments.length===r+1){var n=this._state,i=this._velocity,a=n.length-this.dimension,s=this.bounds,u=s[0],h=s[1],f=t-e,l=f>1e-6?1/f:0;this._time.push(t);for(var c=r;c>0;--c){var p=arguments[c];n.push(o(u[c-1],h[c-1],n[a++]+p)),i.push(p*l)}}},s.idle=function(t){var e=this.lastT();if(!(t<e)){var r=this.dimension,n=this._state,i=this._velocity,a=n.length-r,s=this.bounds,u=s[0],h=s[1],f=t-e;this._time.push(t);for(var l=r-1;l>=0;--l)n.push(o(u[l],h[l],n[a]+f*i[a])),i.push(0),a+=1}}},3840:function(t){"use strict";function e(t,e,r,n,i,o){this._color=t,this.key=e,this.value=r,this.left=n,this.right=i,this._count=o}function r(t){return new e(t._color,t.key,t.value,t.left,t.right,t._count)}function n(t,r){return new e(t,r.key,r.value,r.left,r.right,r._count)}function i(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function o(t,e){this._compare=t,this.root=e}t.exports=function(t){return new o(t||f,null)};var a=o.prototype;function s(t,e){this.tree=t,this._stack=e}Object.defineProperty(a,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(a,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(a,"length",{get:function(){return this.root?this.root._count:0}}),a.insert=function(t,r){for(var a=this._compare,s=this.root,u=[],h=[];s;){var f=a(t,s.key);u.push(s),h.push(f),s=f<=0?s.left:s.right}u.push(new e(0,t,r,null,null,1));for(var l=u.length-2;l>=0;--l){var s=u[l];h[l]<=0?u[l]=new e(s._color,s.key,s.value,u[l+1],s.right,s._count+1):u[l]=new e(s._color,s.key,s.value,s.left,u[l+1],s._count+1)}for(var l=u.length-1;l>1;--l){var c=u[l-1],s=u[l];if(1===c._color||1===s._color)break;var p=u[l-2];if(p.left===c){if(c.left===s){var d=p.right;if(d&&0===d._color)c._color=1,p.right=n(1,d),p._color=0,l-=1;else{if(p._color=0,p.left=c.right,c._color=1,c.right=p,u[l-2]=c,u[l-1]=s,i(p),i(c),l>=3){var v=u[l-3];v.left===p?v.left=c:v.right=c}break}}else{var d=p.right;if(d&&0===d._color)c._color=1,p.right=n(1,d),p._color=0,l-=1;else{if(c.right=s.left,p._color=0,p.left=s.right,s._color=1,s.left=c,s.right=p,u[l-2]=s,u[l-1]=c,i(p),i(c),i(s),l>=3){var v=u[l-3];v.left===p?v.left=s:v.right=s}break}}}else if(c.right===s){var d=p.left;if(d&&0===d._color)c._color=1,p.left=n(1,d),p._color=0,l-=1;else{if(p._color=0,p.right=c.left,c._color=1,c.left=p,u[l-2]=c,u[l-1]=s,i(p),i(c),l>=3){var v=u[l-3];v.right===p?v.right=c:v.left=c}break}}else{var d=p.left;if(d&&0===d._color)c._color=1,p.left=n(1,d),p._color=0,l-=1;else{if(c.left=s.right,p._color=0,p.right=s.left,s._color=1,s.right=c,s.left=p,u[l-2]=s,u[l-1]=c,i(p),i(c),i(s),l>=3){var v=u[l-3];v.right===p?v.right=s:v.left=s}break}}}return u[0]._color=1,new o(a,u[0])},a.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return function t(e,r){if(r.left){var n=t(e,r.left);if(n)return n}var n=e(r.key,r.value);return n||(r.right?t(e,r.right):void 0)}(t,this.root);case 2:return function t(e,r,n,i){if(0>=r(e,i.key)){if(i.left){var o=t(e,r,n,i.left);if(o)return o}var o=n(i.key,i.value);if(o)return o}if(i.right)return t(e,r,n,i.right)}(e,this._compare,t,this.root);case 3:if(this._compare(e,r)>=0)return;return function t(e,r,n,i,o){var a,s=n(e,o.key),u=n(r,o.key);return s<=0&&(o.left&&(a=t(e,r,n,i,o.left))||u>0&&(a=i(o.key,o.value)))?a:u>0&&o.right?t(e,r,n,i,o.right):void 0}(e,r,this._compare,t,this.root)}},Object.defineProperty(a,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new s(this,t)}}),Object.defineProperty(a,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new s(this,t)}}),a.at=function(t){if(t<0)return new s(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new s(this,r);if(t-=1,e.right){if(t>=e.right._count)break;e=e.right}else break}return new s(this,[])},a.ge=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<=0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new s(this,n)},a.gt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o<0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new s(this,n)},a.lt=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>0&&(i=n.length),r=o<=0?r.left:r.right}return n.length=i,new s(this,n)},a.le=function(t){for(var e=this._compare,r=this.root,n=[],i=0;r;){var o=e(t,r.key);n.push(r),o>=0&&(i=n.length),r=o<0?r.left:r.right}return n.length=i,new s(this,n)},a.find=function(t){for(var e=this._compare,r=this.root,n=[];r;){var i=e(t,r.key);if(n.push(r),0===i)return new s(this,n);r=i<=0?r.left:r.right}return new s(this,[])},a.remove=function(t){var e=this.find(t);return e?e.remove():this},a.get=function(t){for(var e=this._compare,r=this.root;r;){var n=e(t,r.key);if(0===n)return r.value;r=n<=0?r.left:r.right}};var u=s.prototype;function h(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function f(t,e){return t<e?-1:t>e?1:0}Object.defineProperty(u,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(u,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),u.clone=function(){return new s(this.tree,this._stack.slice())},u.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var a=Array(t.length),s=t[t.length-1];a[a.length-1]=new e(s._color,s.key,s.value,s.left,s.right,s._count);for(var u=t.length-2;u>=0;--u){var s=t[u];s.left===t[u+1]?a[u]=new e(s._color,s.key,s.value,a[u+1],s.right,s._count):a[u]=new e(s._color,s.key,s.value,s.left,a[u+1],s._count)}if((s=a[a.length-1]).left&&s.right){var f=a.length;for(s=s.left;s.right;)a.push(s),s=s.right;var l=a[f-1];a.push(new e(s._color,l.key,l.value,s.left,s.right,s._count)),a[f-1].key=s.key,a[f-1].value=s.value;for(var u=a.length-2;u>=f;--u)s=a[u],a[u]=new e(s._color,s.key,s.value,s.left,a[u+1],s._count);a[f-1].left=a[f]}if(0===(s=a[a.length-1])._color){var c=a[a.length-2];c.left===s?c.left=null:c.right===s&&(c.right=null),a.pop();for(var u=0;u<a.length;++u)a[u]._count--}else if(s.left||s.right){s.left?h(s,s.left):s.right&&h(s,s.right),s._color=1;for(var u=0;u<a.length-1;++u)a[u]._count--}else{if(1===a.length)return new o(this.tree._compare,null);for(var u=0;u<a.length;++u)a[u]._count--;var p=a[a.length-2];(function(t){for(var e,o,a,s,u=t.length-1;u>=0;--u){if(e=t[u],0===u){e._color=1;return}if((o=t[u-1]).left===e){if((a=o.right).right&&0===a.right._color){if(s=(a=o.right=r(a)).right=r(a.right),o.right=a.left,a.left=o,a.right=s,a._color=o._color,e._color=1,o._color=1,s._color=1,i(o),i(a),u>1){var h=t[u-2];h.left===o?h.left=a:h.right=a}t[u-1]=a;return}if(a.left&&0===a.left._color){if(s=(a=o.right=r(a)).left=r(a.left),o.right=s.left,a.left=s.right,s.left=o,s.right=a,s._color=o._color,o._color=1,a._color=1,e._color=1,i(o),i(a),i(s),u>1){var h=t[u-2];h.left===o?h.left=s:h.right=s}t[u-1]=s;return}if(1===a._color){if(0===o._color){o._color=1,o.right=n(0,a);return}o.right=n(0,a);continue}if(a=r(a),o.right=a.left,a.left=o,a._color=o._color,o._color=0,i(o),i(a),u>1){var h=t[u-2];h.left===o?h.left=a:h.right=a}t[u-1]=a,t[u]=o,u+1<t.length?t[u+1]=e:t.push(e),u+=2}else{if((a=o.left).left&&0===a.left._color){if(s=(a=o.left=r(a)).left=r(a.left),o.left=a.right,a.right=o,a.left=s,a._color=o._color,e._color=1,o._color=1,s._color=1,i(o),i(a),u>1){var h=t[u-2];h.right===o?h.right=a:h.left=a}t[u-1]=a;return}if(a.right&&0===a.right._color){if(s=(a=o.left=r(a)).right=r(a.right),o.left=s.right,a.right=s.left,s.right=o,s.left=a,s._color=o._color,o._color=1,a._color=1,e._color=1,i(o),i(a),i(s),u>1){var h=t[u-2];h.right===o?h.right=s:h.left=s}t[u-1]=s;return}if(1===a._color){if(0===o._color){o._color=1,o.left=n(0,a);return}o.left=n(0,a);continue}if(a=r(a),o.left=a.right,a.right=o,a._color=o._color,o._color=0,i(o),i(a),u>1){var h=t[u-2];h.right===o?h.right=a:h.left=a}t[u-1]=a,t[u]=o,u+1<t.length?t[u+1]=e:t.push(e),u+=2}}})(a),p.left===s?p.left=null:p.right=null}return new o(this.tree._compare,a[0])},Object.defineProperty(u,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(u,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(u,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var n=e.length-2;n>=0;--n)e[n+1]===e[n].right&&(++t,e[n].left&&(t+=e[n].left._count));return t},enumerable:!0}),u.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();t.length>0&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(u,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].left===t[e])return!0;return!1}}),u.update=function(t){var r=this._stack;if(0===r.length)throw Error("Can't update empty node!");var n=Array(r.length),i=r[r.length-1];n[n.length-1]=new e(i._color,i.key,t,i.left,i.right,i._count);for(var a=r.length-2;a>=0;--a)(i=r[a]).left===r[a+1]?n[a]=new e(i._color,i.key,i.value,n[a+1],i.right,i._count):n[a]=new e(i._color,i.key,i.value,i.left,n[a+1],i._count);return new o(this.tree._compare,n[0])},u.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();t.length>0&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(u,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;e>0;--e)if(t[e-1].right===t[e])return!0;return!1}})},3837:function(t,e,r){"use strict";t.exports=function(t,e){var r=new p(t);return r.update(e),r};var n=r(4935),i=r(501),o=r(5304),a=r(6429),s=r(6444),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),h=ArrayBuffer,f=DataView;function l(t){return Array.isArray(t)||h.isView(t)&&!(t instanceof f)}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function p(t){this.gl=t,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickFontStyle=["normal","normal","normal"],this.tickFontWeight=["normal","normal","normal"],this.tickFontVariant=["normal","normal","normal"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["sans-serif","sans-serif","sans-serif"],this.labelFontStyle=["normal","normal","normal"],this.labelFontWeight=["normal","normal","normal"],this.labelFontVariant=["normal","normal","normal"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=o(t)}var d=p.prototype;function v(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}d.update=function(t){function e(e,r,n){if(n in t){var i,o=t[n],a=this[n];(e?l(o)&&l(o[0]):l(o))?this[n]=i=[r(o[0]),r(o[1]),r(o[2])]:this[n]=i=[r(o),r(o),r(o)];for(var s=0;s<3;++s)if(i[s]!==a[s])return!0}return!1}t=t||{};var r,o=e.bind(this,!1,Number),a=e.bind(this,!1,Boolean),u=e.bind(this,!1,String),h=e.bind(this,!0,function(t){if(l(t)){if(3===t.length)return[+t[0],+t[1],+t[2],1];if(4===t.length)return[+t[0],+t[1],+t[2],+t[3]]}return[0,0,0,1]}),f=!1,c=!1;if("bounds"in t)for(var p=t.bounds,d=0;d<2;++d)for(var v=0;v<3;++v)p[d][v]!==this.bounds[d][v]&&(c=!0),this.bounds[d][v]=p[d][v];if("ticks"in t){r=t.ticks,f=!0,this.autoTicks=!1;for(var d=0;d<3;++d)this.tickSpacing[d]=0}else o("tickSpacing")&&(this.autoTicks=!0,c=!0);if(this._firstInit&&("ticks"in t||"tickSpacing"in t||(this.autoTicks=!0),c=!0,f=!0,this._firstInit=!1),c&&this.autoTicks&&(r=s.create(this.bounds,this.tickSpacing),f=!0),f){for(var d=0;d<3;++d)r[d].sort(function(t,e){return t.x-e.x});s.equal(r,this.ticks)?f=!1:this.ticks=r}a("tickEnable"),u("tickFont")&&(f=!0),u("tickFontStyle")&&(f=!0),u("tickFontWeight")&&(f=!0),u("tickFontVariant")&&(f=!0),o("tickSize"),o("tickAngle"),o("tickPad"),h("tickColor");var g=u("labels");u("labelFont")&&(g=!0),u("labelFontStyle")&&(g=!0),u("labelFontWeight")&&(g=!0),u("labelFontVariant")&&(g=!0),a("labelEnable"),o("labelSize"),o("labelPad"),h("labelColor"),a("lineEnable"),a("lineMirror"),o("lineWidth"),h("lineColor"),a("lineTickEnable"),a("lineTickMirror"),o("lineTickLength"),o("lineTickWidth"),h("lineTickColor"),a("gridEnable"),o("gridWidth"),h("gridColor"),a("zeroEnable"),h("zeroLineColor"),o("zeroLineWidth"),a("backgroundEnable"),h("backgroundColor");var m=[{family:this.labelFont[0],style:this.labelFontStyle[0],weight:this.labelFontWeight[0],variant:this.labelFontVariant[0]},{family:this.labelFont[1],style:this.labelFontStyle[1],weight:this.labelFontWeight[1],variant:this.labelFontVariant[1]},{family:this.labelFont[2],style:this.labelFontStyle[2],weight:this.labelFontWeight[2],variant:this.labelFontVariant[2]}],b=[{family:this.tickFont[0],style:this.tickFontStyle[0],weight:this.tickFontWeight[0],variant:this.tickFontVariant[0]},{family:this.tickFont[1],style:this.tickFontStyle[1],weight:this.tickFontWeight[1],variant:this.tickFontVariant[1]},{family:this.tickFont[2],style:this.tickFontStyle[2],weight:this.tickFontWeight[2],variant:this.tickFontVariant[2]}];this._text?this._text&&(g||f)&&this._text.update(this.bounds,this.labels,m,this.ticks,b):this._text=n(this.gl,this.bounds,this.labels,m,this.ticks,b),this._lines&&f&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};var g=[new v,new v,new v],m=[0,0,0],b={model:u,view:u,projection:u,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(t){};var y=[0,0,0],x=[0,0,0],_=[0,0,0];d.draw=function(t){t=t||b;for(var e,r,n,i=this.gl,o=t.model||u,s=t.view||u,h=t.projection||u,f=this.bounds,l=t._ortho||!1,p=a(o,s,h,f,l),d=p.cubeEdges,v=p.axis,w=s[12],E=s[13],M=s[14],A=s[15],T=(l?2:1)*this.pixelRatio*(h[3]*w+h[7]*E+h[11]*M+h[15]*A)/i.drawingBufferHeight,R=0;R<3;++R)this.lastCubeProps.cubeEdges[R]=d[R],this.lastCubeProps.axis[R]=v[R];for(var R=0;R<3;++R)!function(t,e,r,n,i){for(var o=t.primalOffset,a=t.primalMinor,s=t.mirrorOffset,u=t.mirrorMinor,h=n[e],f=0;f<3;++f)if(e!==f){var l=o,c=s,p=a,d=u;h&1<<f&&(l=s,c=o,p=u,d=a),l[f]=r[0][f],c[f]=r[1][f],i[f]>0?(p[f]=-1,d[f]=0):(p[f]=0,d[f]=1)}}(g[R],R,this.bounds,d,v);for(var i=this.gl,R=0;R<3;++R)this.backgroundEnable[R]?m[R]=v[R]:m[R]=0;this._background.draw(o,s,h,f,m,this.backgroundColor),this._lines.bind(o,s,h,this);for(var R=0;R<3;++R){var O=[0,0,0];v[R]>0?O[R]=f[1][R]:O[R]=f[0][R];for(var S=0;S<2;++S){var k=(R+1+S)%3,C=(R+1+(1^S))%3;this.gridEnable[k]&&this._lines.drawGrid(k,C,this.bounds,O,this.gridColor[k],this.gridWidth[k]*this.pixelRatio)}for(var S=0;S<2;++S){var k=(R+1+S)%3,C=(R+1+(1^S))%3;this.zeroEnable[C]&&0>=Math.min(f[0][C],f[1][C])&&Math.max(f[0][C],f[1][C])>=0&&this._lines.drawZero(k,C,this.bounds,O,this.zeroLineColor[C],this.zeroLineWidth[C]*this.pixelRatio)}}for(var R=0;R<3;++R){this.lineEnable[R]&&this._lines.drawAxisLine(R,this.bounds,g[R].primalOffset,this.lineColor[R],this.lineWidth[R]*this.pixelRatio),this.lineMirror[R]&&this._lines.drawAxisLine(R,this.bounds,g[R].mirrorOffset,this.lineColor[R],this.lineWidth[R]*this.pixelRatio);for(var L=c(y,g[R].primalMinor),I=c(x,g[R].mirrorMinor),P=this.lineTickLength,S=0;S<3;++S){var B=T/o[5*S];L[S]*=P[S]*B,I[S]*=P[S]*B}this.lineTickEnable[R]&&this._lines.drawAxisTicks(R,g[R].primalOffset,L,this.lineTickColor[R],this.lineTickWidth[R]*this.pixelRatio),this.lineTickMirror[R]&&this._lines.drawAxisTicks(R,g[R].mirrorOffset,I,this.lineTickColor[R],this.lineTickWidth[R]*this.pixelRatio)}function F(t){(n=[0,0,0])[t]=1}this._lines.unbind(),this._text.bind(o,s,h,this.pixelRatio);for(var R=0;R<3;++R){for(var N=g[R].primalMinor,D=g[R].mirrorMinor,U=c(_,g[R].primalOffset),S=0;S<3;++S)this.lineTickEnable[R]&&(U[S]+=T*N[S]*Math.max(this.lineTickLength[S],0)/o[5*S]);var z=[0,0,0];if(z[R]=1,this.tickEnable[R]){-3600===this.tickAngle[R]?(this.tickAngle[R]=0,this.tickAlign[R]="auto"):this.tickAlign[R]=-1,r=1,"auto"===(e=[this.tickAlign[R],.5,r])[0]?e[0]=0:e[0]=parseInt(""+e[0]),n=[0,0,0],function(t,e,r){var n=(t+1)%3,i=(t+2)%3,o=e[n],a=e[i],s=r[n],u=r[i];if(o>0&&u>0||o>0&&u<0){F(n);return}o<0&&u>0?F(n):o<0&&u<0?F(n):a>0&&s>0?F(i):a>0&&s<0?F(i):a<0&&s>0?F(i):a<0&&s<0&&F(i)}(R,N,D);for(var S=0;S<3;++S)U[S]+=T*N[S]*this.tickPad[S]/o[5*S];this._text.drawTicks(R,this.tickSize[R],this.tickAngle[R],U,this.tickColor[R],z,n,e)}if(this.labelEnable[R]){r=0,n=[0,0,0],this.labels[R].length>4&&(F(R),r=1),"auto"===(e=[this.labelAlign[R],.5,r])[0]?e[0]=0:e[0]=parseInt(""+e[0]);for(var S=0;S<3;++S)U[S]+=T*N[S]*this.labelPad[S]/o[5*S];U[R]+=.5*(f[0][R]+f[1][R]),this._text.drawLabel(R,this.labelSize[R],this.labelAngle[R],U,this.labelColor[R],[0,0,0],n,e)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},5304:function(t,e,r){"use strict";t.exports=function(t){for(var e=[],r=[],s=0,u=0;u<3;++u)for(var h=(u+1)%3,f=(u+2)%3,l=[0,0,0],c=[0,0,0],p=-1;p<=1;p+=2){r.push(s,s+2,s+1,s+1,s+2,s+3),l[u]=p,c[u]=p;for(var d=-1;d<=1;d+=2){l[h]=d;for(var v=-1;v<=1;v+=2)l[f]=v,e.push(l[0],l[1],l[2],c[0],c[1],c[2]),s+=1}var g=h;h=f,f=g}var m=n(t,new Float32Array(e)),b=n(t,new Uint16Array(r),t.ELEMENT_ARRAY_BUFFER),y=i(t,[{buffer:m,type:t.FLOAT,size:3,offset:0,stride:24},{buffer:m,type:t.FLOAT,size:3,offset:12,stride:24}],b),x=o(t);return x.attributes.position.location=0,x.attributes.normal.location=1,new a(t,m,y,x)};var n=r(2762),i=r(8116),o=r(1879).bg;function a(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n}var s=a.prototype;s.draw=function(t,e,r,n,i,o){for(var a=!1,s=0;s<3;++s)a=a||i[s];if(a){var u=this.gl;u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:t,view:e,projection:r,bounds:n,enable:i,colors:o},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),u.disable(u.POLYGON_OFFSET_FILL)}},s.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6429:function(t,e,r){"use strict";t.exports=function(t,e,r,g,m){i(s,e,t),i(s,r,s);for(var b=0,y=0;y<2;++y){f[2]=g[y][2];for(var x=0;x<2;++x){f[1]=g[x][1];for(var _=0;_<2;++_)f[0]=g[_][0],function(t,e,r){for(var n=0;n<4;++n){t[n]=r[12+n];for(var i=0;i<3;++i)t[n]+=e[i]*r[4*i+n]}}(u[b],f,s),b+=1}}for(var w=-1,y=0;y<8;++y){for(var E=u[y][3],M=0;M<3;++M)h[y][M]=u[y][M]/E;m&&(h[y][2]*=-1),E<0&&(w<0?w=y:h[y][2]<h[w][2]&&(w=y))}if(w<0){w=0;for(var A=0;A<3;++A){for(var T=(A+2)%3,R=(A+1)%3,O=-1,S=-1,k=0;k<2;++k){var C=k<<A,L=C+(k<<T)+(1-k<<R),I=C+(1-k<<T)+(k<<R);0>a(h[C],h[L],h[I],l)||(k?O=1:S=1)}if(O<0||S<0){S>O&&(w|=1<<A);continue}for(var k=0;k<2;++k){var C=k<<A,L=C+(k<<T)+(1-k<<R),I=C+(1-k<<T)+(k<<R),P=function(t){for(var e=0;e<c.length;++e)if((t=o.positive(t,c[e])).length<3)return 0;for(var r=t[0],n=r[0]/r[3],i=r[1]/r[3],a=0,e=1;e+1<t.length;++e){var s=t[e],u=t[e+1],h=s[0]/s[3],f=s[1]/s[3],l=u[0]/u[3],p=u[1]/u[3],d=f-i;a+=Math.abs((h-n)*(p-i)-d*(l-n))}return a}([u[C],u[L],u[I],u[C+(1<<T)+(1<<R)]]);k?O=P:S=P}if(S>O){w|=1<<A;continue}}}for(var B=7^w,F=-1,y=0;y<8;++y)y!==w&&y!==B&&(F<0?F=y:h[F][1]>h[y][1]&&(F=y));for(var N=-1,y=0;y<3;++y){var D=F^1<<y;if(D!==w&&D!==B){N<0&&(N=D);var R=h[D];R[0]<h[N][0]&&(N=D)}}for(var U=-1,y=0;y<3;++y){var D=F^1<<y;if(D!==w&&D!==B&&D!==N){U<0&&(U=D);var R=h[D];R[0]>h[U][0]&&(U=D)}}p[0]=p[1]=p[2]=0,p[n.log2(N^F)]=F&N,p[n.log2(F^U)]=F&U;var z=7^U;z===w||z===B?(z=7^N,p[n.log2(U^z)]=z&U):p[n.log2(N^z)]=z&N;for(var j=w,A=0;A<3;++A)j&1<<A?d[A]=-1:d[A]=1;return v};var n=r(8828),i=r(6760),o=r(5202),a=r(3250),s=Array(16),u=Array(8),h=Array(8),f=[,,,],l=[0,0,0];!function(){for(var t=0;t<8;++t)u[t]=[1,1,1,1],h[t]=[1,1,1]}();var c=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],p=[1,1,1],d=[0,0,0],v={cubeEdges:p,axis:d}},501:function(t,e,r){"use strict";t.exports=function(t,e,r){var a=[],s=[0,0,0],u=[0,0,0],h=[0,0,0],f=[0,0,0];a.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var l=0;l<3;++l){for(var c=a.length/3|0,d=0;d<r[l].length;++d){var v=+r[l][d].x;a.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var g=a.length/3|0;s[l]=c,u[l]=g-c;for(var c=a.length/3|0,m=0;m<r[l].length;++m){var v=+r[l][m].x;a.push(v,0,1,v,1,1,v,0,-1,v,0,-1,v,1,1,v,1,-1)}var g=a.length/3|0;h[l]=c,f[l]=g-c}var b=n(t,new Float32Array(a)),y=i(t,[{buffer:b,type:t.FLOAT,size:3,stride:0,offset:0}]),x=o(t);return x.attributes.position.location=0,new p(t,b,y,x,u,s,f,h)};var n=r(2762),i=r(8116),o=r(1879).n,a=[0,0,0],s=[0,0,0],u=[0,0,0],h=[0,0,0],f=[1,1];function l(t){return t[0]=t[1]=t[2]=0,t}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function p(t,e,r,n,i,o,a,s){this.gl=t,this.vertBuffer=e,this.vao=r,this.shader=n,this.tickCount=i,this.tickOffset=o,this.gridCount=a,this.gridOffset=s}var d=p.prototype;d.bind=function(t,e,r){this.shader.bind(),this.shader.uniforms.model=t,this.shader.uniforms.view=e,this.shader.uniforms.projection=r,f[0]=this.gl.drawingBufferWidth,f[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=f,this.vao.bind()},d.unbind=function(){this.vao.unbind()},d.drawAxisLine=function(t,e,r,n,i){var o=l(s);this.shader.uniforms.majorAxis=s,o[t]=e[1][t]-e[0][t],this.shader.uniforms.minorAxis=o;var a=c(h,r);a[t]+=e[0][t],this.shader.uniforms.offset=a,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=n;var f=l(u);f[(t+2)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6);var f=l(u);f[(t+1)%3]=1,this.shader.uniforms.screenAxis=f,this.vao.draw(this.gl.TRIANGLES,6)},d.drawAxisTicks=function(t,e,r,n,i){if(this.tickCount[t]){var o=l(a);o[t]=1,this.shader.uniforms.majorAxis=o,this.shader.uniforms.offset=e,this.shader.uniforms.minorAxis=r,this.shader.uniforms.color=n,this.shader.uniforms.lineWidth=i;var s=l(u);s[t]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t])}},d.drawGrid=function(t,e,r,n,i,o){if(this.gridCount[t]){var f=l(s);f[e]=r[1][e]-r[0][e],this.shader.uniforms.minorAxis=f;var p=c(h,n);p[e]+=r[0][e],this.shader.uniforms.offset=p;var d=l(a);d[t]=1,this.shader.uniforms.majorAxis=d;var v=l(u);v[t]=1,this.shader.uniforms.screenAxis=v,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[t],this.gridOffset[t])}},d.drawZero=function(t,e,r,n,i,o){var a=l(s);this.shader.uniforms.majorAxis=a,a[t]=r[1][t]-r[0][t],this.shader.uniforms.minorAxis=a;var f=c(h,n);f[t]+=r[0][t],this.shader.uniforms.offset=f;var p=l(u);p[e]=1,this.shader.uniforms.screenAxis=p,this.shader.uniforms.lineWidth=o,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},d.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},1879:function(t,e,r){"use strict";var n=r(3236),i=r(9405),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);e.n=function(t){return i(t,o,a,null,[{name:"position",type:"vec3"}])};var s=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * (view * (model * vec4(p, 1.0)));\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}\n"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);e.Q=function(t){return i(t,s,u,null,[{name:"position",type:"vec3"}])};var h=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * (view * (model * vec4(nPosition, 1.0)));\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}\n"]),f=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);e.bg=function(t){return i(t,h,f,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},4935:function(t,e,r){"use strict";t.exports=function(t,e,r,i,a,u){var h=n(t),l=o(t,[{buffer:h,size:3}]),c=s(t);c.attributes.position.location=0;var p=new f(t,c,h,l);return p.update(e,r,i,a,u),p};var n=r(2762),o=r(8116),a=r(4359),s=r(1879).Q,u=window||i.global||{},h=u.__TEXT_CACHE||{};function f(t,e,r,n){this.gl=t,this.shader=e,this.buffer=r,this.vao=n,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}u.__TEXT_CACHE={};var l=f.prototype,c=[0,0];l.bind=function(t,e,r,n){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=t,i.view=e,i.projection=r,i.pixelScale=n,c[0]=this.gl.drawingBufferWidth,c[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=c},l.unbind=function(){this.vao.unbind()},l.update=function(t,e,r,n,i){var o=[];function s(t,e,r,n,i,s){var u=[r.style,r.weight,r.variant,r.family].join("_"),f=h[u];f||(f=h[u]={});var l=f[e];l||(l=f[e]=function(t,e){try{return a(t,e)}catch(e){return console.warn('error vectorizing text:"'+t+'" error:',e),{cells:[],positions:[]}}}(e,{triangles:!0,font:r.family,fontStyle:r.style,fontWeight:r.weight,fontVariant:r.variant,textAlign:"center",textBaseline:"middle",lineSpacing:i,styletags:s}));for(var c=(n||12)/12,p=l.positions,d=l.cells,v=0,g=d.length;v<g;++v)for(var m=d[v],b=2;b>=0;--b){var y=p[m[b]];o.push(c*y[0],-c*y[1],t)}}for(var u=[0,0,0],f=[0,0,0],l=[0,0,0],c=[0,0,0],p={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},d=0;d<3;++d){l[d]=o.length/3|0,s(.5*(t[0][d]+t[1][d]),e[d],r[d],12,1.25,p),c[d]=(o.length/3|0)-l[d],u[d]=o.length/3|0;for(var v=0;v<n[d].length;++v)if(n[d][v].text){var g={family:n[d][v].font||i[d].family,style:i[d].fontStyle||i[d].style,weight:i[d].fontWeight||i[d].weight,variant:i[d].fontVariant||i[d].variant};s(n[d][v].x,n[d][v].text,g,n[d][v].fontSize||12,1.25,p)}f[d]=(o.length/3|0)-u[d]}this.buffer.update(o),this.tickOffset=u,this.tickCount=f,this.labelOffset=l,this.labelCount=c},l.drawTicks=function(t,e,r,n,i,o,a,s){this.tickCount[t]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.tickCount[t],this.tickOffset[t]))},l.drawLabel=function(t,e,r,n,i,o,a,s){this.labelCount[t]&&(this.shader.uniforms.axis=o,this.shader.uniforms.color=i,this.shader.uniforms.angle=r,this.shader.uniforms.scale=e,this.shader.uniforms.offset=n,this.shader.uniforms.alignDir=a,this.shader.uniforms.alignOpt=s,this.vao.draw(this.gl.TRIANGLES,this.labelCount[t],this.labelOffset[t]))},l.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}},6444:function(t,e){"use strict";function r(t,e){var r=t+"",n=r.indexOf("."),i=0;n>=0&&(i=r.length-n-1);var o=Math.pow(10,i),a=Math.round(t*e*o),s=a+"";if(s.indexOf("e")>=0)return s;var u=a/o,h=a%o;a<0?(u=0|-Math.ceil(u),h=0|-h):(u=0|Math.floor(u),h|=0);var f=""+u;if(a<0&&(f="-"+f),!i)return f;for(var l=""+h;l.length<i;)l="0"+l;return f+"."+l}e.create=function(t,e){for(var n=[],i=0;i<3;++i){var o=[];t[0][i],t[1][i];for(var a=0;a*e[i]<=t[1][i];++a)o.push({x:a*e[i],text:r(e[i],a)});for(var a=-1;a*e[i]>=t[0][i];--a)o.push({x:a*e[i],text:r(e[i],a)});n.push(o)}return n},e.equal=function(t,e){for(var r=0;r<3;++r){if(t[r].length!==e[r].length)return!1;for(var n=0;n<t[r].length;++n){var i=t[r][n],o=e[r][n];if(i.x!==o.x||i.text!==o.text||i.font!==o.font||i.fontColor!==o.fontColor||i.fontSize!==o.fontSize||i.dx!==o.dx||i.dy!==o.dy)return!1}}return!0}},5445:function(t,e,r){"use strict";t.exports=function(t,e,r,l,g){var m=e.model||h,b=e.view||h,y=e.projection||h,x=e._ortho||!1,_=t.bounds,g=g||o(m,b,y,_,x),w=g.axis;a(f,b,m),a(f,y,f);for(var E=0;E<3;++E)d[E].lo=1/0,d[E].hi=-1/0,d[E].pixelsPerDataUnit=1/0;var M=n(s(f,f));s(f,f);for(var A=0;A<3;++A){var T=(A+1)%3,R=(A+2)%3;r:for(var E=0;E<2;++E){var O=[];if(w[A]<0!=!!E){v[A]=_[E][A];for(var S=0;S<2;++S){v[T]=_[S^E][T];for(var k=0;k<2;++k)v[R]=_[k^S^E][R],O.push(v.slice())}for(var C=x?5:4,S=C;S===C;++S){if(0===O.length)continue r;O=i.positive(O,M[S])}for(var S=0;S<O.length;++S)for(var R=O[S],L=function(t,e,r,n,i){for(var o=0;o<3;++o){for(var a=0;a<3;++a)p[a]=c[a]=r[a];p[3]=c[3]=1,p[o]+=1,u(p,p,e),p[3]<0&&(t[o]=1/0),c[o]-=1,u(c,c,e),c[3]<0&&(t[o]=1/0);var s=(c[0]/c[3]-p[0]/p[3])*n,h=(c[1]/c[3]-p[1]/p[3])*i;t[o]=.25*Math.sqrt(s*s+h*h)}return t}(v,f,R,r,l),k=0;k<3;++k)d[k].lo=Math.min(d[k].lo,R[k]),d[k].hi=Math.max(d[k].hi,R[k]),k!==A&&(d[k].pixelsPerDataUnit=Math.min(d[k].pixelsPerDataUnit,Math.abs(L[k])))}}}return d};var n=r(5033),i=r(5202),o=r(6429),a=r(6760),s=r(5665),u=r(5352),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),f=new Float32Array(16);function l(t,e,r){this.lo=t,this.hi=e,this.pixelsPerDataUnit=r}var c=[0,0,0,1],p=[0,0,0,1],d=[new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0),new l(1/0,-1/0,1/0)],v=[0,0,0]},2762:function(t,e,r){"use strict";var n=r(1888),i=r(5298),o=r(9618),a=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function s(t,e,r,n,i){this.gl=t,this.type=e,this.handle=r,this.length=n,this.usage=i}var u=s.prototype;function h(t,e,r,n,i,o){var a=i.length*i.BYTES_PER_ELEMENT;if(o<0)return t.bufferData(e,i,n),a;if(a+o>r)throw Error("gl-buffer: If resizing buffer, must not specify offset");return t.bufferSubData(e,o,i),r}function f(t,e){for(var r=n.malloc(t.length,e),i=t.length,o=0;o<i;++o)r[o]=t[o];return r}u.bind=function(){this.gl.bindBuffer(this.type,this.handle)},u.unbind=function(){this.gl.bindBuffer(this.type,null)},u.dispose=function(){this.gl.deleteBuffer(this.handle)},u.update=function(t,e){if("number"!=typeof e&&(e=-1),this.bind(),"object"==typeof t&&void 0!==t.shape){var r,s=t.dtype;if(0>a.indexOf(s)&&(s="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(s=gl.getExtension("OES_element_index_uint")&&"uint16"!==s?"uint32":"uint16"),s===t.dtype&&function(t,e){for(var r=1,n=e.length-1;n>=0;--n){if(e[n]!==r)return!1;r*=t[n]}return!0}(t.shape,t.stride))0===t.offset&&t.data.length===t.shape[0]?this.length=h(this.gl,this.type,this.length,this.usage,t.data,e):this.length=h(this.gl,this.type,this.length,this.usage,t.data.subarray(t.offset,t.shape[0]),e);else{var u=n.malloc(t.size,s),l=o(u,t.shape);i.assign(l,t),e<0?this.length=h(this.gl,this.type,this.length,this.usage,u,e):this.length=h(this.gl,this.type,this.length,this.usage,u.subarray(0,t.size),e),n.free(u)}}else if(Array.isArray(t))r=this.type===this.gl.ELEMENT_ARRAY_BUFFER?f(t,"uint16"):f(t,"float32"),e<0?this.length=h(this.gl,this.type,this.length,this.usage,r,e):this.length=h(this.gl,this.type,this.length,this.usage,r.subarray(0,t.length),e),n.free(r);else if("object"==typeof t&&"number"==typeof t.length)this.length=h(this.gl,this.type,this.length,this.usage,t,e);else if("number"==typeof t||void 0===t){if(e>=0)throw Error("gl-buffer: Cannot specify offset when resizing buffer");(t|=0)<=0&&(t=1),this.gl.bufferData(this.type,0|t,this.usage),this.length=t}else throw Error("gl-buffer: Invalid data type")},t.exports=function(t,e,r,n){if(r=r||t.ARRAY_BUFFER,n=n||t.DYNAMIC_DRAW,r!==t.ARRAY_BUFFER&&r!==t.ELEMENT_ARRAY_BUFFER)throw Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(n!==t.DYNAMIC_DRAW&&n!==t.STATIC_DRAW&&n!==t.STREAM_DRAW)throw Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=t.createBuffer(),o=new s(t,r,i,0,n);return o.update(e),o}},6405:function(t,e,r){"use strict";var n=r(2931);t.exports=function(t,e){var r=t.positions,i=t.vectors,o={positions:[],vertexIntensity:[],vertexIntensityBounds:t.vertexIntensityBounds,vectors:[],cells:[],coneOffset:t.coneOffset,colormap:t.colormap};if(0===t.positions.length)return e&&(e[0]=[0,0,0],e[1]=[0,0,0]),o;for(var a=0,s=1/0,u=-1/0,h=1/0,f=-1/0,l=1/0,c=-1/0,p=null,d=null,v=[],g=1/0,m=!1,b="raw"===t.coneSizemode,y=0;y<r.length;y++){var x=r[y];s=Math.min(x[0],s),u=Math.max(x[0],u),h=Math.min(x[1],h),f=Math.max(x[1],f),l=Math.min(x[2],l),c=Math.max(x[2],c);var _=i[y];if(n.length(_)>a&&(a=n.length(_)),y&&!b){var w=2*n.distance(p,x)/(n.length(d)+n.length(_));w?(g=Math.min(g,w),m=!1):m=!0}m||(p=x,d=_),v.push(_)}var E=[s,h,l],M=[u,f,c];e&&(e[0]=E,e[1]=M),0===a&&(a=1);var A=1/a;isFinite(g)||(g=1),o.vectorScale=g;var T=t.coneSize||(b?1:.5);t.absoluteConeSize&&(T=t.absoluteConeSize*A),o.coneScale=T;for(var y=0,R=0;y<r.length;y++)for(var x=r[y],O=x[0],S=x[1],k=x[2],C=v[y],L=n.length(C)*A,I=0;I<8;I++){o.positions.push([O,S,k,R++]),o.positions.push([O,S,k,R++]),o.positions.push([O,S,k,R++]),o.positions.push([O,S,k,R++]),o.positions.push([O,S,k,R++]),o.positions.push([O,S,k,R++]),o.vectors.push(C),o.vectors.push(C),o.vectors.push(C),o.vectors.push(C),o.vectors.push(C),o.vectors.push(C),o.vertexIntensity.push(L,L,L),o.vertexIntensity.push(L,L,L);var P=o.positions.length;o.cells.push([P-6,P-5,P-4],[P-3,P-2,P-1])}return o};var i=r(614);t.exports.createMesh=r(9060),t.exports.createConeMesh=function(e,r){return t.exports.createMesh(e,r,{shaders:i,traceType:"cone"})}},9060:function(t,e,r){"use strict";var n=r(9405),i=r(2762),o=r(8116),a=r(7766),s=r(6760),u=r(7608),h=r(9618),f=r(6729),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function c(t,e,r,n,i,o,a,s,u,h,f){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.pickShader=n,this.trianglePositions=i,this.triangleVectors=o,this.triangleColors=s,this.triangleUVs=u,this.triangleIds=a,this.triangleVAO=h,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=f,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=l,this._view=l,this._projection=l,this._resolution=[1,1]}var p=c.prototype;p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(t){this.pickId=t},p.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"lightPosition"in t&&(this.lightPosition=t.lightPosition),"opacity"in t&&(this.opacity=t.opacity),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),void 0!==t.tubeScale&&(this.tubeScale=t.tubeScale),void 0!==t.vectorScale&&(this.vectorScale=t.vectorScale),void 0!==t.coneScale&&(this.coneScale=t.coneScale),void 0!==t.coneOffset&&(this.coneOffset=t.coneOffset),t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t){for(var e=f({colormap:t,nshades:256,format:"rgba"}),r=new Uint8Array(1024),n=0;n<256;++n){for(var i=e[n],o=0;o<3;++o)r[4*n+o]=i[o];r[4*n+3]=255*i[3]}return h(r,[256,256,4],[4,0,1])}(t.colormap)),this.texture.generateMipmap());var r=t.cells,n=t.positions,i=t.vectors;if(n&&r&&i){var o=[],a=[],s=[],u=[],l=[];this.cells=r,this.positions=n,this.vectors=i;var c=t.meshColor||[1,1,1,1],p=t.vertexIntensity,d=1/0,v=-1/0;if(p){if(t.vertexIntensityBounds)d=+t.vertexIntensityBounds[0],v=+t.vertexIntensityBounds[1];else for(var g=0;g<p.length;++g){var m=p[g];d=Math.min(d,m),v=Math.max(v,m)}}else for(var g=0;g<n.length;++g){var m=n[g][2];d=Math.min(d,m),v=Math.max(v,m)}p?this.intensity=p:this.intensity=function(t){for(var e=t.length,r=Array(e),n=0;n<e;++n)r[n]=t[n][2];return r}(n),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var g=0;g<n.length;++g)for(var b=n[g],y=0;y<3;++y)!isNaN(b[y])&&isFinite(b[y])&&(this.bounds[0][y]=Math.min(this.bounds[0][y],b[y]),this.bounds[1][y]=Math.max(this.bounds[1][y],b[y]));var x=0;n:for(var g=0;g<r.length;++g){var _=r[g];if(3===_.length){for(var y=0;y<3;++y)for(var w=_[y],b=n[w],E=0;E<3;++E)if(isNaN(b[E])||!isFinite(b[E]))continue n;for(var y=0;y<3;++y){var M,w=_[2-y],b=n[w];o.push(b[0],b[1],b[2],b[3]);var A=i[w];a.push(A[0],A[1],A[2],A[3]||0),3===c.length?s.push(c[0],c[1],c[2],1):s.push(c[0],c[1],c[2],c[3]),M=p?[(p[w]-d)/(v-d),0]:[(b[2]-d)/(v-d),0],u.push(M[0],M[1]),l.push(g)}x+=1}}this.triangleCount=x,this.trianglePositions.update(o),this.triangleVectors.update(a),this.triangleColors.update(s),this.triangleUVs.update(u),this.triangleIds.update(new Uint32Array(l))}},p.drawTransparent=p.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||l,n=t.view||l,i=t.projection||l,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);var h={model:r,view:n,projection:i,inverseModel:l.slice(),clipBounds:o,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};h.inverseModel=u(h.inverseModel,h.model),e.disable(e.CULL_FACE),this.texture.bind(0);var f=Array(16);s(f,h.view,h.model),s(f,h.projection,f),u(f,f);for(var a=0;a<3;++a)h.eyePosition[a]=f[12+a]/f[15];for(var c=f[15],a=0;a<3;++a)c+=this.lightPosition[a]*f[4*a+3];for(var a=0;a<3;++a){for(var p=f[12+a],d=0;d<3;++d)p+=f[4*d+a]*this.lightPosition[d];h.lightPosition[a]=p/c}if(this.triangleCount>0){var v=this.triShader;v.bind(),v.uniforms=h,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},p.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||l,n=t.view||l,i=t.projection||l,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s={model:r,view:n,projection:i,clipBounds:o,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},u=this.pickShader;u.bind(),u.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},p.pick=function(t){if(!t||t.id!==this.pickId)return null;var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],n=this.positions[r[1]].slice(0,3),i={position:n,dataCoordinate:n,index:Math.floor(r[1]/48)};return"cone"===this.traceType?i.index=Math.floor(r[1]/48):"streamtube"===this.traceType&&(i.intensity=this.intensity[r[1]],i.velocity=this.vectors[r[1]].slice(0,3),i.divergence=this.vectors[r[1]][3],i.index=e),i},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},t.exports=function(t,e,r){var s,u,f=r.shaders;1==arguments.length&&(t=(e=t).gl);var l=((s=n(t,f.meshShader.vertex,f.meshShader.fragment,null,f.meshShader.attributes)).attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s.attributes.vector.location=4,s),p=((u=n(t,f.pickShader.vertex,f.pickShader.fragment,null,f.pickShader.attributes)).attributes.position.location=0,u.attributes.id.location=1,u.attributes.vector.location=4,u),d=a(t,h(new Uint8Array([255,255,255,255]),[1,1,4]));d.generateMipmap(),d.minFilter=t.LINEAR_MIPMAP_LINEAR,d.magFilter=t.LINEAR;var v=i(t),g=i(t),m=i(t),b=i(t),y=i(t),x=o(t,[{buffer:v,type:t.FLOAT,size:4},{buffer:y,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:m,type:t.FLOAT,size:4},{buffer:b,type:t.FLOAT,size:2},{buffer:g,type:t.FLOAT,size:4}]),_=new c(t,d,l,p,v,g,y,m,b,x,r.traceType||"cone");return _.update(e),_}},614:function(t,e,r){var n=r(3236),i=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * (view * conePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);e.meshShader={vertex:i,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},e.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},737:function(t){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},5171:function(t,e,r){var n=r(737);t.exports=function(t){return n[t]}},9165:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl,r=n(e),a=i(e,[{buffer:r,type:e.FLOAT,size:3,offset:0,stride:40},{buffer:r,type:e.FLOAT,size:4,offset:12,stride:40},{buffer:r,type:e.FLOAT,size:3,offset:28,stride:40}]),u=o(e);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.offset.location=2;var h=new s(e,r,a,u);return h.update(t),h};var n=r(2762),i=r(8116),o=r(3436),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,n){this.gl=t,this.shader=n,this.buffer=e,this.vao=r,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var u=s.prototype;function h(t,e){for(var r=0;r<3;++r)t[0][r]=Math.min(t[0][r],e[r]),t[1][r]=Math.max(t[1][r],e[r])}u.isOpaque=function(){return!this.hasAlpha},u.isTransparent=function(){return this.hasAlpha},u.drawTransparent=u.draw=function(t){var e=this.gl,r=this.shader.uniforms;this.shader.bind();var n=r.view=t.view||a,i=r.projection=t.projection||a;r.model=t.model||a,r.clipBounds=this.clipBounds,r.opacity=this.opacity;var o=n[12],s=n[13],u=n[14],h=n[15],f=(t._ortho?2:1)*this.pixelRatio*(i[3]*o+i[7]*s+i[11]*u+i[15]*h)/e.drawingBufferHeight;this.vao.bind();for(var l=0;l<3;++l)e.lineWidth(this.lineWidth[l]*this.pixelRatio),r.capSize=this.capSize[l]*f,this.lineCount[l]&&e.drawArrays(e.LINES,this.lineOffset[l],this.lineCount[l]);this.vao.unbind()};var f=function(){for(var t=[,,,],e=0;e<3;++e){for(var r=[],n=1;n<=2;++n)for(var i=-1;i<=1;i+=2){var o=[0,0,0];o[(n+e)%3]=i,r.push(o)}t[e]=r}return t}();function l(t,e,r,n){for(var i=f[n],o=0;o<i.length;++o){var a=i[o];t.push(e[0],e[1],e[2],r[0],r[1],r[2],r[3],a[0],a[1],a[2])}return i.length}u.update=function(t){"lineWidth"in(t=t||{})&&(this.lineWidth=t.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in t&&(this.capSize=t.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var e=t.color||[[0,0,0],[0,0,0],[0,0,0]],r=t.position,n=t.error;if(Array.isArray(e[0])||(e=[e,e,e]),r&&n){var i=[],o=r.length,a=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=a;r:for(var u=0;u<o;++u){for(var f=r[u],c=0;c<3;++c)if(isNaN(f[c])||!isFinite(f[c]))continue r;var p=n[u],d=e[s];if(Array.isArray(d[0])&&(d=e[u]),3===d.length?d=[d[0],d[1],d[2],1]:4===d.length&&(d=[d[0],d[1],d[2],d[3]],!this.hasAlpha&&d[3]<1&&(this.hasAlpha=!0)),!(isNaN(p[0][s])||isNaN(p[1][s]))){if(p[0][s]<0){var v=f.slice();v[s]+=p[0][s],i.push(f[0],f[1],f[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),h(this.bounds,v),a+=2+l(i,v,d,s)}if(p[1][s]>0){var v=f.slice();v[s]+=p[1][s],i.push(f[0],f[1],f[2],d[0],d[1],d[2],d[3],0,0,0,v[0],v[1],v[2],d[0],d[1],d[2],d[3],0,0,0),h(this.bounds,v),a+=2+l(i,v,d,s)}}}this.lineCount[s]=a-this.lineOffset[s]}this.buffer.update(i)}},u.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},3436:function(t,e,r){"use strict";var n=r(3236),i=r(9405),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * (view * worldPosition);\n  fragColor           = color;\n  fragPosition        = position;\n}"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);t.exports=function(t){return i(t,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},2260:function(t,e,r){"use strict";var n,i,o,a,s=r(7766);t.exports=function(t,e,r,s){n||(n=t.FRAMEBUFFER_UNSUPPORTED,i=t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,o=t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,a=t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var h=t.getExtension("WEBGL_draw_buffers");if(!u&&h&&function(t,e){var r=t.getParameter(e.MAX_COLOR_ATTACHMENTS_WEBGL);u=Array(r+1);for(var n=0;n<=r;++n){for(var i=Array(r),o=0;o<n;++o)i[o]=t.COLOR_ATTACHMENT0+o;for(var o=n;o<r;++o)i[o]=t.NONE;u[n]=i}}(t,h),Array.isArray(e)&&(s=r,r=0|e[1],e=0|e[0]),"number"!=typeof e)throw Error("gl-fbo: Missing shape parameter");var f=t.getParameter(t.MAX_RENDERBUFFER_SIZE);if(e<0||e>f||r<0||r>f)throw Error("gl-fbo: Parameters are too large for FBO");var l=1;if("color"in(s=s||{})){if((l=Math.max(0|s.color,0))<0)throw Error("gl-fbo: Must specify a nonnegative number of colors");if(l>1){if(h){if(l>t.getParameter(h.MAX_COLOR_ATTACHMENTS_WEBGL))throw Error("gl-fbo: Context does not support "+l+" draw buffers")}else throw Error("gl-fbo: Multiple draw buffer extension not supported")}}var c=t.UNSIGNED_BYTE,p=t.getExtension("OES_texture_float");if(s.float&&l>0){if(!p)throw Error("gl-fbo: Context does not support floating point textures");c=t.FLOAT}else s.preferFloat&&l>0&&p&&(c=t.FLOAT);var v=!0;"depth"in s&&(v=!!s.depth);var g=!1;return"stencil"in s&&(g=!!s.stencil),new d(t,e,r,c,l,v,g,h)};var u=null;function h(t){return[t.getParameter(t.FRAMEBUFFER_BINDING),t.getParameter(t.RENDERBUFFER_BINDING),t.getParameter(t.TEXTURE_BINDING_2D)]}function f(t,e){t.bindFramebuffer(t.FRAMEBUFFER,e[0]),t.bindRenderbuffer(t.RENDERBUFFER,e[1]),t.bindTexture(t.TEXTURE_2D,e[2])}function l(t){switch(t){case n:throw Error("gl-fbo: Framebuffer unsupported");case i:throw Error("gl-fbo: Framebuffer incomplete attachment");case o:throw Error("gl-fbo: Framebuffer incomplete dimensions");case a:throw Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw Error("gl-fbo: Framebuffer failed for unspecified reason")}}function c(t,e,r,n,i,o){if(!n)return null;var a=s(t,e,r,i,n);return a.magFilter=t.NEAREST,a.minFilter=t.NEAREST,a.mipSamples=1,a.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,o,t.TEXTURE_2D,a.handle,0),a}function p(t,e,r,n,i){var o=t.createRenderbuffer();return t.bindRenderbuffer(t.RENDERBUFFER,o),t.renderbufferStorage(t.RENDERBUFFER,n,e,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,o),o}function d(t,e,r,n,i,o,a,s){this.gl=t,this._shape=[0|e,0|r],this._destroyed=!1,this._ext=s,this.color=Array(i);for(var d=0;d<i;++d)this.color[d]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=n,this._useDepth=o,this._useStencil=a;var v=this,g=[0|e,0|r];Object.defineProperties(g,{0:{get:function(){return v._shape[0]},set:function(t){return v.width=t}},1:{get:function(){return v._shape[1]},set:function(t){return v.height=t}}}),this._shapeVector=g,function(t){var e=h(t.gl),r=t.gl,n=t.handle=r.createFramebuffer(),i=t._shape[0],o=t._shape[1],a=t.color.length,s=t._ext,d=t._useStencil,v=t._useDepth,g=t._colorType;r.bindFramebuffer(r.FRAMEBUFFER,n);for(var m=0;m<a;++m)t.color[m]=c(r,i,o,g,r.RGBA,r.COLOR_ATTACHMENT0+m);0===a?(t._color_rb=p(r,i,o,r.RGBA4,r.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(u[0])):a>1&&s.drawBuffersWEBGL(u[a]);var b=r.getExtension("WEBGL_depth_texture");b?d?t.depth=c(r,i,o,b.UNSIGNED_INT_24_8_WEBGL,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):v&&(t.depth=c(r,i,o,r.UNSIGNED_SHORT,r.DEPTH_COMPONENT,r.DEPTH_ATTACHMENT)):v&&d?t._depth_rb=p(r,i,o,r.DEPTH_STENCIL,r.DEPTH_STENCIL_ATTACHMENT):v?t._depth_rb=p(r,i,o,r.DEPTH_COMPONENT16,r.DEPTH_ATTACHMENT):d&&(t._depth_rb=p(r,i,o,r.STENCIL_INDEX,r.STENCIL_ATTACHMENT));var y=r.checkFramebufferStatus(r.FRAMEBUFFER);if(y!==r.FRAMEBUFFER_COMPLETE){t._destroyed=!0,r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteFramebuffer(t.handle),t.handle=null,t.depth&&(t.depth.dispose(),t.depth=null),t._depth_rb&&(r.deleteRenderbuffer(t._depth_rb),t._depth_rb=null);for(var m=0;m<t.color.length;++m)t.color[m].dispose(),t.color[m]=null;t._color_rb&&(r.deleteRenderbuffer(t._color_rb),t._color_rb=null),f(r,e),l(y)}f(r,e)}(this)}var v=d.prototype;function g(t,e,r){if(t._destroyed)throw Error("gl-fbo: Can't resize destroyed FBO");if(t._shape[0]!==e||t._shape[1]!==r){var n=t.gl,i=n.getParameter(n.MAX_RENDERBUFFER_SIZE);if(e<0||e>i||r<0||r>i)throw Error("gl-fbo: Can't resize FBO, invalid dimensions");t._shape[0]=e,t._shape[1]=r;for(var o=h(n),a=0;a<t.color.length;++a)t.color[a].shape=t._shape;t._color_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._color_rb),n.renderbufferStorage(n.RENDERBUFFER,n.RGBA4,t._shape[0],t._shape[1])),t.depth&&(t.depth.shape=t._shape),t._depth_rb&&(n.bindRenderbuffer(n.RENDERBUFFER,t._depth_rb),t._useDepth&&t._useStencil?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t._shape[0],t._shape[1]):t._useDepth?n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_COMPONENT16,t._shape[0],t._shape[1]):t._useStencil&&n.renderbufferStorage(n.RENDERBUFFER,n.STENCIL_INDEX,t._shape[0],t._shape[1])),n.bindFramebuffer(n.FRAMEBUFFER,t.handle);var s=n.checkFramebufferStatus(n.FRAMEBUFFER);s!==n.FRAMEBUFFER_COMPLETE&&(t.dispose(),f(n,o),l(s)),f(n,o)}}Object.defineProperties(v,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(t){if(Array.isArray(t)||(t=[0|t,0|t]),2!==t.length)throw Error("gl-fbo: Shape vector must be length 2");var e=0|t[0],r=0|t[1];return g(this,e,r),[e,r]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(t){return g(this,t|=0,this._shape[1]),t},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(t){return t|=0,g(this,this._shape[0],t),t},enumerable:!1}}),v.bind=function(){if(!this._destroyed){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.handle),t.viewport(0,0,this._shape[0],this._shape[1])}},v.dispose=function(){if(!this._destroyed){this._destroyed=!0;var t=this.gl;t.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(t.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var e=0;e<this.color.length;++e)this.color[e].dispose(),this.color[e]=null;this._color_rb&&(t.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},2992:function(t,e,r){var n=r(3387).sprintf,i=r(5171),o=r(1848),a=r(1085);t.exports=function(t,e,r){"use strict";var s=o(e)||"of unknown name (see npm glsl-shader-name)",u="unknown type";void 0!==r&&(u=r===i.FRAGMENT_SHADER?"fragment":"vertex");for(var h=n("Error compiling %s shader %s:\n",u,s),f=n("%s%s",h,t),l=t.split("\n"),c={},p=0;p<l.length;p++){var d=l[p];if(""!==d&&"\0"!==d){var v=parseInt(d.split(":")[2]);if(isNaN(v))throw Error(n("Could not parse error: %s",d));c[v]=d}}for(var g=a(e).split("\n"),p=0;p<g.length;p++)if((c[p+3]||c[p+2]||c[p+1])&&(h+=g[p]+"\n",c[p+1])){var m=c[p+1];h+=n("^^^ %s\n\n",m=m.substr(m.split(":",3).join(":").length+1).trim())}return{long:h.trim(),short:f.trim()}}},2510:function(t,e,r){"use strict";t.exports=function(t,e){var r=t.gl,n=new c(t,h(r,l.vertex,l.fragment),h(r,l.pickVertex,l.pickFragment),f(r),f(r),f(r),f(r));return n.update(e),t.addObject(n),n};var n,i,o,a=r(2478),s=r(7762),u=r(1888),h=r(9405),f=r(2762),l=r(6768);function c(t,e,r,n,i,o,a){this.plot=t,this.shader=e,this.pickShader=r,this.positionBuffer=n,this.weightBuffer=i,this.colorBuffer=o,this.idBuffer=a,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var p=c.prototype,d=[0,0,1,0,0,1,1,0,1,1,0,1];p.draw=(n=[1,0,0,0,1,0,0,0,1],function(){var t=this.plot,e=this.shader,r=this.bounds,i=this.numVertices;if(!(i<=0)){var o=t.gl,a=t.dataBox,s=r[2]-r[0],u=r[3]-r[1],h=a[2]-a[0],f=a[3]-a[1];n[0]=2*s/h,n[4]=2*u/f,n[6]=2*(r[0]-a[0])/h-1,n[7]=2*(r[1]-a[1])/f-1,e.bind();var l=e.uniforms;l.viewTransform=n,l.shape=this.shape;var c=e.attributes;this.positionBuffer.bind(),c.position.pointer(),this.weightBuffer.bind(),c.weight.pointer(o.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),c.color.pointer(o.UNSIGNED_BYTE,!0),o.drawArrays(o.TRIANGLES,0,i)}}),p.drawPick=(i=[1,0,0,0,1,0,0,0,1],o=[0,0,0,0],function(t){var e=this.plot,r=this.pickShader,n=this.bounds,a=this.numVertices;if(!(a<=0)){var s=e.gl,u=e.dataBox,h=n[2]-n[0],f=n[3]-n[1],l=u[2]-u[0],c=u[3]-u[1];i[0]=2*h/l,i[4]=2*f/c,i[6]=2*(n[0]-u[0])/l-1,i[7]=2*(n[1]-u[1])/c-1;for(var p=0;p<4;++p)o[p]=t>>8*p&255;this.pickOffset=t,r.bind();var d=r.uniforms;d.viewTransform=i,d.pickOffset=o,d.shape=this.shape;var v=r.attributes;return this.positionBuffer.bind(),v.position.pointer(),this.weightBuffer.bind(),v.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),v.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,a),t+this.shape[0]*this.shape[1]}}),p.pick=function(t,e,r){var n=this.pickOffset,i=this.shape[0]*this.shape[1];if(r<n||r>=n+i)return null;var o=r-n,a=this.xData,s=this.yData;return{object:this,pointId:o,dataCoord:[a[o%this.shape[0]],s[o/this.shape[0]|0]]}},p.update=function(t){var e=(t=t||{}).shape||[0,0],r=t.x||s(e[0]),n=t.y||s(e[1]),i=t.z||new Float32Array(e[0]*e[1]),o=!1!==t.zsmooth;this.xData=r,this.yData=n;var h=t.colorLevels||[0],f=t.colorValues||[0,0,0,1],l=h.length,c=this.bounds;o?(S=c[0]=r[0],k=c[1]=n[0],C=c[2]=r[r.length-1],L=c[3]=n[n.length-1]):(S=c[0]=r[0]+(r[1]-r[0])/2,k=c[1]=n[0]+(n[1]-n[0])/2,C=c[2]=r[r.length-1]+(r[r.length-1]-r[r.length-2])/2,L=c[3]=n[n.length-1]+(n[n.length-1]-n[n.length-2])/2);var p=1/(C-S),v=1/(L-k),g=e[0],m=e[1];this.shape=[g,m];var b=(o?(g-1)*(m-1):g*m)*(d.length>>>1);this.numVertices=b;for(var y=u.mallocUint8(4*b),x=u.mallocFloat32(2*b),_=u.mallocUint8(2*b),w=u.mallocUint32(b),E=0,M=o?g-1:g,A=o?m-1:m,T=0;T<A;++T){o?(I=v*(n[T]-k),P=v*(n[T+1]-k)):(I=T<m-1?v*(n[T]-(n[T+1]-n[T])/2-k):v*(n[T]-(n[T]-n[T-1])/2-k),P=T<m-1?v*(n[T]+(n[T+1]-n[T])/2-k):v*(n[T]+(n[T]-n[T-1])/2-k));for(var R=0;R<M;++R){o?(B=p*(r[R]-S),F=p*(r[R+1]-S)):(B=R<g-1?p*(r[R]-(r[R+1]-r[R])/2-S):p*(r[R]-(r[R]-r[R-1])/2-S),F=R<g-1?p*(r[R]+(r[R+1]-r[R])/2-S):p*(r[R]+(r[R]-r[R-1])/2-S));for(var O=0;O<d.length;O+=2){var S,k,C,L,I,P,B,F,N,D,U,z,j=d[O],V=d[O+1],G=i[o?(T+V)*g+(R+j):T*g+R],H=a.le(h,G);if(H<0)N=f[0],D=f[1],U=f[2],z=f[3];else if(H===l-1)N=f[4*l-4],D=f[4*l-3],U=f[4*l-2],z=f[4*l-1];else{var W=(G-h[H])/(h[H+1]-h[H]),X=1-W,Y=4*H,q=4*(H+1);N=X*f[Y]+W*f[q],D=X*f[Y+1]+W*f[q+1],U=X*f[Y+2]+W*f[q+2],z=X*f[Y+3]+W*f[q+3]}y[4*E]=255*N,y[4*E+1]=255*D,y[4*E+2]=255*U,y[4*E+3]=255*z,x[2*E]=.5*B+.5*F,x[2*E+1]=.5*I+.5*P,_[2*E]=j,_[2*E+1]=V,w[E]=T*g+R,E+=1}}}this.positionBuffer.update(x),this.weightBuffer.update(_),this.colorBuffer.update(y),this.idBuffer.update(w),u.free(x),u.free(y),u.free(_),u.free(w)},p.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},6768:function(t,e,r){"use strict";var n=r(3236);t.exports={fragment:n(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},7319:function(t,e,r){var n=r(3236),i=r(9405),o=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),u=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];e.createShader=function(t){return i(t,o,a,null,u)},e.createPickShader=function(t){return i(t,o,s,null,u)}},5714:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl||t.scene&&t.scene.gl,r=l(e);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;var a=c(e);a.attributes.position.location=0,a.attributes.nextPosition.location=1,a.attributes.arcLength.location=2,a.attributes.lineWidth.location=3,a.attributes.color.location=4;for(var s=n(e),u=i(e,[{buffer:s,size:3,offset:0,stride:48},{buffer:s,size:3,offset:12,stride:48},{buffer:s,size:1,offset:24,stride:48},{buffer:s,size:1,offset:28,stride:48},{buffer:s,size:4,offset:32,stride:48}]),f=h(Array(1024),[256,1,4]),p=0;p<1024;++p)f.data[p]=255;var d=o(e,f);d.wrap=e.REPEAT;var v=new g(e,r,a,s,u,d);return v.update(t),v};var n=r(2762),i=r(8116),o=r(7766),a=new Uint8Array(4),s=new Float32Array(a.buffer),u=r(2478),h=r(9618),f=r(7319),l=f.createShader,c=f.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function d(t){for(var e=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],r=0;r<3;++r)e[0][r]=Math.max(t[0][r],e[0][r]),e[1][r]=Math.min(t[1][r],e[1][r]);return e}function v(t,e,r,n){this.arcLength=t,this.position=e,this.index=r,this.dataCoordinate=n}function g(t,e,r,n,i,o){this.gl=t,this.shader=e,this.pickShader=r,this.buffer=n,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=o,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var m=g.prototype;m.isTransparent=function(){return this.hasAlpha},m.isOpaque=function(){return!this.hasAlpha},m.pickSlots=1,m.setPickBase=function(t){this.pickId=t},m.drawTransparent=m.draw=function(t){if(this.vertexCount){var e=this.gl,r=this.shader,n=this.vao;r.bind(),r.uniforms={model:t.model||p,view:t.view||p,projection:t.projection||p,clipBounds:d(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},m.drawPick=function(t){if(this.vertexCount){var e=this.gl,r=this.pickShader,n=this.vao;r.bind(),r.uniforms={model:t.model||p,view:t.view||p,projection:t.projection||p,pickId:this.pickId,clipBounds:d(this.clipBounds),screenShape:[e.drawingBufferWidth,e.drawingBufferHeight],pixelRatio:this.pixelRatio},n.bind(),n.draw(e.TRIANGLE_STRIP,this.vertexCount),n.unbind()}},m.update=function(t){this.dirty=!0;var e=!!t.connectGaps;"dashScale"in t&&(this.dashScale=t.dashScale),this.hasAlpha=!1,"opacity"in t&&(this.opacity=+t.opacity,this.opacity<1&&(this.hasAlpha=!0));var r=[],n=[],i=[],o=0,a=0,s=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],f=t.position||t.positions;if(f){var l=t.color||t.colors||[0,0,0,1],c=t.lineWidth||1,p=!1;n:for(d=1;d<f.length;++d){var d,v,g,m,b,y=f[d-1],x=f[d];for(n.push(o),i.push(y.slice()),v=0;v<3;++v){if(isNaN(y[v])||isNaN(x[v])||!isFinite(y[v])||!isFinite(x[v])){if(!e&&r.length>0){for(var _=0;_<24;++_)r.push(r[r.length-12]);a+=2,p=!0}continue n}s[0][v]=Math.min(s[0][v],y[v],x[v]),s[1][v]=Math.max(s[1][v],y[v],x[v])}Array.isArray(l[0])?(g=l.length>d-1?l[d-1]:l.length>0?l[l.length-1]:[0,0,0,1],m=l.length>d?l[d]:l.length>0?l[l.length-1]:[0,0,0,1]):g=m=l,3===g.length&&(g=[g[0],g[1],g[2],1]),3===m.length&&(m=[m[0],m[1],m[2],1]),!this.hasAlpha&&g[3]<1&&(this.hasAlpha=!0),b=Array.isArray(c)?c.length>d-1?c[d-1]:c.length>0?c[c.length-1]:[0,0,0,1]:c;var w=o;if(o+=function(t,e){for(var r=0,n=0;n<3;++n){var i=t[n]-e[n];r+=i*i}return Math.sqrt(r)}(y,x),p){for(v=0;v<2;++v)r.push(y[0],y[1],y[2],x[0],x[1],x[2],w,b,g[0],g[1],g[2],g[3]);a+=2,p=!1}r.push(y[0],y[1],y[2],x[0],x[1],x[2],w,b,g[0],g[1],g[2],g[3],y[0],y[1],y[2],x[0],x[1],x[2],w,-b,g[0],g[1],g[2],g[3],x[0],x[1],x[2],y[0],y[1],y[2],o,-b,m[0],m[1],m[2],m[3],x[0],x[1],x[2],y[0],y[1],y[2],o,b,m[0],m[1],m[2],m[3]),a+=4}}if(this.buffer.update(r),n.push(o),i.push(f[f.length-1].slice()),this.bounds=s,this.vertexCount=a,this.points=i,this.arcLength=n,"dashes"in t){var E=t.dashes.slice();for(E.unshift(0),d=1;d<E.length;++d)E[d]=E[d-1]+E[d];var M=h(Array(1024),[256,1,4]);for(d=0;d<256;++d){for(v=0;v<4;++v)M.set(d,0,v,0);1&u.le(E,E[E.length-1]*d/255)?M.set(d,0,0,0):M.set(d,0,0,255)}this.texture.setPixels(M)}},m.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},m.pick=function(t){if(!t||t.id!==this.pickId)return null;var e,r,n,i=(e=t.value[0],r=t.value[1],n=t.value[2],a[0]=0,a[1]=n,a[2]=r,a[3]=e,s[0]),o=u.le(this.arcLength,i);if(o<0)return null;if(o===this.arcLength.length-1)return new v(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),o);for(var h=this.points[o],f=this.points[Math.min(o+1,this.points.length-1)],l=(i-this.arcLength[o])/(this.arcLength[o+1]-this.arcLength[o]),c=1-l,p=[0,0,0],d=0;d<3;++d)p[d]=c*h[d]+l*f[d];var g=Math.min(l<.5?o:o+1,this.points.length-1);return new v(i,p,g,this.points[g])}},1903:function(t){t.exports=function(t){var e=new Float32Array(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}},6864:function(t){t.exports=function(){var t=new Float32Array(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},9921:function(t){t.exports=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],h=t[8],f=t[9],l=t[10],c=t[11],p=t[12],d=t[13],v=t[14],g=t[15];return(e*a-r*o)*(l*g-c*v)-(e*s-n*o)*(f*g-c*d)+(e*u-i*o)*(f*v-l*d)+(r*s-n*a)*(h*g-c*p)-(r*u-i*a)*(h*v-l*p)+(n*u-i*s)*(h*d-f*p)}},7399:function(t){t.exports=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,h=r*a,f=n*a,l=n*s,c=i*a,p=i*s,d=i*u,v=o*a,g=o*s,m=o*u;return t[0]=1-l-d,t[1]=f+m,t[2]=c-g,t[3]=0,t[4]=f-m,t[5]=1-h-d,t[6]=p+v,t[7]=0,t[8]=c+g,t[9]=p-v,t[10]=1-h-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},6743:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=n+n,u=i+i,h=o+o,f=n*s,l=n*u,c=n*h,p=i*u,d=i*h,v=o*h,g=a*s,m=a*u,b=a*h;return t[0]=1-(p+v),t[1]=l+b,t[2]=c-m,t[3]=0,t[4]=l-b,t[5]=1-(f+v),t[6]=d+g,t[7]=0,t[8]=c+m,t[9]=d-g,t[10]=1-(f+p),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}},7894:function(t){t.exports=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}},7608:function(t){t.exports=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],h=e[7],f=e[8],l=e[9],c=e[10],p=e[11],d=e[12],v=e[13],g=e[14],m=e[15],b=r*s-n*a,y=r*u-i*a,x=r*h-o*a,_=n*u-i*s,w=n*h-o*s,E=i*h-o*u,M=f*v-l*d,A=f*g-c*d,T=f*m-p*d,R=l*g-c*v,O=l*m-p*v,S=c*m-p*g,k=b*S-y*O+x*R+_*T-w*A+E*M;return k?(k=1/k,t[0]=(s*S-u*O+h*R)*k,t[1]=(i*O-n*S-o*R)*k,t[2]=(v*E-g*w+m*_)*k,t[3]=(c*w-l*E-p*_)*k,t[4]=(u*T-a*S-h*A)*k,t[5]=(r*S-i*T+o*A)*k,t[6]=(g*x-d*E-m*y)*k,t[7]=(f*E-c*x+p*y)*k,t[8]=(a*O-s*T+h*M)*k,t[9]=(n*T-r*O-o*M)*k,t[10]=(d*w-v*x+m*b)*k,t[11]=(l*x-f*w-p*b)*k,t[12]=(s*A-a*R-u*M)*k,t[13]=(r*R-n*A+i*M)*k,t[14]=(v*y-d*_-g*b)*k,t[15]=(f*_-l*y+c*b)*k,t):null}},6582:function(t,e,r){var n=r(7894);t.exports=function(t,e,r,i){var o,a,s,u,h,f,l,c,p,d,v=e[0],g=e[1],m=e[2],b=i[0],y=i[1],x=i[2],_=r[0],w=r[1],E=r[2];return 1e-6>Math.abs(v-_)&&1e-6>Math.abs(g-w)&&1e-6>Math.abs(m-E)?n(t):(d=1/Math.sqrt((l=v-_)*l+(c=g-w)*c+(p=m-E)*p),l*=d,c*=d,p*=d,(d=Math.sqrt((o=y*p-x*c)*o+(a=x*l-b*p)*a+(s=b*c-y*l)*s))?(o*=d=1/d,a*=d,s*=d):(o=0,a=0,s=0),(d=Math.sqrt((u=c*s-p*a)*u+(h=p*o-l*s)*h+(f=l*a-c*o)*f))?(u*=d=1/d,h*=d,f*=d):(u=0,h=0,f=0),t[0]=o,t[1]=u,t[2]=l,t[3]=0,t[4]=a,t[5]=h,t[6]=c,t[7]=0,t[8]=s,t[9]=f,t[10]=p,t[11]=0,t[12]=-(o*v+a*g+s*m),t[13]=-(u*v+h*g+f*m),t[14]=-(l*v+c*g+p*m),t[15]=1,t)}},6760:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],l=e[8],c=e[9],p=e[10],d=e[11],v=e[12],g=e[13],m=e[14],b=e[15],y=r[0],x=r[1],_=r[2],w=r[3];return t[0]=y*n+x*s+_*l+w*v,t[1]=y*i+x*u+_*c+w*g,t[2]=y*o+x*h+_*p+w*m,t[3]=y*a+x*f+_*d+w*b,y=r[4],x=r[5],_=r[6],w=r[7],t[4]=y*n+x*s+_*l+w*v,t[5]=y*i+x*u+_*c+w*g,t[6]=y*o+x*h+_*p+w*m,t[7]=y*a+x*f+_*d+w*b,y=r[8],x=r[9],_=r[10],w=r[11],t[8]=y*n+x*s+_*l+w*v,t[9]=y*i+x*u+_*c+w*g,t[10]=y*o+x*h+_*p+w*m,t[11]=y*a+x*f+_*d+w*b,y=r[12],x=r[13],_=r[14],w=r[15],t[12]=y*n+x*s+_*l+w*v,t[13]=y*i+x*u+_*c+w*g,t[14]=y*o+x*h+_*p+w*m,t[15]=y*a+x*f+_*d+w*b,t}},4040:function(t){t.exports=function(t,e,r,n,i,o,a){var s=1/(e-r),u=1/(n-i),h=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*s,t[13]=(i+n)*u,t[14]=(a+o)*h,t[15]=1,t}},4772:function(t){t.exports=function(t,e,r,n,i){var o=1/Math.tan(e/2),a=1/(n-i);return t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+n)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*n*a,t[15]=0,t}},6079:function(t){t.exports=function(t,e,r,n){var i,o,a,s,u,h,f,l,c,p,d,v,g,m,b,y,x,_,w,E,M,A,T,R,O=n[0],S=n[1],k=n[2],C=Math.sqrt(O*O+S*S+k*k);return 1e-6>Math.abs(C)?null:(O*=C=1/C,S*=C,k*=C,i=Math.sin(r),a=1-(o=Math.cos(r)),s=e[0],u=e[1],h=e[2],f=e[3],l=e[4],c=e[5],p=e[6],d=e[7],v=e[8],g=e[9],m=e[10],b=e[11],y=O*O*a+o,x=S*O*a+k*i,_=k*O*a-S*i,w=O*S*a-k*i,E=S*S*a+o,M=k*S*a+O*i,A=O*k*a+S*i,T=S*k*a-O*i,R=k*k*a+o,t[0]=s*y+l*x+v*_,t[1]=u*y+c*x+g*_,t[2]=h*y+p*x+m*_,t[3]=f*y+d*x+b*_,t[4]=s*w+l*E+v*M,t[5]=u*w+c*E+g*M,t[6]=h*w+p*E+m*M,t[7]=f*w+d*E+b*M,t[8]=s*A+l*T+v*R,t[9]=u*A+c*T+g*R,t[10]=h*A+p*T+m*R,t[11]=f*A+d*T+b*R,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}},5567:function(t){t.exports=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[4],a=e[5],s=e[6],u=e[7],h=e[8],f=e[9],l=e[10],c=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+h*n,t[5]=a*i+f*n,t[6]=s*i+l*n,t[7]=u*i+c*n,t[8]=h*i-o*n,t[9]=f*i-a*n,t[10]=l*i-s*n,t[11]=c*i-u*n,t}},2408:function(t){t.exports=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],h=e[8],f=e[9],l=e[10],c=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-h*n,t[1]=a*i-f*n,t[2]=s*i-l*n,t[3]=u*i-c*n,t[8]=o*n+h*i,t[9]=a*n+f*i,t[10]=s*n+l*i,t[11]=u*n+c*i,t}},7089:function(t){t.exports=function(t,e,r){var n=Math.sin(r),i=Math.cos(r),o=e[0],a=e[1],s=e[2],u=e[3],h=e[4],f=e[5],l=e[6],c=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+h*n,t[1]=a*i+f*n,t[2]=s*i+l*n,t[3]=u*i+c*n,t[4]=h*i-o*n,t[5]=f*i-a*n,t[6]=l*i-s*n,t[7]=c*i-u*n,t}},2504:function(t){t.exports=function(t,e,r){var n=r[0],i=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}},7656:function(t){t.exports=function(t,e,r){var n,i,o,a,s,u,h,f,l,c,p,d,v=r[0],g=r[1],m=r[2];return e===t?(t[12]=e[0]*v+e[4]*g+e[8]*m+e[12],t[13]=e[1]*v+e[5]*g+e[9]*m+e[13],t[14]=e[2]*v+e[6]*g+e[10]*m+e[14],t[15]=e[3]*v+e[7]*g+e[11]*m+e[15]):(n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],h=e[6],f=e[7],l=e[8],c=e[9],p=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=h,t[7]=f,t[8]=l,t[9]=c,t[10]=p,t[11]=d,t[12]=n*v+s*g+l*m+e[12],t[13]=i*v+u*g+c*m+e[13],t[14]=o*v+h*g+p*m+e[14],t[15]=a*v+f*g+d*m+e[15]),t}},5665:function(t){t.exports=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}},7626:function(t,e,r){"use strict";var n=r(2642),i=r(9346);function o(t,e){for(var r=[0,0,0,0],n=0;n<4;++n)for(var i=0;i<4;++i)r[i]+=t[4*n+i]*e[n];return r}t.exports=function(t,e,r,a,s,u){if(1===t.length)return[0,t[0].slice()];for(var h=Array(t.length),f=0;f<t.length;++f)h[f]=function(t,e,r,n,i){for(var a=o(n,o(r,o(e,[t[0],t[1],t[2],1]))),s=0;s<3;++s)a[s]/=a[3];return[.5*i[0]*(1+a[0]),.5*i[1]*(1-a[1])]}(t[f],r,a,s,u);for(var l=0,c=1/0,f=0;f<h.length;++f){for(var p=0,d=0;d<2;++d)p+=Math.pow(h[f][d]-e[d],2);p<c&&(c=p,l=f)}for(var v=function(t,e){if(2===t.length){for(var r=0,o=0,a=0;a<2;++a)r+=Math.pow(e[a]-t[0][a],2),o+=Math.pow(e[a]-t[1][a],2);return(r=Math.sqrt(r))+(o=Math.sqrt(o))<1e-6?[1,0]:[o/(r+o),r/(o+r)]}if(3===t.length){var s=[0,0];return i(t[0],t[1],t[2],e,s),n(t,s)}return[]}(h,e),g=0,f=0;f<3;++f){if(v[f]<-.001||v[f]>1.0001)return null;g+=v[f]}return Math.abs(g-1)>.001?null:[l,function(t,e){for(var r=[0,0,0],n=0;n<t.length;++n)for(var i=t[n],o=e[n],a=0;a<3;++a)r[a]+=o*i[a];return r}(t,v),v]}},840:function(t,e,r){var n=r(3236),i=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * (view * (model * vec4(p, 1.0)));\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),o=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),a=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),u=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),h=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),f=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n  f_id        = id;\n  f_position  = position;\n}"]),l=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),c=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * (view * (model * vec4(position, 1.0)));\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),p=n(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * (view * (model * vec4(position, 1.0)));\n}"]),d=n(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);e.meshShader={vertex:i,fragment:o,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.wireShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},e.pointShader={vertex:u,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},e.pickShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},e.pointPickShader={vertex:c,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},e.contourShader={vertex:p,fragment:d,attributes:[{name:"position",type:"vec3"}]}},7201:function(t,e,r){"use strict";var n=r(9405),i=r(2762),o=r(8116),a=r(7766),s=r(8406),u=r(6760),h=r(7608),f=r(9618),l=r(6729),c=r(7765),p=r(1888),d=r(840),v=r(7626),g=d.meshShader,m=d.wireShader,b=d.pointShader,y=d.pickShader,x=d.pointPickShader,_=d.contourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function E(t,e,r,n,i,o,a,s,u,h,f,l,c,p,d,v,g,m,b,y,x,_,E,M,A,T,R){this.gl=t,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=e,this.dirty=!0,this.triShader=r,this.lineShader=n,this.pointShader=i,this.pickShader=o,this.pointPickShader=a,this.contourShader=s,this.trianglePositions=u,this.triangleColors=f,this.triangleNormals=c,this.triangleUVs=l,this.triangleIds=h,this.triangleVAO=p,this.triangleCount=0,this.lineWidth=1,this.edgePositions=d,this.edgeColors=g,this.edgeUVs=m,this.edgeIds=v,this.edgeVAO=b,this.edgeCount=0,this.pointPositions=y,this.pointColors=_,this.pointUVs=E,this.pointSizes=M,this.pointIds=x,this.pointVAO=A,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=T,this.contourVAO=R,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=w,this._view=w,this._projection=w,this._resolution=[1,1]}var M=E.prototype;function A(t,e){if(!e||!e.length)return 1;for(var r=0;r<e.length&&!(e.length<2);++r){if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var n=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-n)+n*e[r-1][1]}}return 1}M.isOpaque=function(){return!this.hasAlpha},M.isTransparent=function(){return this.hasAlpha},M.pickSlots=1,M.setPickBase=function(t){this.pickId=t},M.highlight=function(t){if(!t||!this.contourEnable){this.contourCount=0;return}for(var e=c(this.cells,this.intensity,t.intensity),r=e.cells,n=e.vertexIds,i=e.vertexWeights,o=r.length,a=p.mallocFloat32(6*o),s=0,u=0;u<o;++u)for(var h=r[u],f=0;f<2;++f){var l=h[0];2===h.length&&(l=h[f]);for(var d=n[l][0],v=n[l][1],g=i[l],m=1-g,b=this.positions[d],y=this.positions[v],x=0;x<3;++x)a[s++]=g*b[x]+m*y[x]}this.contourCount=s/3|0,this.contourPositions.update(a.subarray(0,s)),p.free(a)},M.update=function(t){t=t||{};var e=this.gl;this.dirty=!0,"contourEnable"in t&&(this.contourEnable=t.contourEnable),"contourColor"in t&&(this.contourColor=t.contourColor),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"lightPosition"in t&&(this.lightPosition=t.lightPosition),this.hasAlpha=!1,"opacity"in t&&(this.opacity=t.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in t&&(this.opacityscale=t.opacityscale,this.hasAlpha=!0),"ambient"in t&&(this.ambientLight=t.ambient),"diffuse"in t&&(this.diffuseLight=t.diffuse),"specular"in t&&(this.specularLight=t.specular),"roughness"in t&&(this.roughness=t.roughness),"fresnel"in t&&(this.fresnel=t.fresnel),t.texture?(this.texture.dispose(),this.texture=a(e,t.texture)):t.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=e.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=e.LINEAR,this.texture.setPixels(function(t,e){for(var r=l({colormap:t,nshades:256,format:"rgba"}),n=new Uint8Array(1024),i=0;i<256;++i){for(var o=r[i],a=0;a<3;++a)n[4*i+a]=o[a];e?n[4*i+3]=255*A(i/255,e):n[4*i+3]=255*o[3]}return f(n,[256,256,4],[4,0,1])}(t.colormap,this.opacityscale)),this.texture.generateMipmap());var r=t.cells,n=t.positions;if(n&&r){var i=[],o=[],u=[],h=[],c=[],p=[],d=[],v=[],g=[],m=[],b=[],y=[],x=[],_=[];this.cells=r,this.positions=n;var w=t.vertexNormals,E=t.cellNormals,M=void 0===t.vertexNormalsEpsilon?1e-6:t.vertexNormalsEpsilon,T=void 0===t.faceNormalsEpsilon?1e-6:t.faceNormalsEpsilon;t.useFacetNormals&&!E&&(E=s.faceNormals(r,n,T)),E||w||(w=s.vertexNormals(r,n,M));var R=t.vertexColors,O=t.cellColors,S=t.meshColor||[1,1,1,1],k=t.vertexUVs,C=t.vertexIntensity,L=t.cellUVs,I=t.cellIntensity,P=1/0,B=-1/0;if(!k&&!L){if(C){if(t.vertexIntensityBounds)P=+t.vertexIntensityBounds[0],B=+t.vertexIntensityBounds[1];else for(var F=0;F<C.length;++F){var N=C[F];P=Math.min(P,N),B=Math.max(B,N)}}else if(I){if(t.cellIntensityBounds)P=+t.cellIntensityBounds[0],B=+t.cellIntensityBounds[1];else for(var F=0;F<I.length;++F){var N=I[F];P=Math.min(P,N),B=Math.max(B,N)}}else for(var F=0;F<n.length;++F){var N=n[F][2];P=Math.min(P,N),B=Math.max(B,N)}}C?this.intensity=C:I?this.intensity=I:this.intensity=function(t){for(var e=t.length,r=Array(e),n=0;n<e;++n)r[n]=t[n][2];return r}(n),this.pickVertex=!(I||O);var D=t.pointSizes,U=t.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var F=0;F<n.length;++F)for(var z=n[F],j=0;j<3;++j)!isNaN(z[j])&&isFinite(z[j])&&(this.bounds[0][j]=Math.min(this.bounds[0][j],z[j]),this.bounds[1][j]=Math.max(this.bounds[1][j],z[j]));var V=0,G=0,H=0;n:for(var F=0;F<r.length;++F){var W=r[F];switch(W.length){case 1:for(var X,Y,q=W[0],z=n[q],j=0;j<3;++j)if(isNaN(z[j])||!isFinite(z[j]))continue n;m.push(z[0],z[1],z[2]),X=R?R[q]:O?O[F]:S,this.opacityscale&&C?o.push(X[0],X[1],X[2],this.opacity*A((C[q]-P)/(B-P),this.opacityscale)):3===X.length?b.push(X[0],X[1],X[2],this.opacity):(b.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)),Y=k?k[q]:C?[(C[q]-P)/(B-P),0]:L?L[F]:I?[(I[F]-P)/(B-P),0]:[(z[2]-P)/(B-P),0],y.push(Y[0],Y[1]),D?x.push(D[q]):x.push(U),_.push(F),H+=1;break;case 2:for(var j=0;j<2;++j)for(var q=W[j],z=n[q],Z=0;Z<3;++Z)if(isNaN(z[Z])||!isFinite(z[Z]))continue n;for(var j=0;j<2;++j){var X,Y,q=W[j],z=n[q];p.push(z[0],z[1],z[2]),X=R?R[q]:O?O[F]:S,this.opacityscale&&C?o.push(X[0],X[1],X[2],this.opacity*A((C[q]-P)/(B-P),this.opacityscale)):3===X.length?d.push(X[0],X[1],X[2],this.opacity):(d.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)),Y=k?k[q]:C?[(C[q]-P)/(B-P),0]:L?L[F]:I?[(I[F]-P)/(B-P),0]:[(z[2]-P)/(B-P),0],v.push(Y[0],Y[1]),g.push(F)}G+=1;break;case 3:for(var j=0;j<3;++j)for(var q=W[j],z=n[q],Z=0;Z<3;++Z)if(isNaN(z[Z])||!isFinite(z[Z]))continue n;for(var j=0;j<3;++j){var X,Y,K,q=W[2-j],z=n[q];i.push(z[0],z[1],z[2]),(X=R?R[q]:O?O[F]:S)?this.opacityscale&&C?o.push(X[0],X[1],X[2],this.opacity*A((C[q]-P)/(B-P),this.opacityscale)):3===X.length?o.push(X[0],X[1],X[2],this.opacity):(o.push(X[0],X[1],X[2],X[3]*this.opacity),X[3]<1&&(this.hasAlpha=!0)):o.push(.5,.5,.5,1),Y=k?k[q]:C?[(C[q]-P)/(B-P),0]:L?L[F]:I?[(I[F]-P)/(B-P),0]:[(z[2]-P)/(B-P),0],h.push(Y[0],Y[1]),K=w?w[q]:E[F],u.push(K[0],K[1],K[2]),c.push(F)}V+=1}}this.pointCount=H,this.edgeCount=G,this.triangleCount=V,this.pointPositions.update(m),this.pointColors.update(b),this.pointUVs.update(y),this.pointSizes.update(x),this.pointIds.update(new Uint32Array(_)),this.edgePositions.update(p),this.edgeColors.update(d),this.edgeUVs.update(v),this.edgeIds.update(new Uint32Array(g)),this.trianglePositions.update(i),this.triangleColors.update(o),this.triangleUVs.update(h),this.triangleNormals.update(u),this.triangleIds.update(new Uint32Array(c))}},M.drawTransparent=M.draw=function(t){t=t||{};for(var e=this.gl,r=t.model||w,n=t.view||w,i=t.projection||w,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);var s={model:r,view:n,projection:i,inverseModel:w.slice(),clipBounds:o,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};s.inverseModel=h(s.inverseModel,s.model),e.disable(e.CULL_FACE),this.texture.bind(0);var f=Array(16);u(f,s.view,s.model),u(f,s.projection,f),h(f,f);for(var a=0;a<3;++a)s.eyePosition[a]=f[12+a]/f[15];for(var l=f[15],a=0;a<3;++a)l+=this.lightPosition[a]*f[4*a+3];for(var a=0;a<3;++a){for(var c=f[12+a],p=0;p<3;++p)c+=f[4*p+a]*this.lightPosition[p];s.lightPosition[a]=c/l}if(this.triangleCount>0){var d=this.triShader;d.bind(),d.uniforms=s,this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var d=this.lineShader;d.bind(),d.uniforms=s,this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var d=this.pointShader;d.bind(),d.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var d=this.contourShader;d.bind(),d.uniforms=s,this.contourVAO.bind(),e.drawArrays(e.LINES,0,this.contourCount),this.contourVAO.unbind()}},M.drawPick=function(t){t=t||{};for(var e=this.gl,r=t.model||w,n=t.view||w,i=t.projection||w,o=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],a=0;a<3;++a)o[0][a]=Math.max(o[0][a],this.clipBounds[0][a]),o[1][a]=Math.min(o[1][a],this.clipBounds[1][a]);this._model=[].slice.call(r),this._view=[].slice.call(n),this._projection=[].slice.call(i),this._resolution=[e.drawingBufferWidth,e.drawingBufferHeight];var s={model:r,view:n,projection:i,clipBounds:o,pickId:this.pickId/255},u=this.pickShader;if(u.bind(),u.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),e.drawArrays(e.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),e.lineWidth(this.lineWidth*this.pixelRatio),e.drawArrays(e.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var u=this.pointPickShader;u.bind(),u.uniforms=s,this.pointVAO.bind(),e.drawArrays(e.POINTS,0,this.pointCount),this.pointVAO.unbind()}},M.pick=function(t){if(!t||t.id!==this.pickId)return null;for(var e=t.value[0]+256*t.value[1]+65536*t.value[2],r=this.cells[e],n=this.positions,i=Array(r.length),o=0;o<r.length;++o)i[o]=n[r[o]];var a=t.coord[0],s=t.coord[1];if(!this.pickVertex){var u=this.positions[r[0]],h=this.positions[r[1]],f=this.positions[r[2]],l=[(u[0]+h[0]+f[0])/3,(u[1]+h[1]+f[1])/3,(u[2]+h[2]+f[2])/3];return{_cellCenter:!0,position:[a,s],index:e,cell:r,cellId:e,intensity:this.intensity[e],dataCoordinate:l}}var c=v(i,[a*this.pixelRatio,this._resolution[1]-s*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!c)return null;for(var p=c[2],d=0,o=0;o<r.length;++o)d+=p[o]*this.intensity[r[o]];return{position:c[1],index:r[c[0]],cell:r,cellId:e,intensity:d,dataCoordinate:this.positions[r[c[0]]]}},M.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},t.exports=function(t,e){if(1==arguments.length&&(t=(e=t).gl),!(t.getExtension("OES_standard_derivatives")||t.getExtension("MOZ_OES_standard_derivatives")||t.getExtension("WEBKIT_OES_standard_derivatives")))throw Error("derivatives not supported");var r,s,u,h,l,c,p=((r=n(t,g.vertex,g.fragment)).attributes.position.location=0,r.attributes.color.location=2,r.attributes.uv.location=3,r.attributes.normal.location=4,r),d=((s=n(t,m.vertex,m.fragment)).attributes.position.location=0,s.attributes.color.location=2,s.attributes.uv.location=3,s),v=((u=n(t,b.vertex,b.fragment)).attributes.position.location=0,u.attributes.color.location=2,u.attributes.uv.location=3,u.attributes.pointSize.location=4,u),w=((h=n(t,y.vertex,y.fragment)).attributes.position.location=0,h.attributes.id.location=1,h),M=((l=n(t,x.vertex,x.fragment)).attributes.position.location=0,l.attributes.id.location=1,l.attributes.pointSize.location=4,l),A=((c=n(t,_.vertex,_.fragment)).attributes.position.location=0,c),T=a(t,f(new Uint8Array([255,255,255,255]),[1,1,4]));T.generateMipmap(),T.minFilter=t.LINEAR_MIPMAP_LINEAR,T.magFilter=t.LINEAR;var R=i(t),O=i(t),S=i(t),k=i(t),C=i(t),L=o(t,[{buffer:R,type:t.FLOAT,size:3},{buffer:C,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:t.FLOAT,size:4},{buffer:S,type:t.FLOAT,size:2},{buffer:k,type:t.FLOAT,size:3}]),I=i(t),P=i(t),B=i(t),F=i(t),N=o(t,[{buffer:I,type:t.FLOAT,size:3},{buffer:F,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:P,type:t.FLOAT,size:4},{buffer:B,type:t.FLOAT,size:2}]),D=i(t),U=i(t),z=i(t),j=i(t),V=i(t),G=o(t,[{buffer:D,type:t.FLOAT,size:3},{buffer:V,type:t.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:U,type:t.FLOAT,size:4},{buffer:z,type:t.FLOAT,size:2},{buffer:j,type:t.FLOAT,size:1}]),H=i(t),W=o(t,[{buffer:H,type:t.FLOAT,size:3}]),X=new E(t,T,p,d,v,w,M,A,R,C,O,S,k,L,I,F,P,B,N,D,V,U,z,j,G,H,W);return X.update(e),X}},8120:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl;return new u(t,o(e,[0,0,0,1,1,0,1,1]),a(e,s.boxVert,s.lineFrag))};var n,i,o=r(2762),a=r(9405),s=r(3603);function u(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var h=u.prototype;h.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},h.drawBox=(n=[0,0],i=[0,0],function(t,e,r,o,a){var s=this.plot,u=this.shader,h=s.gl;n[0]=t,n[1]=e,i[0]=r,i[1]=o,u.uniforms.lo=n,u.uniforms.hi=i,u.uniforms.color=a,h.drawArrays(h.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1913:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl;return new b(t,d(e),v(e,m.gridVert,m.gridFrag),v(e,m.tickVert,m.gridFrag))};var n,i,o,a,s,u,h,f,l,c,p,d=r(2762),v=r(9405),g=r(2478),m=r(3603);function b(t,e,r,n){this.plot=t,this.vbo=e,this.shader=r,this.tickShader=n,this.ticks=[[],[]]}function y(t,e){return t-e}var x=b.prototype;x.draw=(n=[0,0],i=[0,0],o=[0,0],function(){for(var t=this.plot,e=this.vbo,r=this.shader,a=this.ticks,s=t.gl,u=t._tickBounds,h=t.dataBox,f=t.viewBox,l=t.gridLineWidth,c=t.gridLineColor,p=t.gridLineEnable,d=t.pixelRatio,v=0;v<2;++v){var g=u[v],m=u[v+2]-g,b=.5*(h[v+2]+h[v]),y=h[v+2]-h[v];i[v]=2*m/y,n[v]=2*(g-b)/y}r.bind(),e.bind(),r.attributes.dataCoord.pointer(),r.uniforms.dataShift=n,r.uniforms.dataScale=i;for(var x=0,v=0;v<2;++v){o[0]=o[1]=0,o[v]=1,r.uniforms.dataAxis=o,r.uniforms.lineWidth=l[v]/(f[v+2]-f[v])*d,r.uniforms.color=c[v];var _=6*a[v].length;p[v]&&_&&s.drawArrays(s.TRIANGLES,x,_),x+=_}}),x.drawTickMarks=(a=[0,0],s=[0,0],u=[1,0],h=[0,1],f=[0,0],l=[0,0],function(){for(var t=this.plot,e=this.vbo,r=this.tickShader,n=this.ticks,i=t.gl,o=t._tickBounds,c=t.dataBox,p=t.viewBox,d=t.pixelRatio,v=t.screenBox,m=v[2]-v[0],b=v[3]-v[1],x=p[2]-p[0],_=p[3]-p[1],w=0;w<2;++w){var E=o[w],M=o[w+2]-E,A=.5*(c[w+2]+c[w]),T=c[w+2]-c[w];s[w]=2*M/T,a[w]=2*(E-A)/T}s[0]*=x/m,a[0]*=x/m,s[1]*=_/b,a[1]*=_/b,r.bind(),e.bind(),r.attributes.dataCoord.pointer();var R=r.uniforms;R.dataShift=a,R.dataScale=s;var O=t.tickMarkLength,S=t.tickMarkWidth,k=t.tickMarkColor,C=6*n[0].length,L=Math.min(g.ge(n[0],(c[0]-o[0])/(o[2]-o[0]),y),n[0].length),I=Math.min(g.gt(n[0],(c[2]-o[0])/(o[2]-o[0]),y),n[0].length),P=0+6*L,B=6*Math.max(0,I-L),F=Math.min(g.ge(n[1],(c[1]-o[1])/(o[3]-o[1]),y),n[1].length),N=Math.min(g.gt(n[1],(c[3]-o[1])/(o[3]-o[1]),y),n[1].length),D=C+6*F,U=6*Math.max(0,N-F);f[0]=2*(p[0]-O[1])/m-1,f[1]=(p[3]+p[1])/b-1,l[0]=O[1]*d/m,l[1]=S[1]*d/b,U&&(R.color=k[1],R.tickScale=l,R.dataAxis=h,R.screenOffset=f,i.drawArrays(i.TRIANGLES,D,U)),f[0]=(p[2]+p[0])/m-1,f[1]=2*(p[1]-O[0])/b-1,l[0]=S[0]*d/m,l[1]=O[0]*d/b,B&&(R.color=k[0],R.tickScale=l,R.dataAxis=u,R.screenOffset=f,i.drawArrays(i.TRIANGLES,P,B)),f[0]=2*(p[2]+O[3])/m-1,f[1]=(p[3]+p[1])/b-1,l[0]=O[3]*d/m,l[1]=S[3]*d/b,U&&(R.color=k[3],R.tickScale=l,R.dataAxis=h,R.screenOffset=f,i.drawArrays(i.TRIANGLES,D,U)),f[0]=(p[2]+p[0])/m-1,f[1]=2*(p[3]+O[2])/b-1,l[0]=S[2]*d/m,l[1]=O[2]*d/b,B&&(R.color=k[2],R.tickScale=l,R.dataAxis=u,R.screenOffset=f,i.drawArrays(i.TRIANGLES,P,B))}),x.update=(c=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1],function(t){var e=t.ticks,r=t.bounds,n=new Float32Array(18*(e[0].length+e[1].length));this.plot.zeroLineEnable;for(var i=0,o=[[],[]],a=0;a<2;++a)for(var s=o[a],u=e[a],h=r[a],f=r[a+2],l=0;l<u.length;++l){var d=(u[l].x-h)/(f-h);s.push(d);for(var v=0;v<6;++v)n[i++]=d,n[i++]=c[v],n[i++]=p[v]}this.ticks=o,this.vbo.update(n)}),x.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},4747:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl;return new u(t,o(e,[-1,-1,-1,1,1,-1,1,1]),a(e,s.lineVert,s.lineFrag))};var n,i,o=r(2762),a=r(9405),s=r(3603);function u(t,e,r){this.plot=t,this.vbo=e,this.shader=r}var h=u.prototype;h.bind=function(){var t=this.shader;this.vbo.bind(),this.shader.bind(),t.attributes.coord.pointer(),t.uniforms.screenBox=this.plot.screenBox},h.drawLine=(n=[0,0],i=[0,0],function(t,e,r,o,a,s){var u=this.plot,h=this.shader,f=u.gl;n[0]=t,n[1]=e,i[0]=r,i[1]=o,h.uniforms.start=n,h.uniforms.end=i,h.uniforms.width=a*u.pixelRatio,h.uniforms.color=s,f.drawArrays(f.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},3603:function(t,e,r){"use strict";var n=r(3236),i=n(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);t.exports={lineVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:i,textVert:n(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:i,gridVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:i,boxVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},2142:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl;return new g(t,l(e),c(e,v.textVert,v.textFrag))};var n,i,o,a,s,u,h,f,l=r(2762),c=r(9405),p=r(529),d=r(2478),v=r(3603);function g(t,e,r){this.plot=t,this.vbo=e,this.shader=r,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var m=g.prototype;m.drawTicks=(n=[0,0],i=[0,0],o=[0,0],function(t){var e=this.plot,r=this.shader,a=this.tickX[t],s=this.tickOffset[t],u=e.gl,h=e.viewBox,f=e.dataBox,l=e.screenBox,c=e.pixelRatio,p=e.tickEnable,v=e.tickPad,g=e.tickColor,m=e.tickAngle,b=e.labelEnable,y=e.labelPad,x=e.labelColor,_=e.labelAngle,w=this.labelOffset[t],E=this.labelCount[t],M=d.lt(a,f[t]),A=d.le(a,f[t+2]);n[0]=n[1]=0,n[t]=1,i[t]=(h[2+t]+h[t])/(l[2+t]-l[t])-1;var T=2/l[2+(1^t)]-l[1^t];i[1^t]=T*h[1^t]-1,p[t]&&(i[1^t]-=T*c*v[t],M<A&&s[A]>s[M]&&(r.uniforms.dataAxis=n,r.uniforms.screenOffset=i,r.uniforms.color=g[t],r.uniforms.angle=m[t],u.drawArrays(u.TRIANGLES,s[M],s[A]-s[M]))),b[t]&&E&&(i[1^t]-=T*c*y[t],r.uniforms.dataAxis=o,r.uniforms.screenOffset=i,r.uniforms.color=x[t],r.uniforms.angle=_[t],u.drawArrays(u.TRIANGLES,w,E)),i[1^t]=T*h[2+(1^t)]-1,p[t+2]&&(i[1^t]+=T*c*v[t+2],M<A&&s[A]>s[M]&&(r.uniforms.dataAxis=n,r.uniforms.screenOffset=i,r.uniforms.color=g[t+2],r.uniforms.angle=m[t+2],u.drawArrays(u.TRIANGLES,s[M],s[A]-s[M]))),b[t+2]&&E&&(i[1^t]+=T*c*y[t+2],r.uniforms.dataAxis=o,r.uniforms.screenOffset=i,r.uniforms.color=x[t+2],r.uniforms.angle=_[t+2],u.drawArrays(u.TRIANGLES,w,E))}),m.drawTitle=(a=[0,0],s=[0,0],function(){var t=this.plot,e=this.shader,r=t.gl,n=t.screenBox,i=t.titleCenter,o=t.titleAngle,u=t.titleColor,h=t.pixelRatio;if(this.titleCount){for(var f=0;f<2;++f)s[f]=2*(i[f]*h-n[f])/(n[2+f]-n[f])-1;e.bind(),e.uniforms.dataAxis=a,e.uniforms.screenOffset=s,e.uniforms.angle=o,e.uniforms.color=u,r.drawArrays(r.TRIANGLES,this.titleOffset,this.titleCount)}}),m.bind=(u=[0,0],h=[0,0],f=[0,0],function(){var t=this.plot,e=this.shader,r=t._tickBounds,n=t.dataBox,i=t.screenBox,o=t.viewBox;e.bind();for(var a=0;a<2;++a){var s=r[a],l=r[a+2]-s,c=.5*(n[a+2]+n[a]),p=n[a+2]-n[a],d=o[a],v=o[a+2]-d,g=i[a],m=i[a+2]-g;h[a]=2*l/p*v/m,u[a]=2*(s-c)/p*v/m}f[1]=2*t.pixelRatio/(i[3]-i[1]),f[0]=f[1]*(i[3]-i[1])/(i[2]-i[0]),e.uniforms.dataScale=h,e.uniforms.dataShift=u,e.uniforms.textScale=f,this.vbo.bind(),e.attributes.textCoordinate.pointer()}),m.update=function(t){var e,r,n,i,o,a=[],s=t.ticks,u=t.bounds;for(o=0;o<2;++o){var h=[Math.floor(a.length/3)],f=[-1/0],l=s[o];for(e=0;e<l.length;++e){var c=l[e],d=c.x,v=c.text,g=c.font||"sans-serif",m=c.fontStyle||"normal",b=c.fontWeight||"normal",y=c.fontVariant||"normal";i=c.fontSize||12;for(var x=1/(u[o+2]-u[o]),_=u[o],w=v.split("\n"),E=0;E<w.length;E++)for(r=0,n=p(g,w[E],{fontStyle:m,fontWeight:b,fontVariant:y}).data;r<n.length;r+=2)a.push(n[r]*i,-n[r+1]*i-E*i*1.2,(d-_)*x);h.push(Math.floor(a.length/3)),f.push(d)}this.tickOffset[o]=h,this.tickX[o]=f}for(o=0;o<2;++o){for(e=0,this.labelOffset[o]=Math.floor(a.length/3),n=p(t.labelFont[o],t.labels[o],{fontStyle:t.labelFontStyle[o],fontWeight:t.labelFontWeight[o],fontVariant:t.labelFontVariant[o],textAlign:"center"}).data,i=t.labelSize[o];e<n.length;e+=2)a.push(n[e]*i,-n[e+1]*i,0);this.labelCount[o]=Math.floor(a.length/3)-this.labelOffset[o]}for(e=0,this.titleOffset=Math.floor(a.length/3),n=p(t.titleFont,t.title,{fontStyle:t.titleFontStyle,fontWeight:t.titleFontWeight,fontVariant:t.titleFontVariant}).data,i=t.titleSize;e<n.length;e+=2)a.push(n[e]*i,-n[e+1]*i,0);this.titleCount=Math.floor(a.length/3)-this.titleOffset,this.vbo.update(a)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},1850:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl,r=n(e,[e.drawingBufferWidth,e.drawingBufferHeight]),h=new u(e,r);return h.grid=i(h),h.text=o(h),h.line=a(h),h.box=s(h),h.update(t),h};var n=r(3589),i=r(1913),o=r(2142),a=r(4747),s=r(8120);function u(t,e){this.gl=t,this.pickBuffer=e,this.screenBox=[0,0,t.drawingBufferWidth,t.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=u.prototype;function f(t){for(var e=t.slice(),r=0;r<e.length;++r)e[r]=e[r].slice();return e}function l(t,e){return t.x-e.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var t=this.gl,e=this.screenBox,r=this.viewBox,n=this.dataBox,i=this.pixelRatio,o=this.grid,a=this.line,s=this.text,u=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,t.bindFramebuffer(t.FRAMEBUFFER,null),t.enable(t.SCISSOR_TEST),t.disable(t.DEPTH_TEST),t.depthFunc(t.LESS),t.depthMask(!1),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD,t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.borderColor){t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]);var h=this.borderColor;t.clearColor(h[0]*h[3],h[1]*h[3],h[2]*h[3],h[3]),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}t.scissor(r[0],r[1],r[2]-r[0],r[3]-r[1]),t.viewport(r[0],r[1],r[2]-r[0],r[3]-r[1]);var f=this.backgroundColor;t.clearColor(f[0]*f[3],f[1]*f[3],f[2]*f[3],f[3]),t.clear(t.COLOR_BUFFER_BIT),o.draw();var l=this.zeroLineEnable,c=this.zeroLineColor,p=this.zeroLineWidth;if(l[0]||l[1]){a.bind();for(var d=0;d<2;++d)if(l[d]&&n[d]<=0&&n[d+2]>=0){var v=e[d]-n[d]*(e[d+2]-e[d])/(n[d+2]-n[d]);0===d?a.drawLine(v,e[1],v,e[3],p[d],c[d]):a.drawLine(e[0],v,e[2],v,p[d],c[d])}}for(var d=0;d<u.length;++d)u[d].draw();t.viewport(e[0],e[1],e[2]-e[0],e[3]-e[1]),t.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),this.grid.drawTickMarks(),a.bind();var g=this.borderLineEnable,m=this.borderLineWidth,b=this.borderLineColor;g[1]&&a.drawLine(r[0],r[1]-.5*m[1]*i,r[0],r[3]+.5*m[3]*i,m[1],b[1]),g[0]&&a.drawLine(r[0]-.5*m[0]*i,r[1],r[2]+.5*m[2]*i,r[1],m[0],b[0]),g[3]&&a.drawLine(r[2],r[1]-.5*m[1]*i,r[2],r[3]+.5*m[3]*i,m[3],b[3]),g[2]&&a.drawLine(r[0]-.5*m[0]*i,r[3],r[2]+.5*m[2]*i,r[3],m[2],b[2]),s.bind();for(var d=0;d<2;++d)s.drawTicks(d);this.titleEnable&&s.drawTitle();for(var y=this.overlays,d=0;d<y.length;++d)y[d].draw();t.disable(t.SCISSOR_TEST),t.disable(t.BLEND),t.depthMask(!0)}},h.drawPick=function(){if(!this.static){var t=this.pickBuffer;this.gl,this._pickTimeout=null,t.begin();for(var e=1,r=this.objects,n=0;n<r.length;++n)e=r[n].drawPick(e);t.end()}},h.pick=function(t,e){if(!this.static){var r=this.pixelRatio,n=this.pickPixelRatio,i=this.viewBox,o=0|Math.round((t-i[0]/r)*n),a=0|Math.round((e-i[1]/r)*n),s=this.pickBuffer.query(o,a,this.pickRadius);if(!s)return null;for(var u=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),h=this.objects,f=0;f<h.length;++f){var l=h[f].pick(o,a,u);if(l)return l}return null}},h.setScreenBox=function(t){var e=this.screenBox,r=this.pixelRatio;e[0]=0|Math.round(t[0]*r),e[1]=0|Math.round(t[1]*r),e[2]=0|Math.round(t[2]*r),e[3]=0|Math.round(t[3]*r),this.setDirty()},h.setDataBox=function(t){var e=this.dataBox;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3])&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],this.setDirty())},h.setViewBox=function(t){var e=this.pixelRatio,r=this.viewBox;r[0]=0|Math.round(t[0]*e),r[1]=0|Math.round(t[1]*e),r[2]=0|Math.round(t[2]*e),r[3]=0|Math.round(t[3]*e);var n=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((t[2]-t[0])*n),0|Math.round((t[3]-t[1])*n)],this.setDirty()},h.update=function(t){t=t||{};var e=this.gl;this.pixelRatio=t.pixelRatio||1;var r=this.pixelRatio;this.pickPixelRatio=Math.max(r,1),this.setScreenBox(t.screenBox||[0,0,e.drawingBufferWidth/r,e.drawingBufferHeight/r]),this.screenBox,this.setViewBox(t.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/r,.125*(this.screenBox[3]-this.screenBox[1])/r,.875*(this.screenBox[2]-this.screenBox[0])/r,.875*(this.screenBox[3]-this.screenBox[1])/r]);var n=this.viewBox,i=(n[2]-n[0])/(n[3]-n[1]);this.setDataBox(t.dataBox||[-10,-10/i,10,10/i]),this.borderColor=!1!==t.borderColor&&(t.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(t.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(t.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(t.gridLineWidth||[1,1]).slice(),this.gridLineColor=f(t.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(t.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(t.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=f(t.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(t.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(t.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=f(t.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(t.titleCenter||[.5*(n[0]+n[2])/r,(n[3]+120)/r]).slice(),this.titleEnable=!("titleEnable"in t)||!!t.titleEnable,this.titleAngle=t.titleAngle||0,this.titleColor=(t.titleColor||[0,0,0,1]).slice(),this.labelPad=(t.labelPad||[15,15,15,15]).slice(),this.labelAngle=(t.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(t.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=f(t.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(t.tickPad||[15,15,15,15]).slice(),this.tickAngle=(t.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(t.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=f(t.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(t.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(t.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=f(t.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var o=t.ticks||[[],[]],a=this._tickBounds;a[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(var s=0;s<2;++s){var u=o[s].slice(0);0!==u.length&&(u.sort(l),a[s]=Math.min(a[s],u[0].x),a[s+2]=Math.max(a[s+2],u[u.length-1].x))}this.grid.update({bounds:a,ticks:o}),this.text.update({bounds:a,ticks:o,labels:t.labels||["x","y"],labelSize:t.labelSize||[12,12],labelFont:t.labelFont||["sans-serif","sans-serif"],labelFontStyle:t.labelFontStyle||["normal","normal"],labelFontWeight:t.labelFontWeight||["normal","normal"],labelFontVariant:t.labelFontVariant||["normal","normal"],title:t.title||"",titleSize:t.titleSize||18,titleFont:t.titleFont||"sans-serif",titleFontStyle:t.titleFontStyle||"normal",titleFontWeight:t.titleFontWeight||"normal",titleFontVariant:t.titleFontVariant||"normal"}),this.static=!!t.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var t=this.objects.length-1;t>=0;--t)this.objects[t].dispose();this.objects.length=0;for(var t=this.overlays.length-1;t>=0;--t)this.overlays[t].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(t){0>this.objects.indexOf(t)&&(this.objects.push(t),this.setDirty())},h.removeObject=function(t){for(var e=this.objects,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setDirty();break}},h.addOverlay=function(t){0>this.overlays.indexOf(t)&&(this.overlays.push(t),this.setOverlayDirty())},h.removeOverlay=function(t){for(var e=this.overlays,r=0;r<e.length;++r)if(e[r]===t){e.splice(r,1),this.setOverlayDirty();break}}},4437:function(t,e,r){"use strict";t.exports=function(t,e){t=t||document.body;var r=[.01,1/0];"distanceLimits"in(e=e||{})&&(r[0]=e.distanceLimits[0],r[1]=e.distanceLimits[1]),"zoomMin"in e&&(r[0]=e.zoomMin),"zoomMax"in e&&(r[1]=e.zoomMax);var h=i({center:e.center||[0,0,0],up:e.up||[0,1,0],eye:e.eye||[0,0,10],mode:e.mode||"orbit",distanceLimits:r}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],l=0,c=t.clientWidth,p=t.clientHeight,d={keyBindingMode:"rotate",enableWheel:!0,view:h,element:t,delay:e.delay||16,rotateSpeed:e.rotateSpeed||1,zoomSpeed:e.zoomSpeed||1,translateSpeed:e.translateSpeed||1,flipX:!!e.flipX,flipY:!!e.flipY,modes:h.modes,_ortho:e._ortho||e.projection&&"orthographic"===e.projection.type||!1,tick:function(){var e=n(),r=this.delay;h.idle(e-r),h.recalcMatrix(e-2*r),h.flush(e-(100+2*r));for(var i=!0,o=h.computedMatrix,a=0;a<16;++a)i=i&&f[a]===o[a],f[a]=o[a];var s=t.clientWidth===c&&t.clientHeight===p;return(c=t.clientWidth,p=t.clientHeight,i)?!s:(l=Math.exp(h.computedRadius[0]),!0)},lookAt:function(t,e,r){h.lookAt(h.lastT(),t,e,r)},rotate:function(t,e,r){h.rotate(h.lastT(),t,e,r)},pan:function(t,e,r){h.pan(h.lastT(),t,e,r)},translate:function(t,e,r){h.translate(h.lastT(),t,e,r)}};return Object.defineProperties(d,{matrix:{get:function(){return h.computedMatrix},set:function(t){return h.setMatrix(h.lastT(),t),h.computedMatrix},enumerable:!0},mode:{get:function(){return h.getMode()},set:function(t){var e=h.computedUp.slice(),r=h.computedEye.slice(),i=h.computedCenter.slice();if(h.setMode(t),"turntable"===t){var o=n();h._active.lookAt(o,r,i,e),h._active.lookAt(o+500,r,i,[0,0,1]),h._active.flush(o)}return h.getMode()},enumerable:!0},center:{get:function(){return h.computedCenter},set:function(t){return h.lookAt(h.lastT(),null,t),h.computedCenter},enumerable:!0},eye:{get:function(){return h.computedEye},set:function(t){return h.lookAt(h.lastT(),t),h.computedEye},enumerable:!0},up:{get:function(){return h.computedUp},set:function(t){return h.lookAt(h.lastT(),null,null,t),h.computedUp},enumerable:!0},distance:{get:function(){return l},set:function(t){return h.setDistance(h.lastT(),t),t},enumerable:!0},distanceLimits:{get:function(){return h.getDistanceLimits(r)},set:function(t){return h.setDistanceLimits(t),t},enumerable:!0}}),t.addEventListener("contextmenu",function(t){return t.preventDefault(),!1}),d._lastX=-1,d._lastY=-1,d._lastMods={shift:!1,control:!1,alt:!1,meta:!1},d.enableMouseListeners=function(){function e(e,r,i,o){var a=d.keyBindingMode;if(!1!==a){var s=!!o.control,u=!!o.alt,f=!!o.shift,c=!!(1&e),p=1/t.clientHeight,v=p*(r-d._lastX),g=p*(i-d._lastY),m=d.flipX?1:-1,b=d.flipY?1:-1,y=Math.PI*d.rotateSpeed,x=n();if(-1!==d._lastX&&-1!==d._lastY&&(("rotate"!==a||!c||s||u||f)&&(!c||s||u||!f)||h.rotate(x,m*y*v,-b*y*g,0),("pan"!==a||!c||s||u||f)&&!(2&e)&&(!c||!s||u||f)||h.pan(x,-d.translateSpeed*v*l,d.translateSpeed*g*l,0),"zoom"===a&&c&&!s&&!u&&!f||4&e||c&&!s&&u&&!f)){var _=-d.zoomSpeed*g/window.innerHeight*(x-h.lastT())*100;h.pan(x,0,0,l*(Math.exp(_)-1))}return d._lastX=r,d._lastY=i,d._lastMods=o,!0}}d.mouseListener=o(t,e),t.addEventListener("touchstart",function(r){var n=s(r.changedTouches[0],t);e(0,n[0],n[1],d._lastMods),e(1,n[0],n[1],d._lastMods)},!!u&&{passive:!0}),t.addEventListener("touchmove",function(r){var n=s(r.changedTouches[0],t);e(1,n[0],n[1],d._lastMods),r.preventDefault()},!!u&&{passive:!1}),t.addEventListener("touchend",function(t){e(0,d._lastX,d._lastY,d._lastMods)},!!u&&{passive:!0}),d.wheelListener=a(t,function(t,e){if(!1!==d.keyBindingMode&&d.enableWheel){var r=d.flipX?1:-1,i=d.flipY?1:-1,o=n();if(Math.abs(t)>Math.abs(e))h.rotate(o,0,0,-t*r*Math.PI*d.rotateSpeed/window.innerWidth);else if(!d._ortho){var a=-d.zoomSpeed*i*e/window.innerHeight*(o-h.lastT())/20;h.pan(o,0,0,l*(Math.exp(a)-1))}}},!0)},d.enableMouseListeners(),d};var n=r(3025),i=r(6296),o=r(351),a=r(8512),s=r(24),u=r(7520)},799:function(t,e,r){var n=r(3236),i=r(9405),o=n(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);t.exports=function(t){return i(t,o,a,null,[{name:"position",type:"vec2"}])}},4100:function(t,e,r){"use strict";var n=r(4437),i=r(3837),o=r(5445),a=r(4449),s=r(3589),u=r(2260),h=r(7169),f=r(351),l=r(4772),c=r(4040),p=r(799),d=r(9216)({tablet:!0,featureDetect:!0});function v(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(t){return"boolean"!=typeof t||t}t.exports={createScene:function(t){(t=t||{}).camera=t.camera||{};var e=t.canvas;e||(e=document.createElement("canvas"),t.container?t.container.appendChild(e):document.body.appendChild(e));var r=t.gl;if(r||(t.glOptions&&(d=!!t.glOptions.preserveDrawingBuffer),r=function(t,e){var r=null;try{(r=t.getContext("webgl",e))||(r=t.getContext("experimental-webgl",e))}catch(t){return null}return r}(e,t.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:d})),!r)throw Error("webgl not supported");var m=t.bounds||[[-10,-10,-10],[10,10,10]],b=new v,y=u(r,r.drawingBufferWidth,r.drawingBufferHeight,{preferFloat:!d}),x=p(r),_=t.cameraObject&&!0===t.cameraObject._ortho||t.camera.projection&&"orthographic"===t.camera.projection.type||!1,w={eye:t.camera.eye||[2,0,0],center:t.camera.center||[0,0,0],up:t.camera.up||[0,1,0],zoomMin:t.camera.zoomMax||.1,zoomMax:t.camera.zoomMin||100,mode:t.camera.mode||"turntable",_ortho:_},E=t.axes||{},M=i(r,E);M.enable=!E.disable;var A=t.spikes||{},T=a(r,A),R=[],O=[],S=[],k=[],C=!0,L=!0,I={view:null,projection:Array(16),model:Array(16),_ortho:!1},L=!0,P=[r.drawingBufferWidth,r.drawingBufferHeight],B=t.cameraObject||n(e,w),F={gl:r,contextLost:!1,pixelRatio:t.pixelRatio||1,canvas:e,selection:b,camera:B,axes:M,axesPixels:null,spikes:T,bounds:m,objects:R,shape:P,aspect:t.aspectRatio||[1,1,1],pickRadius:t.pickRadius||10,zNear:t.zNear||.01,zFar:t.zFar||1e3,fovy:t.fovy||Math.PI/4,clearColor:t.clearColor||[0,0,0,0],autoResize:g(t.autoResize),autoBounds:g(t.autoBounds),autoScale:!!t.autoScale,autoCenter:g(t.autoCenter),clipToBounds:g(t.clipToBounds),snapToData:!!t.snapToData,onselect:t.onselect||null,onrender:t.onrender||null,onclick:t.onclick||null,cameraParams:I,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(t){this.aspect[0]=t.x,this.aspect[1]=t.y,this.aspect[2]=t.z,L=!0},setBounds:function(t,e){this.bounds[0][t]=e.min,this.bounds[1][t]=e.max},setClearColor:function(t){this.clearColor=t},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},N=[r.drawingBufferWidth/F.pixelRatio|0,r.drawingBufferHeight/F.pixelRatio|0];function D(){if(!F._stopped&&F.autoResize){var t=e.parentNode,r=1,n=1;t&&t!==document.body?(r=t.clientWidth,n=t.clientHeight):(r=window.innerWidth,n=window.innerHeight);var i=0|Math.ceil(r*F.pixelRatio),o=0|Math.ceil(n*F.pixelRatio);if(i!==e.width||o!==e.height){e.width=i,e.height=o;var a=e.style;a.position=a.position||"absolute",a.left="0px",a.top="0px",a.width=r+"px",a.height=n+"px",C=!0}}}function U(){for(var t=R.length,e=k.length,n=0;n<e;++n)S[n]=0;i:for(var n=0;n<t;++n){var i=R[n],o=i.pickSlots;if(!o){O[n]=-1;continue}for(var a=0;a<e;++a)if(S[a]+o<255){O[n]=a,i.setPickBase(S[a]+1),S[a]+=o;continue i}var u=s(r,P);O[n]=e,k.push(u),S.push(o),i.setPickBase(1),e+=1}for(;e>0&&0===S[e-1];)S.pop(),k.pop().dispose()}function z(){if(F.contextLost)return!0;r.isContextLost()&&(F.contextLost=!0,F.mouseListener.enabled=!1,F.selection.object=null,F.oncontextloss&&F.oncontextloss())}F.autoResize&&D(),window.addEventListener("resize",D),F.update=function(t){F._stopped||(t=t||{},C=!0,L=!0)},F.add=function(t){F._stopped||(t.axes=M,R.push(t),O.push(-1),C=!0,L=!0,U())},F.remove=function(t){if(!F._stopped){var e=R.indexOf(t);e<0||(R.splice(e,1),O.pop(),C=!0,L=!0,U())}},F.dispose=function(){if(!F._stopped&&(F._stopped=!0,window.removeEventListener("resize",D),e.removeEventListener("webglcontextlost",z),F.mouseListener.enabled=!1,!F.contextLost)){M.dispose(),T.dispose();for(var t=0;t<R.length;++t)R[t].dispose();y.dispose();for(var t=0;t<k.length;++t)k[t].dispose();x.dispose(),r=null,M=null,T=null,R=[]}},F._mouseRotating=!1,F._prevButtons=0,F.enableMouseListeners=function(){F.mouseListener=f(e,function(t,e,r){if(!F._stopped){var n=k.length,i=R.length,o=b.object;b.distance=1/0,b.mouse[0]=e,b.mouse[1]=r,b.object=null,b.screen=null,b.dataCoordinate=b.dataPosition=null;var a=!1;if(t&&F._prevButtons)F._mouseRotating=!0;else{F._mouseRotating&&(L=!0),F._mouseRotating=!1;for(var s=0;s<n;++s){var u=k[s].query(e,N[1]-r-1,F.pickRadius);if(u){if(u.distance>b.distance)continue;for(var h=0;h<i;++h){var f=R[h];if(O[h]===s){var l=f.pick(u);l&&(b.buttons=t,b.screen=u.coord,b.distance=u.distance,b.object=f,b.index=l.distance,b.dataPosition=l.position,b.dataCoordinate=l.dataCoordinate,b.data=l,a=!0)}}}}}o&&o!==b.object&&(o.highlight&&o.highlight(null),C=!0),b.object&&(b.object.highlight&&b.object.highlight(b.data),C=!0),(a=a||b.object!==o)&&F.onselect&&F.onselect(b),1&t&&!(1&F._prevButtons)&&F.onclick&&F.onclick(b),F._prevButtons=t}})},e.addEventListener("webglcontextlost",z);var j=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],V=[j[0].slice(),j[1].slice()];function G(){if(!z()){D();var t=F.camera.tick();I.view=F.camera.matrix,C=C||t,L=L||t,M.pixelRatio=F.pixelRatio,T.pixelRatio=F.pixelRatio;var e=R.length,n=j[0],i=j[1];n[0]=n[1]=n[2]=1/0,i[0]=i[1]=i[2]=-1/0;for(var a=0;a<e;++a){var s=R[a];s.pixelRatio=F.pixelRatio,s.axes=F.axes,C=C||!!s.dirty,L=L||!!s.dirty;var u=s.bounds;if(u)for(var f=u[0],p=u[1],d=0;d<3;++d)n[d]=Math.min(n[d],f[d]),i[d]=Math.max(i[d],p[d])}var v=F.bounds;if(F.autoBounds)for(var d=0;d<3;++d){if(i[d]<n[d])n[d]=-1,i[d]=1;else{n[d]===i[d]&&(n[d]-=1,i[d]+=1);var g=.05*(i[d]-n[d]);n[d]=n[d]-g,i[d]=i[d]+g}v[0][d]=n[d],v[1][d]=i[d]}for(var m=!1,d=0;d<3;++d)m=m||V[0][d]!==v[0][d]||V[1][d]!==v[1][d],V[0][d]=v[0][d],V[1][d]=v[1][d];if(L=L||m,C=C||m){if(m){for(var w=[0,0,0],a=0;a<3;++a)w[a]=function(t){var e=Math.round(Math.log(Math.abs(t))/Math.log(10));if(e<0){var r=Math.round(Math.pow(10,-e));return Math.ceil(t*r)/r}if(e>0){var r=Math.round(Math.pow(10,e));return Math.ceil(t/r)*r}return Math.ceil(t)}((v[1][a]-v[0][a])/10);M.autoTicks?M.update({bounds:v,tickSpacing:w}):M.update({bounds:v})}var E=r.drawingBufferWidth,A=r.drawingBufferHeight;P[0]=E,P[1]=A,N[0]=0|Math.max(E/F.pixelRatio,1),N[1]=0|Math.max(A/F.pixelRatio,1),function(t,e){var r=t.bounds,n=t.cameraParams,i=n.projection,o=n.model,a=t.gl.drawingBufferWidth,s=t.gl.drawingBufferHeight,u=t.zNear,h=t.zFar,f=t.fovy,p=a/s;e?(c(i,-p,p,-1,1,u,h),n._ortho=!0):(l(i,f,p,u,h),n._ortho=!1);for(var d=0;d<16;++d)o[d]=0;o[15]=1;for(var v=0,d=0;d<3;++d)v=Math.max(v,r[1][d]-r[0][d]);for(var d=0;d<3;++d)t.autoScale?o[5*d]=t.aspect[d]/(r[1][d]-r[0][d]):o[5*d]=1/v,t.autoCenter&&(o[12+d]=-(.5*o[5*d])*(r[0][d]+r[1][d]))}(F,_);for(var a=0;a<e;++a){var s=R[a];s.axesBounds=v,F.clipToBounds&&(s.clipBounds=v)}b.object&&(F.snapToData?T.position=b.dataCoordinate:T.position=b.dataPosition,T.bounds=v),L&&(L=!1,function(){if(!z()){r.colorMask(!0,!0,!0,!0),r.depthMask(!0),r.disable(r.BLEND),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL);for(var t=R.length,e=k.length,n=0;n<e;++n){var i=k[n];i.shape=N,i.begin();for(var o=0;o<t;++o)if(O[o]===n){var a=R[o];a.drawPick&&(a.pixelRatio=1,a.drawPick(I))}i.end()}}}()),F.axesPixels=o(F.axes,I,E,A),F.onrender&&F.onrender(),r.bindFramebuffer(r.FRAMEBUFFER,null),r.viewport(0,0,E,A),F.clearRGBA(),r.depthMask(!0),r.colorMask(!0,!0,!0,!0),r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL),r.disable(r.BLEND),r.disable(r.CULL_FACE);var S=!1;M.enable&&(S=S||M.isTransparent(),M.draw(I)),T.axes=M,b.object&&T.draw(I),r.disable(r.CULL_FACE);for(var a=0;a<e;++a){var s=R[a];s.axes=M,s.pixelRatio=F.pixelRatio,s.isOpaque&&s.isOpaque()&&s.draw(I),s.isTransparent&&s.isTransparent()&&(S=!0)}if(S){y.shape=P,y.bind(),r.clear(r.DEPTH_BUFFER_BIT),r.colorMask(!1,!1,!1,!1),r.depthMask(!0),r.depthFunc(r.LESS),M.enable&&M.isTransparent()&&M.drawTransparent(I);for(var a=0;a<e;++a){var s=R[a];s.isOpaque&&s.isOpaque()&&s.draw(I)}r.enable(r.BLEND),r.blendEquation(r.FUNC_ADD),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.colorMask(!0,!0,!0,!0),r.depthMask(!1),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),M.isTransparent()&&M.drawTransparent(I);for(var a=0;a<e;++a){var s=R[a];s.isTransparent&&s.isTransparent()&&s.drawTransparent(I)}r.bindFramebuffer(r.FRAMEBUFFER,null),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.disable(r.DEPTH_TEST),x.bind(),y.color[0].bind(0),x.uniforms.accumBuffer=0,h(r),r.disable(r.BLEND)}C=!1;for(var a=0;a<e;++a)R[a].dirty=!1}}}return F.enableMouseListeners(),!function t(){F._stopped||F.contextLost||(G(),requestAnimationFrame(t))}(),F.redraw=function(){F._stopped||(C=!0,G())},F},createCamera:n}},6640:function(t,e,r){var n=r(3236);e.pointVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),e.pointFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),e.pickVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),e.pickFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},4696:function(t,e,r){"use strict";var n,i,o=r(9405),a=r(2762),s=r(1888),u=r(6640);function h(t,e,r,n,i){this.plot=t,this.offsetBuffer=e,this.pickBuffer=r,this.shader=n,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}t.exports=function(t,e){var r=t.gl,n=new h(t,a(r),a(r),o(r,u.pointVertex,u.pointFragment),o(r,u.pickVertex,u.pickFragment));return n.update(e),t.addObject(n),n};var f=h.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(t){function e(e,r){return e in t?t[e]:r}t=t||{},this.sizeMin=e("sizeMin",.5),this.sizeMax=e("sizeMax",20),this.color=e("color",[1,0,0,1]).slice(),this.areaRatio=e("areaRatio",1),this.borderColor=e("borderColor",[0,0,0,1]).slice(),this.blend=e("blend",!1);var r,n=t.positions.length>>>1,i=t.positions instanceof Float32Array,o=t.idToIndex instanceof Int32Array&&t.idToIndex.length>=n,a=t.positions,u=i?a:s.mallocFloat32(a.length),h=o?t.idToIndex:s.mallocInt32(n);if(i||u.set(a),!o)for(u.set(a),r=0;r<n;r++)h[r]=r;this.points=a,this.offsetBuffer.update(u),this.pickBuffer.update(h),i||s.free(u),o||s.free(h),this.pointCount=n,this.pickOffset=0},f.unifiedDraw=(n=[1,0,0,0,1,0,0,0,1],i=[0,0,0,0],function(t){var e=void 0!==t,r=e?this.pickShader:this.shader,o=this.plot.gl,a=this.plot.dataBox;if(0===this.pointCount)return t;var s=a[2]-a[0],u=a[3]-a[1],h=function(t,e){var r,n=0,i=t.length>>>1;for(r=0;r<i;r++){var o=t[2*r],a=t[2*r+1];o>=e[0]&&o<=e[2]&&a>=e[1]&&a<=e[3]&&n++}return n}(this.points,a),f=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(h,.33333)));n[0]=2/s,n[4]=2/u,n[6]=-2*a[0]/s-1,n[7]=-2*a[1]/u-1,this.offsetBuffer.bind(),r.bind(),r.attributes.position.pointer(),r.uniforms.matrix=n,r.uniforms.color=this.color,r.uniforms.borderColor=this.borderColor,r.uniforms.pointCloud=f<5,r.uniforms.pointSize=f,r.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),e&&(i[0]=255&t,i[1]=t>>8&255,i[2]=t>>16&255,i[3]=t>>24&255,this.pickBuffer.bind(),r.attributes.pickId.pointer(o.UNSIGNED_BYTE),r.uniforms.pickOffset=i,this.pickOffset=t);var l=o.getParameter(o.BLEND),c=o.getParameter(o.DITHER);return l&&!this.blend&&o.disable(o.BLEND),c&&o.disable(o.DITHER),o.drawArrays(o.POINTS,0,this.pointCount),l&&!this.blend&&o.enable(o.BLEND),c&&o.enable(o.DITHER),t+this.pointCount}),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(t,e,r){var n=this.pickOffset,i=this.pointCount;if(r<n||r>=n+i)return null;var o=r-n,a=this.points;return{object:this,pointId:o,dataCoord:[a[2*o],a[2*o+1]]}}},783:function(t){t.exports=function(t,e,r,n){var i,o,a,s,u,h=e[0],f=e[1],l=e[2],c=e[3],p=r[0],d=r[1],v=r[2],g=r[3];return(o=h*p+f*d+l*v+c*g)<0&&(o=-o,p=-p,d=-d,v=-v,g=-g),1-o>1e-6?(a=Math.sin(i=Math.acos(o)),s=Math.sin((1-n)*i)/a,u=Math.sin(n*i)/a):(s=1-n,u=n),t[0]=s*h+u*p,t[1]=s*f+u*d,t[2]=s*l+u*v,t[3]=s*c+u*g,t}},5964:function(t){"use strict";t.exports=function(t){return t||0===t?t.toString():""}},9366:function(t,e,r){"use strict";var n=r(4359);t.exports=function(t,e,r){var o,a,s=[e.style,e.weight,e.variant,e.family].join("_"),u=i[s];if(u||(u=i[s]={}),t in u)return u[t];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:e.family,fontStyle:e.style,fontWeight:e.weight,fontVariant:e.variant,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};h.triangles=!0;var f=n(t,h);h.triangles=!1;var l=n(t,h);if(r&&1!==r){for(o=0;o<f.positions.length;++o)for(a=0;a<f.positions[o].length;++a)f.positions[o][a]/=r;for(o=0;o<l.positions.length;++o)for(a=0;a<l.positions[o].length;++a)l.positions[o][a]/=r}var c=[[1/0,1/0],[-1/0,-1/0]],p=l.positions.length;for(o=0;o<p;++o){var d=l.positions[o];for(a=0;a<2;++a)c[0][a]=Math.min(c[0][a],d[a]),c[1][a]=Math.max(c[1][a],d[a])}return u[t]=[f,l,c]};var i={}},1283:function(t,e,r){var n=r(9405),i=r(3236),o=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * (view * (model * vec4(position, 1)));\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * (view * (model * vec4(dataPosition, 1)));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),h=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),f=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],l={vertex:o,fragment:u,attributes:f},c={vertex:a,fragment:u,attributes:f},p={vertex:s,fragment:u,attributes:f},d={vertex:o,fragment:h,attributes:f},v={vertex:a,fragment:h,attributes:f},g={vertex:s,fragment:h,attributes:f};function m(t,e){var r=n(t,e),i=r.attributes;return i.position.location=0,i.color.location=1,i.glyph.location=2,i.id.location=3,r}e.createPerspective=function(t){return m(t,l)},e.createOrtho=function(t){return m(t,c)},e.createProject=function(t){return m(t,p)},e.createPickPerspective=function(t){return m(t,d)},e.createPickOrtho=function(t){return m(t,v)},e.createPickProject=function(t){return m(t,g)}},8418:function(t,e,r){"use strict";var n=r(5219),i=r(2762),o=r(8116),a=r(1888),s=r(6760),u=r(1283),h=r(9366),f=r(5964),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],c=ArrayBuffer,p=DataView;function d(t){return Array.isArray(t)||c.isView(t)&&!(t instanceof p)}function v(t,e){var r=t[0],n=t[1],i=t[2],o=t[3];return t[0]=e[0]*r+e[4]*n+e[8]*i+e[12]*o,t[1]=e[1]*r+e[5]*n+e[9]*i+e[13]*o,t[2]=e[2]*r+e[6]*n+e[10]*i+e[14]*o,t[3]=e[3]*r+e[7]*n+e[11]*i+e[15]*o,t}function g(t,e,r,n){return v(n,n,r),v(n,n,e),v(n,n,t)}function m(t,e){this.index=t,this.dataCoordinate=this.position=e}function b(t){return!0===t||t>1?1:t}function y(t,e,r,n,i,o,a,s,u,h,f,l){this.gl=t,this.pixelRatio=1,this.shader=e,this.orthoShader=r,this.projectShader=n,this.pointBuffer=i,this.colorBuffer=o,this.glyphBuffer=a,this.idBuffer=s,this.vao=u,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=h,this.pickOrthoShader=f,this.pickProjectShader=l,this.points=[],this._selectResult=new m(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}t.exports=function(t){var e=t.gl,r=u.createPerspective(e),n=u.createOrtho(e),a=u.createProject(e),s=u.createPickPerspective(e),h=u.createPickOrtho(e),f=u.createPickProject(e),l=i(e),c=i(e),p=i(e),d=i(e),v=o(e,[{buffer:l,size:3,type:e.FLOAT},{buffer:c,size:4,type:e.FLOAT},{buffer:p,size:2,type:e.FLOAT},{buffer:d,size:4,type:e.UNSIGNED_BYTE,normalized:!0}]),g=new y(e,r,n,a,l,c,p,d,v,s,h,f);return g.update(t),g};var x=y.prototype;x.pickSlots=1,x.setPickBase=function(t){this.pickId=t},x.isTransparent=function(){if(this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&this.projectHasAlpha)return!0;return!1},x.isOpaque=function(){if(!this.hasAlpha)return!0;for(var t=0;t<3;++t)if(this.axesProject[t]&&!this.projectHasAlpha)return!0;return!1};var _=[0,0],w=[0,0,0],E=[0,0,0],M=[0,0,0,1],A=[0,0,0,1],T=l.slice(),R=[0,0,0],O=[[0,0,0],[0,0,0]];function S(t){return t[0]=t[1]=t[2]=0,t}function k(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=1,t}function C(t,e,r,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[r]=n,t}var L=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function I(t,e,r,n,i,o,a){var u=r.gl;if((o===r.projectHasAlpha||a)&&function(t,e,r,n){var i,o=e.axesProject,a=e.gl,u=t.uniforms,h=r.model||l,f=r.view||l,c=r.projection||l,p=e.axesBounds,d=function(t){for(var e=0;e<2;++e)for(var r=0;r<3;++r)O[e][r]=Math.max(Math.min(t[e][r],1e8),-1e8);return O}(e.clipBounds);i=e.axes&&e.axes.lastCubeProps?e.axes.lastCubeProps.axis:[1,1,1],_[0]=2/a.drawingBufferWidth,_[1]=2/a.drawingBufferHeight,t.bind(),u.view=f,u.projection=c,u.screenSize=_,u.highlightId=e.highlightId,u.highlightScale=e.highlightScale,u.clipBounds=d,u.pickGroup=e.pickId/255,u.pixelRatio=n;for(var v=0;v<3;++v)if(o[v]){u.scale=e.projectScale[v],u.opacity=e.projectOpacity[v];for(var m=0;m<16;++m)T[m]=0;for(var m=0;m<4;++m)T[5*m]=1;T[5*v]=0,i[v]<0?T[12+v]=p[0][v]:T[12+v]=p[1][v],s(T,h,T),u.model=T;var b=(v+1)%3,y=(v+2)%3,x=S(w),L=S(E);x[b]=1,L[y]=1;var I=g(c,f,h,k(M,x)),P=g(c,f,h,k(A,L));if(Math.abs(I[1])>Math.abs(P[1])){var B=I;I=P,P=B,B=x,x=L,L=B;var F=b;b=y,y=F}I[0]<0&&(x[b]=-1),P[1]>0&&(L[y]=-1);for(var N=0,D=0,m=0;m<4;++m)N+=Math.pow(h[4*b+m],2),D+=Math.pow(h[4*y+m],2);x[b]/=Math.sqrt(N),L[y]/=Math.sqrt(D),u.axes[0]=x,u.axes[1]=L,u.fragClipBounds[0]=C(R,d[0],v,-1e8),u.fragClipBounds[1]=C(R,d[1],v,1e8),e.vao.bind(),e.vao.draw(a.TRIANGLES,e.vertexCount),e.lineWidth>0&&(a.lineWidth(e.lineWidth*n),e.vao.draw(a.LINES,e.lineVertexCount,e.vertexCount)),e.vao.unbind()}}(e,r,n,i),o===r.hasAlpha||a){t.bind();var h=t.uniforms;h.model=n.model||l,h.view=n.view||l,h.projection=n.projection||l,_[0]=2/u.drawingBufferWidth,_[1]=2/u.drawingBufferHeight,h.screenSize=_,h.highlightId=r.highlightId,h.highlightScale=r.highlightScale,h.fragClipBounds=L,h.clipBounds=r.axes.bounds,h.opacity=r.opacity,h.pickGroup=r.pickId/255,h.pixelRatio=i,r.vao.bind(),r.vao.draw(u.TRIANGLES,r.vertexCount),r.lineWidth>0&&(u.lineWidth(r.lineWidth*i),r.vao.draw(u.LINES,r.lineVertexCount,r.vertexCount)),r.vao.unbind()}}function P(t,e,r,i){o=f(o=d(t)?e<t.length?t[e]:void 0:t);var o,a=!0;n(o)&&(o="",a=!1),r||(r={});var s=r.family;d(s)&&(s=s[e]),s||(s="normal");var u=r.weight;d(u)&&(u=u[e]),u||(u="normal");var l=r.style;d(l)&&(l=l[e]),l||(l="normal");var c=r.variant;d(c)&&(c=c[e]),c||(c="normal");var p=(h(o,{family:s,weight:u,style:l,variant:c},i),h(o,r,i));return{mesh:p[0],lines:p[1],bounds:p[2],visible:a}}x.draw=function(t){I(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!1,!1)},x.drawTransparent=function(t){I(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,t,this.pixelRatio,!0,!1)},x.drawPick=function(t){I(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,t,1,!0,!0)},x.pick=function(t){if(!t||t.id!==this.pickId)return null;var e=t.value[2]+(t.value[1]<<8)+(t.value[0]<<16);if(e>=this.pointCount||e<0)return null;var r=this.points[e],n=this._selectResult;n.index=e;for(var i=0;i<3;++i)n.position[i]=n.dataCoordinate[i]=r[i];return n},x.highlight=function(t){if(t){var e=t.index;this.highlightId=[(255&e)/255,(e>>8&255)/255,(e>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},x.update=function(t){if("perspective"in(t=t||{})&&(this.useOrtho=!t.perspective),"orthographic"in t&&(this.useOrtho=!!t.orthographic),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"project"in t){if(d(t.project))this.axesProject=t.project;else{var e=!!t.project;this.axesProject=[e,e,e]}}if("projectScale"in t){if(d(t.projectScale))this.projectScale=t.projectScale.slice();else{var r=+t.projectScale;this.projectScale=[r,r,r]}}if(this.projectHasAlpha=!1,"projectOpacity"in t){if(d(t.projectOpacity))this.projectOpacity=t.projectOpacity.slice();else{var r=+t.projectOpacity;this.projectOpacity=[r,r,r]}for(var n=0;n<3;++n)this.projectOpacity[n]=b(this.projectOpacity[n]),this.projectOpacity[n]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in t&&(this.opacity=b(t.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var i=t.position,o={family:t.font||"normal",style:t.fontStyle||"normal",weight:t.fontWeight||"normal",variant:t.fontVariant||"normal"},s=t.alignment||[0,0];if(2===s.length)U=s[0],z=s[1];else{U=[],z=[];for(var n=0;n<s.length;++n)U[n]=s[n][0],z[n]=s[n][1]}var u=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0],f=t.glyph,l=t.color,c=t.size,p=t.angle,v=t.lineColor,g=-1,m=0,y=0,x=0;if(i.length){x=i.length;o:for(var n=0;n<x;++n){for(var _=i[n],w=0;w<3;++w)if(isNaN(_[w])||!isFinite(_[w]))continue o;var E=P(f,n,o,this.pixelRatio),M=E.mesh,A=E.lines,T=E.bounds;m+=3*M.cells.length,y+=2*A.edges.length}}var R=m+y,O=a.mallocFloat(3*R),S=a.mallocFloat(4*R),k=a.mallocFloat(2*R),C=a.mallocUint32(R);if(R>0){var L=0,I=m,B=[0,0,0,1],F=[0,0,0,1],N=d(l)&&d(l[0]),D=d(v)&&d(v[0]);n:for(var n=0;n<x;++n){g+=1;for(var U,z,j,_=i[n],w=0;w<3;++w){if(isNaN(_[w])||!isFinite(_[w]))continue n;h[w]=Math.max(h[w],_[w]),u[w]=Math.min(u[w],_[w])}var E=P(f,n,o,this.pixelRatio),M=E.mesh,A=E.lines,T=E.bounds,V=E.visible;if(V){if(d(l)){if(3===(j=N?n<l.length?l[n]:[0,0,0,0]:l).length){for(var w=0;w<3;++w)B[w]=j[w];B[3]=1}else if(4===j.length){for(var w=0;w<4;++w)B[w]=j[w];!this.hasAlpha&&j[3]<1&&(this.hasAlpha=!0)}}else B[0]=B[1]=B[2]=0,B[3]=1}else B=[1,1,1,0];if(V){if(d(v)){if(3===(j=D?n<v.length?v[n]:[0,0,0,0]:v).length){for(var w=0;w<3;++w)F[w]=j[w];F[w]=1}else if(4===j.length){for(var w=0;w<4;++w)F[w]=j[w];!this.hasAlpha&&j[3]<1&&(this.hasAlpha=!0)}}else F[0]=F[1]=F[2]=0,F[3]=1}else F=[1,1,1,0];var G=.5;V?d(c)?G=n<c.length?+c[n]:12:c?G=+c:this.useOrtho&&(G=12):G=0;var H=0;d(p)?H=n<p.length?+p[n]:0:p&&(H=+p);for(var W=Math.cos(H),X=Math.sin(H),_=i[n],w=0;w<3;++w)h[w]=Math.max(h[w],_[w]),u[w]=Math.min(u[w],_[w]);var Y=z,q=0;d(U)?q=n<U.length?U[n]:0:U&&(q=U);var Y=0;d(z)?Y=n<z.length?z[n]:0:z&&(Y=z),q*=q>0?1-T[0][0]:q<0?1+T[1][0]:1,Y*=Y>0?1-T[0][1]:Y<0?1+T[1][1]:1;for(var Z=[q,Y],K=M.cells||[],Q=M.positions||[],w=0;w<K.length;++w)for(var J=K[w],$=0;$<3;++$){for(var tt=0;tt<3;++tt)O[3*L+tt]=_[tt];for(var tt=0;tt<4;++tt)S[4*L+tt]=B[tt];C[L]=g;var te=Q[J[$]];k[2*L]=G*(W*te[0]-X*te[1]+Z[0]),k[2*L+1]=G*(X*te[0]+W*te[1]+Z[1]),L+=1}for(var K=A.edges,Q=A.positions,w=0;w<K.length;++w)for(var J=K[w],$=0;$<2;++$){for(var tt=0;tt<3;++tt)O[3*I+tt]=_[tt];for(var tt=0;tt<4;++tt)S[4*I+tt]=F[tt];C[I]=g;var te=Q[J[$]];k[2*I]=G*(W*te[0]-X*te[1]+Z[0]),k[2*I+1]=G*(X*te[0]+W*te[1]+Z[1]),I+=1}}}this.bounds=[u,h],this.points=i,this.pointCount=i.length,this.vertexCount=m,this.lineVertexCount=y,this.pointBuffer.update(O),this.colorBuffer.update(S),this.glyphBuffer.update(k),this.idBuffer.update(C),a.free(O),a.free(S),a.free(k),a.free(C)},x.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},4298:function(t,e,r){"use strict";var n=r(3236);e.boxVertex=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),e.boxFragment=n(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},3161:function(t,e,r){"use strict";var n=r(9405),i=r(2762),o=r(4298);function a(t,e,r){this.plot=t,this.boxBuffer=e,this.boxShader=r,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}t.exports=function(t,e){var r=t.gl,s=new a(t,i(r,[0,0,0,1,1,0,1,1]),n(r,o.boxVertex,o.boxFragment));return s.update(e),t.addOverlay(s),s};var s=a.prototype;s.draw=function(){if(this.enabled){var t=this.plot,e=this.selectBox,r=this.borderWidth;this.innerFill;var n=this.innerColor;this.outerFill;var i=this.outerColor,o=this.borderColor,a=t.box,s=t.screenBox,u=t.dataBox,h=t.viewBox,f=t.pixelRatio,l=(e[0]-u[0])*(h[2]-h[0])/(u[2]-u[0])+h[0],c=(e[1]-u[1])*(h[3]-h[1])/(u[3]-u[1])+h[1],p=(e[2]-u[0])*(h[2]-h[0])/(u[2]-u[0])+h[0],d=(e[3]-u[1])*(h[3]-h[1])/(u[3]-u[1])+h[1];if(l=Math.max(l,h[0]),c=Math.max(c,h[1]),p=Math.min(p,h[2]),d=Math.min(d,h[3]),!(p<l)&&!(d<c)){a.bind();var v=s[2]-s[0],g=s[3]-s[1];if(this.outerFill&&(a.drawBox(0,0,v,c,i),a.drawBox(0,c,l,d,i),a.drawBox(0,d,v,g,i),a.drawBox(p,c,v,d,i)),this.innerFill&&a.drawBox(l,c,p,d,n),r>0){var m=r*f;a.drawBox(l-m,c-m,p+m,c+m,o),a.drawBox(l-m,d-m,p+m,d+m,o),a.drawBox(l-m,c-m,l+m,d+m,o),a.drawBox(p-m,c-m,p+m,d+m,o)}}}},s.update=function(t){t=t||{},this.innerFill=!!t.innerFill,this.outerFill=!!t.outerFill,this.innerColor=(t.innerColor||[0,0,0,.5]).slice(),this.outerColor=(t.outerColor||[0,0,0,.5]).slice(),this.borderColor=(t.borderColor||[0,0,0,1]).slice(),this.borderWidth=t.borderWidth||0,this.selectBox=(t.selectBox||this.selectBox).slice()},s.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},3589:function(t,e,r){"use strict";t.exports=function(t,e){var r=e[0],o=e[1],a=n(t,r,o,{});return new h(t,a,i.mallocUint8(r*o*4))};var n=r(2260),i=r(1888),o=r(9618),a=r(8828).nextPow2,s=function(t,e,r){for(var n=1e8,i=-1,o=-1,a=t.shape[0],s=t.shape[1],u=0;u<a;u++)for(var h=0;h<s;h++){var f=t.get(u,h,0),l=t.get(u,h,1),c=t.get(u,h,2),p=t.get(u,h,3);if(f<255||l<255||c<255||p<255){var d=e-u,v=r-h,g=d*d+v*v;g<n&&(n=g,i=u,o=h)}}return[i,o,n]};function u(t,e,r,n,i){this.coord=[t,e],this.id=r,this.value=n,this.distance=i}function h(t,e,r){this.gl=t,this.fbo=e,this.buffer=r,this._readTimeout=null;var n=this;this._readCallback=function(){n.gl&&(e.bind(),t.readPixels(0,0,e.shape[0],e.shape[1],t.RGBA,t.UNSIGNED_BYTE,n.buffer),n._readTimeout=null)}}var f=h.prototype;Object.defineProperty(f,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(t){if(this.gl){this.fbo.shape=t;var e=this.fbo.shape[0],r=this.fbo.shape[1];if(r*e*4>this.buffer.length){i.free(this.buffer);for(var n=this.buffer=i.mallocUint8(a(r*e*4)),o=0;o<r*e*4;++o)n[o]=255}return t}}}),f.begin=function(){var t=this.gl;this.shape,t&&(this.fbo.bind(),t.clearColor(1,1,1,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT))},f.end=function(){var t=this.gl;t&&(t.bindFramebuffer(t.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},f.query=function(t,e,r){if(!this.gl)return null;var n=this.fbo.shape.slice();e|=0,"number"!=typeof r&&(r=1);var i=0|Math.min(Math.max((t|=0)-r,0),n[0]),a=0|Math.min(Math.max(t+r,0),n[0]),h=0|Math.min(Math.max(e-r,0),n[1]),f=0|Math.min(Math.max(e+r,0),n[1]);if(a<=i||f<=h)return null;var l=[a-i,f-h],c=o(this.buffer,[l[0],l[1],4],[4,4*n[0],1],4*(i+n[0]*h)),p=s(c.hi(l[0],l[1],1),r,r),d=p[0],v=p[1];if(d<0||Math.pow(this.radius,2)<p[2])return null;var g=c.get(d,v,0),m=c.get(d,v,1),b=c.get(d,v,2),y=c.get(d,v,3);return new u(d+i|0,v+h|0,g,[m,b,y],Math.sqrt(p[2]))},f.dispose=function(){this.gl&&(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},9405:function(t,e,r){"use strict";var n=r(3327),i=r(8731),o=r(216),a=r(5091),s=r(2145),u=r(8866);function h(t){this.gl=t,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var f=h.prototype;function l(t,e){return t.name<e.name?-1:1}f.bind=function(){this.program||this._relink();var t,e=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),r=this.gl.lastAttribCount;if(e>r)for(t=r;t<e;t++)this.gl.enableVertexAttribArray(t);else if(r>e)for(t=e;t<r;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=e,this.gl.useProgram(this.program)},f.dispose=function(){for(var t=this.gl.lastAttribCount,e=0;e<t;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},f.update=function(t,e,r,h){if(!e||1==arguments.length){var f,c=t;t=c.vertex,e=c.fragment,r=c.uniforms,h=c.attributes}var p=this,d=p.gl,v=p._vref;p._vref=a.shader(d,d.VERTEX_SHADER,t),v&&v.dispose(),p.vertShader=p._vref.shader;var g=this._fref;if(p._fref=a.shader(d,d.FRAGMENT_SHADER,e),g&&g.dispose(),p.fragShader=p._fref.shader,!r||!h){var m=d.createProgram();if(d.attachShader(m,p.fragShader),d.attachShader(m,p.vertShader),d.linkProgram(m),!d.getProgramParameter(m,d.LINK_STATUS)){var b=d.getProgramInfoLog(m);throw new u(b,"Error linking program:"+b)}r=r||s.uniforms(d,m),h=h||s.attributes(d,m),d.deleteProgram(m)}(h=h.slice()).sort(l);var y=[],x=[],_=[];for(f=0;f<h.length;++f){var w=h[f];if(w.type.indexOf("mat")>=0){for(var E=0|w.type.charAt(w.type.length-1),M=Array(E),A=0;A<E;++A)M[A]=_.length,x.push(w.name+"["+A+"]"),"number"==typeof w.location?_.push(w.location+A):Array.isArray(w.location)&&w.location.length===E&&"number"==typeof w.location[A]?_.push(0|w.location[A]):_.push(-1);y.push({name:w.name,type:w.type,locations:M})}else y.push({name:w.name,type:w.type,locations:[_.length]}),x.push(w.name),"number"==typeof w.location?_.push(0|w.location):_.push(-1)}var T=0;for(f=0;f<_.length;++f)if(_[f]<0){for(;_.indexOf(T)>=0;)T+=1;_[f]=T}var R=Array(r.length);function O(){p.program=a.program(d,p._vref,p._fref,x,_);for(var t=0;t<r.length;++t)R[t]=d.getUniformLocation(p.program,r[t].name)}O(),p._relink=O,p.types={uniforms:o(r),attributes:o(h)},p.attributes=i(d,p,y,_),Object.defineProperty(p,"uniforms",n(d,p,r,R))},t.exports=function(t,e,r,n,i){var o=new h(t);return o.update(e,r,n,i),o}},8866:function(t){function e(t,e,r){this.shortMessage=e||"",this.longMessage=r||"",this.rawError=t||"",this.message="gl-shader: "+(e||t||"")+(r?"\n"+r:""),this.stack=Error().stack}e.prototype=Error(),e.prototype.name="GLError",e.prototype.constructor=e,t.exports=e},8731:function(t,e,r){"use strict";t.exports=function(t,e,r,i){for(var o={},a=0,u=r.length;a<u;++a){var h=r[a],f=h.name,l=h.type,c=h.locations;switch(l){case"bool":case"int":case"float":s(t,e,c[0],i,1,o,f);break;default:if(l.indexOf("vec")>=0){var p=l.charCodeAt(l.length-1)-48;if(p<2||p>4)throw new n("","Invalid data type for attribute "+f+": "+l);s(t,e,c[0],i,p,o,f)}else if(l.indexOf("mat")>=0){var p=l.charCodeAt(l.length-1)-48;if(p<2||p>4)throw new n("","Invalid data type for attribute "+f+": "+l);!function(t,e,r,n,i,o,a){for(var u=Array(i),h=Array(i),f=0;f<i;++f)s(t,e,r[f],n,i,u,f),h[f]=u[f];Object.defineProperty(u,"location",{set:function(t){if(Array.isArray(t))for(var e=0;e<i;++e)h[e].location=t[e];else for(var e=0;e<i;++e)h[e].location=t+e;return t},get:function(){for(var t=Array(i),e=0;e<i;++e)t[e]=n[r[e]];return t},enumerable:!0}),u.pointer=function(e,o,a,s){e=e||t.FLOAT,o=!!o,a=a||i*i,s=s||0;for(var u=0;u<i;++u){var h=n[r[u]];t.vertexAttribPointer(h,i,e,o,a,s+u*i),t.enableVertexAttribArray(h)}};var l=Array(i),c=t["vertexAttrib"+i+"fv"];Object.defineProperty(o,a,{set:function(e){for(var o=0;o<i;++o){var a=n[r[o]];if(t.disableVertexAttribArray(a),Array.isArray(e[0]))c.call(t,a,e[o]);else{for(var s=0;s<i;++s)l[s]=e[i*o+s];c.call(t,a,l)}}return e},get:function(){return u},enumerable:!0})}(t,e,c,i,p,o,f)}else throw new n("","Unknown data type for attribute "+f+": "+l)}}return o};var n=r(8866);function i(t,e,r,n,i,o){this._gl=t,this._wrapper=e,this._index=r,this._locations=n,this._dimension=i,this._constFunc=o}var o=i.prototype;o.pointer=function(t,e,r,n){var i=this._gl,o=this._locations[this._index];i.vertexAttribPointer(o,this._dimension,t||i.FLOAT,!!e,r||0,n||0),i.enableVertexAttribArray(o)},o.set=function(t,e,r,n){return this._constFunc(this._locations[this._index],t,e,r,n)},Object.defineProperty(o,"location",{get:function(){return this._locations[this._index]},set:function(t){return t!==this._locations[this._index]&&(this._locations[this._index]=0|t,this._wrapper.program=null),0|t}});var a=[function(t,e,r){return void 0===r.length?t.vertexAttrib1f(e,r):t.vertexAttrib1fv(e,r)},function(t,e,r,n){return void 0===r.length?t.vertexAttrib2f(e,r,n):t.vertexAttrib2fv(e,r)},function(t,e,r,n,i){return void 0===r.length?t.vertexAttrib3f(e,r,n,i):t.vertexAttrib3fv(e,r)},function(t,e,r,n,i,o){return void 0===r.length?t.vertexAttrib4f(e,r,n,i,o):t.vertexAttrib4fv(e,r)}];function s(t,e,r,n,o,s,u){var h=a[o],f=new i(t,e,r,n,o,h);Object.defineProperty(s,u,{set:function(e){return t.disableVertexAttribArray(n[r]),h(t,n[r],e),e},get:function(){return f},enumerable:!0})}},3327:function(t,e,r){"use strict";var n=r(216),i=r(8866);function o(t){return function(){return t}}function a(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=e;return r}t.exports=function(t,e,r,s){function u(e){return function(n){for(var o=function t(e,r){if("object"!=typeof r)return[[e,r]];var n=[];for(var i in r){var o=r[i],a=e;parseInt(i)+""===i?a+="["+i+"]":a+="."+i,"object"==typeof o?n.push.apply(n,t(a,o)):n.push([a,o])}return n}("",e),a=0;a<o.length;++a){var u=o[a],h=u[0],f=u[1];if(s[f]){var l,c=n;if("string"==typeof h&&(0===h.indexOf(".")||0===h.indexOf("["))){var p=h;if(0===h.indexOf(".")&&(p=h.slice(1)),p.indexOf("]")===p.length-1){var d=p.indexOf("["),v=p.slice(0,d),g=p.slice(d+1,p.length-1);c=v?n[v][g]:n[g]}else c=n[p]}var m=r[f].type;switch(m){case"bool":case"int":case"sampler2D":case"samplerCube":t.uniform1i(s[f],c);break;case"float":t.uniform1f(s[f],c);break;default:var b=m.indexOf("vec");if(0<=b&&b<=1&&m.length===4+b){if((l=m.charCodeAt(m.length-1)-48)<2||l>4)throw new i("","Invalid data type");switch(m.charAt(0)){case"b":case"i":t["uniform"+l+"iv"](s[f],c);break;case"v":t["uniform"+l+"fv"](s[f],c);break;default:throw new i("","Unrecognized data type for vector "+name+": "+m)}}else if(0===m.indexOf("mat")&&4===m.length){if((l=m.charCodeAt(m.length-1)-48)<2||l>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+m);t["uniformMatrix"+l+"fv"](s[f],!1,c);break}else throw new i("","Unknown uniform data type for "+name+": "+m)}}}}}function h(t,e,n){"object"==typeof n?Object.defineProperty(t,e,{get:o(f(n)),set:u(n),enumerable:!0,configurable:!1}):s[n]?Object.defineProperty(t,e,{get:function(t,e,r){return t.getUniform(e.program,r[n])},set:u(n),enumerable:!0,configurable:!1}):t[e]=function(t){switch(t){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var e=t.indexOf("vec");if(0<=e&&e<=1&&t.length===4+e){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new i("","Invalid data type");if("b"===t.charAt(0))return a(r,!1);return a(r,0)}if(0===t.indexOf("mat")&&4===t.length){var r=t.charCodeAt(t.length-1)-48;if(r<2||r>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+t);return a(r*r,0)}throw new i("","Unknown uniform data type for "+name+": "+t)}}(r[n].type)}function f(t){var e;if(Array.isArray(t)){e=Array(t.length);for(var r=0;r<t.length;++r)h(e,r,t[r])}else for(var n in e={},t)h(e,n,t[n]);return e}var l=n(r,!0);return{get:o(f(l)),set:u(l),enumerable:!0,configurable:!0}}},216:function(t){"use strict";t.exports=function(t,e){for(var r={},n=0;n<t.length;++n)for(var i=t[n].name.split("."),o=r,a=0;a<i.length;++a){var s=i[a].split("[");if(s.length>1){s[0]in o||(o[s[0]]=[]),o=o[s[0]];for(var u=1;u<s.length;++u){var h=parseInt(s[u]);u<s.length-1||a<i.length-1?(h in o||(u<s.length-1?o[h]=[]:o[h]={}),o=o[h]):e?o[h]=n:o[h]=t[n].type}}else a<i.length-1?(s[0]in o||(o[s[0]]={}),o=o[s[0]]):e?o[s[0]]=n:o[s[0]]=t[n].type}return r}},2145:function(t,e){"use strict";e.uniforms=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),n=[],o=0;o<r;++o){var a=t.getActiveUniform(e,o);if(a){var s=i(t,a.type);if(a.size>1)for(var u=0;u<a.size;++u)n.push({name:a.name.replace("[0]","["+u+"]"),type:s});else n.push({name:a.name,type:s})}}return n},e.attributes=function(t,e){for(var r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),n=[],o=0;o<r;++o){var a=t.getActiveAttrib(e,o);a&&n.push({name:a.name,type:i(t,a.type)})}return n};var r={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},n=null;function i(t,e){if(!n){var i=Object.keys(r);n={};for(var o=0;o<i.length;++o){var a=i[o];n[t[a]]=r[a]}}return n[e]}},5091:function(t,e,r){"use strict";e.shader=function(t,e,r){return f(t).getShaderReference(e,r)},e.program=function(t,e,r,n,i){return f(t).getProgram(e,r,n,i)};var n=r(8866),i=r(2992),o=new("undefined"==typeof WeakMap?r(606):WeakMap),a=0;function s(t,e,r,n,i,o,a){this.id=t,this.src=e,this.type=r,this.shader=n,this.count=o,this.programs=[],this.cache=a}function u(t){this.gl=t,this.shaders=[{},{}],this.programs={}}s.prototype.dispose=function(){if(0==--this.count){for(var t=this.cache,e=t.gl,r=this.programs,n=0,i=r.length;n<i;++n){var o=t.programs[r[n]];o&&(delete t.programs[n],e.deleteProgram(o))}e.deleteShader(this.shader),delete t.shaders[this.type===e.FRAGMENT_SHADER|0][this.src]}};var h=u.prototype;function f(t){var e=o.get(t);return e||(e=new u(t),o.set(t,e)),e}h.getShaderReference=function(t,e){var r=this.gl,o=this.shaders[t===r.FRAGMENT_SHADER|0],u=o[e];if(u&&r.isShader(u.shader))u.count+=1;else{var h=function(t,e,r){var o=t.createShader(e);if(t.shaderSource(o,r),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS)){var a=t.getShaderInfoLog(o);try{var s=i(a,r,e)}catch(t){throw console.warn("Failed to format compiler error: "+t),new n(a,"Error compiling shader:\n"+a)}throw new n(a,s.short,s.long)}return o}(r,t,e);u=o[e]=new s(a++,e,t,h,[],1,this)}return u},h.getProgram=function(t,e,r,i){var o=[t.id,e.id,r.join(":"),i.join(":")].join("@"),a=this.programs[o];return a&&this.gl.isProgram(a)||(this.programs[o]=a=function(t,e,r,i,o){var a=t.createProgram();t.attachShader(a,e),t.attachShader(a,r);for(var s=0;s<i.length;++s)t.bindAttribLocation(a,o[s],i[s]);if(t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS)){var u=t.getProgramInfoLog(a);throw new n(u,"Error linking program: "+u)}return a}(this.gl,t.shader,e.shader,r,i),t.programs.push(o),e.programs.push(o)),a}},4098:function(t){"use strict";function e(t){this.plot=t,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}t.exports=function(t,r){var n=new e(t);return n.update(r),t.addOverlay(n),n};var r=e.prototype;r.update=function(t){t=t||{},this.enable=(t.enable||[!0,!0,!1,!1]).slice(),this.width=(t.width||[1,1,1,1]).slice(),this.color=(t.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(t){return t.slice()}),this.center=(t.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},r.draw=function(){var t=this.enable,e=this.width,r=this.color,n=this.center,i=this.plot,o=i.line,a=i.dataBox,s=i.viewBox;if(o.bind(),a[0]<=n[0]&&n[0]<=a[2]&&a[1]<=n[1]&&n[1]<=a[3]){var u=s[0]+(n[0]-a[0])/(a[2]-a[0])*(s[2]-s[0]),h=s[1]+(n[1]-a[1])/(a[3]-a[1])*(s[3]-s[1]);t[0]&&o.drawLine(u,h,s[0],h,e[0],r[0]),t[1]&&o.drawLine(u,h,u,s[1],e[1],r[1]),t[2]&&o.drawLine(u,h,s[2],h,e[2],r[2]),t[3]&&o.drawLine(u,h,u,s[3],e[3],r[3])}},r.dispose=function(){this.plot.removeOverlay(this)}},1493:function(t,e,r){"use strict";var n=r(3236),i=r(9405),o=n(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * (view * (model * vec4(vertexPosition, 1.0)));\n  vec2 clipOffset = (projection * (view * (model * vec4(color, 0.0)))).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),a=n(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);t.exports=function(t){return i(t,o,a,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},4449:function(t,e,r){"use strict";var n=r(2762),i=r(8116),o=r(1493);t.exports=function(t,e){var r=[];function a(t,e,n,i,o,a){var s=[t,e,n,0,0,0,1];s[i+3]=1,s[i]=o,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[i]=a,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[i]=o,r.push.apply(r,s)}a(0,0,0,0,0,1),a(0,0,0,1,0,1),a(0,0,0,2,0,1),a(1,0,0,1,-1,1),a(1,0,0,2,-1,1),a(0,1,0,0,-1,1),a(0,1,0,2,-1,1),a(0,0,1,0,-1,1),a(0,0,1,1,-1,1);var u=n(t,r),h=i(t,[{type:t.FLOAT,buffer:u,size:3,offset:0,stride:28},{type:t.FLOAT,buffer:u,size:3,offset:12,stride:28},{type:t.FLOAT,buffer:u,size:1,offset:24,stride:28}]),f=o(t);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.weight.location=2;var l=new s(t,u,h,f);return l.update(e),l};var a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function s(t,e,r,n){this.gl=t,this.buffer=e,this.vao=r,this.shader=n,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var u=s.prototype,h=[0,0,0],f=[0,0,0],l=[0,0];u.isTransparent=function(){return!1},u.drawTransparent=function(t){},u.draw=function(t){var e,r=this.gl,n=this.vao,i=this.shader;n.bind(),i.bind();var o=t.model||a,s=t.view||a,u=t.projection||a;this.axes&&(e=this.axes.lastCubeProps.axis);for(var c=0;c<3;++c)e&&e[c]<0?(h[c]=this.bounds[0][c],f[c]=this.bounds[1][c]):(h[c]=this.bounds[1][c],f[c]=this.bounds[0][c]);l[0]=r.drawingBufferWidth,l[1]=r.drawingBufferHeight,i.uniforms.model=o,i.uniforms.view=s,i.uniforms.projection=u,i.uniforms.coordinates=[this.position,h,f],i.uniforms.colors=this.colors,i.uniforms.screenShape=l;for(var c=0;c<3;++c)i.uniforms.lineWidth=this.lineWidth[c]*this.pixelRatio,this.enabled[c]&&(n.draw(r.TRIANGLES,6,6*c),this.drawSides[c]&&n.draw(r.TRIANGLES,12,18+12*c));n.unbind()},u.update=function(t){t&&("bounds"in t&&(this.bounds=t.bounds),"position"in t&&(this.position=t.position),"lineWidth"in t&&(this.lineWidth=t.lineWidth),"colors"in t&&(this.colors=t.colors),"enabled"in t&&(this.enabled=t.enabled),"drawSides"in t&&(this.drawSides=t.drawSides))},u.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},6740:function(t,e,r){var n=r(3236),i=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),o=n(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),a=n(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * (view * tubePosition);\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),s=n(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);e.meshShader={vertex:i,fragment:o,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},e.pickShader={vertex:a,fragment:s,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},7815:function(t,e,r){"use strict";var n=r(2931),i=r(9970),o=["xyz","xzy","yxz","yzx","zxy","zyx"],a=function(t,e,r,o){for(var a=t.points,s=t.velocities,u=t.divergences,h=[],f=[],l=[],c=[],p=[],d=[],v=0,g=0,m=i.create(),b=i.create(),y=0;y<a.length;y++){var x=a[y],_=s[y],w=u[y];0===e&&(w=.05*r),g=n.length(_)/o,m=i.create(),n.copy(m,_),m[3]=w;for(var E=0;E<8;E++)p[E]=[x[0],x[1],x[2],E];if(c.length>0)for(var E=0;E<8;E++){var M=(E+1)%8;h.push(c[E],p[E],p[M],p[M],c[M],c[E]),l.push(b,m,m,m,b,b),d.push(v,g,g,g,v,v);var A=h.length;f.push([A-6,A-5,A-4],[A-3,A-2,A-1])}var T=c;c=p,p=T;var R=b;b=m,m=R;var O=v;v=g,g=O}return{positions:h,cells:f,vectors:l,vertexIntensity:d}},s=function(t,e,r,i){for(var o=0,s=0;s<t.length;s++)for(var u=t[s].velocities,h=0;h<u.length;h++)o=Math.max(o,n.length(u[h]));for(var f=t.map(function(t){return a(t,r,i,o)}),l=[],c=[],p=[],d=[],s=0;s<f.length;s++){var v=f[s],g=l.length;l=l.concat(v.positions),p=p.concat(v.vectors),d=d.concat(v.vertexIntensity);for(var h=0;h<v.cells.length;h++){var m=v.cells[h],b=[];c.push(b);for(var y=0;y<m.length;y++)b.push(m[y]+g)}}return{positions:l,cells:c,vectors:p,vertexIntensity:d,colormap:e}},u=function(t,e){var r,n=t.length;for(r=0;r<n;r++){var i=t[r];if(i===e)break;if(i>e)return r-1}return r},h=function(t,e,r){return t<e?e:t>r?r:t},f=function(t,e,r){var i,o,a,s,f,l,c=e.vectors,p=e.meshgrid,d=t[0],v=t[1],g=t[2],m=p[0].length,b=p[1].length,y=p[2].length,x=u(p[0],d),_=u(p[1],v),w=u(p[2],g),E=x+1,M=_+1,A=w+1;if(x=h(x,0,m-1),E=h(E,0,m-1),_=h(_,0,b-1),M=h(M,0,b-1),w=h(w,0,y-1),A=h(A,0,y-1),x<0||_<0||w<0||E>m-1||M>b-1||A>y-1)return n.create();var T=p[0][x],R=p[0][E],O=p[1][_],S=p[1][M],k=p[2][w],C=p[2][A],L=(d-T)/(R-T),I=(v-O)/(S-O),P=(g-k)/(C-k);switch(isFinite(L)||(L=.5),isFinite(I)||(I=.5),isFinite(P)||(P=.5),r.reversedX&&(x=m-1-x,E=m-1-E),r.reversedY&&(_=b-1-_,M=b-1-M),r.reversedZ&&(w=y-1-w,A=y-1-A),r.filled){case 5:f=w,l=A,a=_*y,s=M*y,i=x*y*b,o=E*y*b;break;case 4:f=w,l=A,i=x*y,o=E*y,a=_*y*m,s=M*y*m;break;case 3:a=_,s=M,f=w*b,l=A*b,i=x*b*y,o=E*b*y;break;case 2:a=_,s=M,i=x*b,o=E*b,f=w*b*m,l=A*b*m;break;case 1:i=x,o=E,f=w*m,l=A*m,a=_*m*y,s=M*m*y;break;default:i=x,o=E,a=_*m,s=M*m,f=w*m*b,l=A*m*b}var B=c[i+a+f],F=c[i+a+l],N=c[i+s+f],D=c[i+s+l],U=c[o+a+f],z=c[o+a+l],j=c[o+s+f],V=c[o+s+l],G=n.create(),H=n.create(),W=n.create(),X=n.create();n.lerp(G,B,U,L),n.lerp(H,F,z,L),n.lerp(W,N,j,L),n.lerp(X,D,V,L);var Y=n.create(),q=n.create();n.lerp(Y,G,W,I),n.lerp(q,H,X,I);var Z=n.create();return n.lerp(Z,Y,q,P),Z},l=function(t){var e=1/0;t.sort(function(t,e){return t-e});for(var r=t.length,n=1;n<r;n++){var i=Math.abs(t[n]-t[n-1]);i<e&&(e=i)}return e},c=function(t){for(var e=[],r=[],n=[],i={},o={},a={},s=t.length,u=0;u<s;u++){var h=t[u],f=h[0],c=h[1],p=h[2];i[f]||(e.push(f),i[f]=!0),o[c]||(r.push(c),o[c]=!0),a[p]||(n.push(p),a[p]=!0)}var d=Math.min(l(e),l(r),l(n));return isFinite(d)?d:1};t.exports=function(t,e){var r=t.startingPositions,i=t.maxLength||1e3,a=t.tubeSize||1,u=t.absoluteTubeSize,h=t.gridFill||"+x+y+z",l={};-1!==h.indexOf("-x")&&(l.reversedX=!0),-1!==h.indexOf("-y")&&(l.reversedY=!0),-1!==h.indexOf("-z")&&(l.reversedZ=!0),l.filled=o.indexOf(h.replace(/-/g,"").replace(/\+/g,""));var p=t.getVelocity||function(e){return f(e,t,l)},d=t.getDivergence||function(t,e){var r=n.create();n.add(r,t,[1e-4,0,0]);var i=p(r);n.subtract(i,i,e),n.scale(i,i,1e4),n.add(r,t,[0,1e-4,0]);var o=p(r);n.subtract(o,o,e),n.scale(o,o,1e4),n.add(r,t,[0,0,1e-4]);var a=p(r);return n.subtract(a,a,e),n.scale(a,a,1e4),n.add(r,i,o),n.add(r,r,a),r},v=[],g=e[0][0],m=e[0][1],b=e[0][2],y=e[1][0],x=e[1][1],_=e[1][2],w=10*n.distance(e[0],e[1])/i,E=w*w,M=1,A=0,T=r.length;T>1&&(M=c(r));for(var R=0;R<T;R++){var O=n.create();n.copy(O,r[R]);var S=[O],k=[],C=p(O),L=O;k.push(C);var I=[],P=d(O,C),B=n.length(P);isFinite(B)&&B>A&&(A=B),I.push(B),v.push({points:S,velocities:k,divergences:I});for(var F=0;F<100*i&&S.length<i&&function(t){var e=t[0],r=t[1],n=t[2];return!(e<g||e>y||r<m||r>x||n<b||n>_)}(O);){F++;var N=n.clone(C),D=n.squaredLength(N);if(0===D)break;if(D>E&&n.scale(N,N,w/Math.sqrt(D)),n.add(N,N,O),C=p(N),n.squaredDistance(L,N)-E>-.0001*E){S.push(N),L=N,k.push(C);var P=d(N,C),B=n.length(P);isFinite(B)&&B>A&&(A=B),I.push(B)}O=N}}var U=s(v,t.colormap,A,M);return u?U.tubeScale=u:(0===A&&(A=1),U.tubeScale=.5*a*M/A),U};var p=r(6740),d=r(6405).createMesh;t.exports.createTubeMesh=function(t,e){return d(t,e,{shaders:p,traceType:"streamtube"})}},990:function(t,e,r){var n=r(9405),i=r(3236),o=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(localCoordinate, 1.0);\n  vec4 clipPosition = projection * (view * worldPosition);\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),a=i(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color  in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),s=i(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  mat4 objectOffsetTranslation = mat4(1.0) + mat4(vec4(0), vec4(0), vec4(0), vec4(objectOffset, 0));\n  vec4 worldPosition = (model * objectOffsetTranslation) * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * (view * worldPosition);\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),u=i(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);e.createShader=function(t){var e=n(t,o,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createPickShader=function(t){var e=n(t,o,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e.attributes.normal.location=2,e},e.createContourShader=function(t){var e=n(t,s,a,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e},e.createPickContourShader=function(t){var e=n(t,s,u,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return e.attributes.uv.location=0,e.attributes.f.location=1,e}},9499:function(t,e,r){"use strict";t.exports=function(t){var e=t.gl,r=b(e),n=x(e),s=y(e),u=_(e),h=i(e),f=o(e,[{buffer:h,size:4,stride:40,offset:0},{buffer:h,size:3,stride:40,offset:16},{buffer:h,size:3,stride:40,offset:28}]),l=i(e),c=o(e,[{buffer:l,size:4,stride:20,offset:0},{buffer:l,size:1,stride:20,offset:16}]),p=i(e),d=o(e,[{buffer:p,size:2,type:e.FLOAT}]),v=a(e,1,256,e.RGBA,e.UNSIGNED_BYTE);v.minFilter=e.LINEAR,v.magFilter=e.LINEAR;var g=new T(e,[0,0],[[0,0,0],[0,0,0]],r,n,h,f,v,s,u,l,c,p,d,[0,0,0]),m={levels:[[],[],[]]};for(var w in t)m[w]=t[w];return m.colormap=m.colormap||"jet",g.update(m),g};var n=r(8828),i=r(2762),o=r(8116),a=r(7766),s=r(1888),u=r(6729),h=r(5298),f=r(9994),l=r(9618),c=r(3711),p=r(6760),d=r(7608),v=r(2478),g=r(6199),m=r(990),b=m.createShader,y=m.createContourShader,x=m.createPickShader,_=m.createPickContourShader,w=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],E=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],M=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function A(t,e,r,n,i){this.position=t,this.index=e,this.uv=r,this.level=n,this.dataCoordinate=i}function T(t,e,r,n,i,o,a,u,h,f,c,p,d,v,g){this.gl=t,this.shape=e,this.bounds=r,this.objectOffset=g,this.intensityBounds=[],this._shader=n,this._pickShader=i,this._coordinateBuffer=o,this._vao=a,this._colorMap=u,this._contourShader=h,this._contourPickShader=f,this._contourBuffer=c,this._contourVAO=p,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new A([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=d,this._dynamicVAO=v,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[l(s.mallocFloat(1024),[0,0]),l(s.mallocFloat(1024),[0,0]),l(s.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var t=0;t<3;++t){var e=M[t],r=(t+1)%3,n=(t+2)%3;e[r+0]=1,e[n+3]=1,e[t+6]=1}}();var R=T.prototype;R.genColormap=function(t,e){var r=!1,n=f([u({colormap:t,nshades:256,format:"rgba"}).map(function(t,n){var i=e?function(t,e){if(!e||!e.length)return 1;for(var r=0;r<e.length&&!(e.length<2);++r){if(e[r][0]===t)return e[r][1];if(e[r][0]>t&&r>0){var n=(e[r][0]-t)/(e[r][0]-e[r-1][0]);return e[r][1]*(1-n)+n*e[r-1][1]}}return 1}(n/255,e):t[3];return i<1&&(r=!0),[t[0],t[1],t[2],255*i]})]);return h.divseq(n,255),this.hasAlphaScale=r,n},R.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},R.isOpaque=function(){return!this.isTransparent()},R.pickSlots=1,R.setPickBase=function(t){this.pickId=t};var O=[0,0,0],S={showSurface:!1,showContour:!1,projections:[w.slice(),w.slice(),w.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function k(t,e){var r,n,i,o=e.axes&&e.axes.lastCubeProps.axis||O,a=e.showSurface,s=e.showContour;for(r=0;r<3;++r)for(n=0,a=a||e.surfaceProject[r];n<3;++n)s=s||e.contourProject[r][n];for(r=0;r<3;++r){var u=S.projections[r];for(n=0;n<16;++n)u[n]=0;for(n=0;n<4;++n)u[5*n]=1;u[5*r]=0,u[12+r]=e.axesBounds[+(o[r]>0)][r],p(u,t.model,u);var h=S.clipBounds[r];for(i=0;i<2;++i)for(n=0;n<3;++n)h[i][n]=t.clipBounds[i][n];h[0][r]=-1e8,h[1][r]=1e8}return S.showSurface=a,S.showContour=s,S}var C={model:w,view:w,projection:w,inverseModel:w.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-.0001,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},L=w.slice(),I=[1,0,0,0,1,0,0,0,1];function P(t,e){t=t||{};var r=this.gl;r.disable(r.CULL_FACE),this._colorMap.bind(0),C.model=t.model||w,C.view=t.view||w,C.projection=t.projection||w,C.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],C.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],C.objectOffset=this.objectOffset,C.contourColor=this.contourColor[0],C.inverseModel=d(C.inverseModel,C.model);for(var n=0;n<2;++n)for(var i=C.clipBounds[n],o=0;o<3;++o)i[o]=Math.min(Math.max(this.clipBounds[n][o],-1e8),1e8);for(C.kambient=this.ambientLight,C.kdiffuse=this.diffuseLight,C.kspecular=this.specularLight,C.roughness=this.roughness,C.fresnel=this.fresnel,C.opacity=this.opacity,C.height=0,C.permutation=I,C.vertexColor=this.vertexColor,p(L,C.view,C.model),p(L,C.projection,L),d(L,L),n=0;n<3;++n)C.eyePosition[n]=L[12+n]/L[15];var a=L[15];for(n=0;n<3;++n)a+=this.lightPosition[n]*L[4*n+3];for(n=0;n<3;++n){var s=L[12+n];for(o=0;o<3;++o)s+=L[4*o+n]*this.lightPosition[o];C.lightPosition[n]=s/a}var u=k(C,this);if(u.showSurface){for(this._shader.bind(),this._shader.uniforms=C,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(r.TRIANGLES,this._vertexCount),n=0;n<3;++n)this.surfaceProject[n]&&this.vertexCount&&(this._shader.uniforms.model=u.projections[n],this._shader.uniforms.clipBounds=u.clipBounds[n],this._vao.draw(r.TRIANGLES,this._vertexCount));this._vao.unbind()}if(u.showContour){var h=this._contourShader;C.kambient=1,C.kdiffuse=0,C.kspecular=0,C.opacity=1,h.bind(),h.uniforms=C;var f=this._contourVAO;for(f.bind(),n=0;n<3;++n)for(h.uniforms.permutation=M[n],r.lineWidth(this.contourWidth[n]*this.pixelRatio),o=0;o<this.contourLevels[n].length;++o)o===this.highlightLevel[n]?(h.uniforms.contourColor=this.highlightColor[n],h.uniforms.contourTint=this.highlightTint[n]):(0===o||o-1===this.highlightLevel[n])&&(h.uniforms.contourColor=this.contourColor[n],h.uniforms.contourTint=this.contourTint[n]),this._contourCounts[n][o]&&(h.uniforms.height=this.contourLevels[n][o],f.draw(r.LINES,this._contourCounts[n][o],this._contourOffsets[n][o]));for(n=0;n<3;++n)for(o=0,h.uniforms.model=u.projections[n],h.uniforms.clipBounds=u.clipBounds[n];o<3;++o)if(this.contourProject[n][o]){h.uniforms.permutation=M[o],r.lineWidth(this.contourWidth[o]*this.pixelRatio);for(var l=0;l<this.contourLevels[o].length;++l)l===this.highlightLevel[o]?(h.uniforms.contourColor=this.highlightColor[o],h.uniforms.contourTint=this.highlightTint[o]):(0===l||l-1===this.highlightLevel[o])&&(h.uniforms.contourColor=this.contourColor[o],h.uniforms.contourTint=this.contourTint[o]),this._contourCounts[o][l]&&(h.uniforms.height=this.contourLevels[o][l],f.draw(r.LINES,this._contourCounts[o][l],this._contourOffsets[o][l]))}for(f.unbind(),(f=this._dynamicVAO).bind(),n=0;n<3;++n)if(0!==this._dynamicCounts[n])for(h.uniforms.model=C.model,h.uniforms.clipBounds=C.clipBounds,h.uniforms.permutation=M[n],r.lineWidth(this.dynamicWidth[n]*this.pixelRatio),h.uniforms.contourColor=this.dynamicColor[n],h.uniforms.contourTint=this.dynamicTint[n],h.uniforms.height=this.dynamicLevel[n],f.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]),o=0;o<3;++o)this.contourProject[o][n]&&(h.uniforms.model=u.projections[o],h.uniforms.clipBounds=u.clipBounds[o],f.draw(r.LINES,this._dynamicCounts[n],this._dynamicOffsets[n]));f.unbind()}}R.draw=function(t){return P.call(this,t,!1)},R.drawTransparent=function(t){return P.call(this,t,!0)};var B={model:w,view:w,projection:w,inverseModel:w,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function F(t,e){return Array.isArray(t)?[e(t[0]),e(t[1]),e(t[2])]:[e(t),e(t),e(t)]}function N(t){return Array.isArray(t)?3===t.length?[t[0],t[1],t[2],1]:[t[0],t[1],t[2],t[3]]:[0,0,0,1]}function D(t){if(Array.isArray(t)){if(Array.isArray(t))return[N(t[0]),N(t[1]),N(t[2])];var e=N(t);return[e.slice(),e.slice(),e.slice()]}}R.drawPick=function(t){t=t||{};var e=this.gl;e.disable(e.CULL_FACE),B.model=t.model||w,B.view=t.view||w,B.projection=t.projection||w,B.shape=this._field[2].shape,B.pickId=this.pickId/255,B.lowerBound=this.bounds[0],B.upperBound=this.bounds[1],B.objectOffset=this.objectOffset,B.permutation=I;for(var r=0;r<2;++r)for(var n=B.clipBounds[r],i=0;i<3;++i)n[i]=Math.min(Math.max(this.clipBounds[r][i],-1e8),1e8);var o=k(B,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=B,this._vao.bind(),this._vao.draw(e.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=o.projections[r],this._pickShader.uniforms.clipBounds=o.clipBounds[r],this._vao.draw(e.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var a=this._contourPickShader;a.bind(),a.uniforms=B;var s=this._contourVAO;for(s.bind(),i=0;i<3;++i)for(e.lineWidth(this.contourWidth[i]*this.pixelRatio),a.uniforms.permutation=M[i],r=0;r<this.contourLevels[i].length;++r)this._contourCounts[i][r]&&(a.uniforms.height=this.contourLevels[i][r],s.draw(e.LINES,this._contourCounts[i][r],this._contourOffsets[i][r]));for(r=0;r<3;++r)for(i=0,a.uniforms.model=o.projections[r],a.uniforms.clipBounds=o.clipBounds[r];i<3;++i)if(this.contourProject[r][i]){a.uniforms.permutation=M[i],e.lineWidth(this.contourWidth[i]*this.pixelRatio);for(var u=0;u<this.contourLevels[i].length;++u)this._contourCounts[i][u]&&(a.uniforms.height=this.contourLevels[i][u],s.draw(e.LINES,this._contourCounts[i][u],this._contourOffsets[i][u]))}s.unbind()}},R.pick=function(t){if(!t||t.id!==this.pickId)return null;var e=this._field[2].shape,r=this._pickResult,n=e[0]*(t.value[0]+(t.value[2]>>4)/16)/255,i=Math.floor(n),o=n-i,a=e[1]*(t.value[1]+(15&t.value[2])/16)/255,s=Math.floor(a),u=a-s;i+=1,s+=1;var h=r.position;h[0]=h[1]=h[2]=0;for(var f=0;f<2;++f)for(var l=f?o:1-o,c=0;c<2;++c)for(var p=c?u:1-u,d=i+f,g=s+c,m=l*p,b=0;b<3;++b)h[b]+=this._field[b].get(d,g)*m;for(var y=this._pickResult.level,x=0;x<3;++x)if(y[x]=v.le(this.contourLevels[x],h[x]),y[x]<0)this.contourLevels[x].length>0&&(y[x]=0);else if(y[x]<this.contourLevels[x].length-1){var _=this.contourLevels[x][y[x]],w=this.contourLevels[x][y[x]+1];Math.abs(_-h[x])>Math.abs(w-h[x])&&(y[x]+=1)}for(b=0,r.index[0]=o<.5?i:i+1,r.index[1]=u<.5?s:s+1,r.uv[0]=n/e[0],r.uv[1]=a/e[1];b<3;++b)r.dataCoordinate[b]=this._field[b].get(r.index[0],r.index[1]);return r},R.padField=function(t,e){var r=e.shape.slice(),n=t.shape.slice();h.assign(t.lo(1,1).hi(r[0],r[1]),e),h.assign(t.lo(1).hi(r[0],1),e.hi(r[0],1)),h.assign(t.lo(1,n[1]-1).hi(r[0],1),e.lo(0,r[1]-1).hi(r[0],1)),h.assign(t.lo(0,1).hi(1,r[1]),e.hi(1)),h.assign(t.lo(n[0]-1,1).hi(1,r[1]),e.lo(r[0]-1)),t.set(0,0,e.get(0,0)),t.set(0,n[1]-1,e.get(0,r[1]-1)),t.set(n[0]-1,0,e.get(r[0]-1,0)),t.set(n[0]-1,n[1]-1,e.get(r[0]-1,r[1]-1))},R.update=function(t){t=t||{},this.objectOffset=t.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in t&&(this.contourWidth=F(t.contourWidth,Number)),"showContour"in t&&(this.showContour=F(t.showContour,Boolean)),"showSurface"in t&&(this.showSurface=!!t.showSurface),"contourTint"in t&&(this.contourTint=F(t.contourTint,Boolean)),"contourColor"in t&&(this.contourColor=D(t.contourColor)),"contourProject"in t&&(this.contourProject=F(t.contourProject,function(t){return F(t,Boolean)})),"surfaceProject"in t&&(this.surfaceProject=t.surfaceProject),"dynamicColor"in t&&(this.dynamicColor=D(t.dynamicColor)),"dynamicTint"in t&&(this.dynamicTint=F(t.dynamicTint,Number)),"dynamicWidth"in t&&(this.dynamicWidth=F(t.dynamicWidth,Number)),"opacity"in t&&(this.opacity=t.opacity),"opacityscale"in t&&(this.opacityscale=t.opacityscale),"colorBounds"in t&&(this.colorBounds=t.colorBounds),"vertexColor"in t&&(this.vertexColor=t.vertexColor?1:0),"colormap"in t&&this._colorMap.setPixels(this.genColormap(t.colormap,this.opacityscale));var e=t.field||t.coords&&t.coords[2]||null,r=!1;if(e||(e=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in t||"coords"in t){var i=(e.shape[0]+2)*(e.shape[1]+2);i>this._field[2].data.length&&(s.freeFloat(this._field[2].data),this._field[2].data=s.mallocFloat(n.nextPow2(i))),this._field[2]=l(this._field[2].data,[e.shape[0]+2,e.shape[1]+2]),this.padField(this._field[2],e),this.shape=e.shape.slice();for(var o=this.shape,a=0;a<2;++a)this._field[2].size>this._field[a].data.length&&(s.freeFloat(this._field[a].data),this._field[a].data=s.mallocFloat(this._field[2].size)),this._field[a]=l(this._field[a].data,[o[0]+2,o[1]+2]);if(t.coords){var u=t.coords;if(!Array.isArray(u)||3!==u.length)throw Error("gl-surface: invalid coordinates for x/y");for(a=0;a<2;++a){var h=u[a];for(m=0;m<2;++m)if(h.shape[m]!==o[m])throw Error("gl-surface: coords have incorrect shape");this.padField(this._field[a],h)}}else if(t.ticks){var f=t.ticks;if(!Array.isArray(f)||2!==f.length)throw Error("gl-surface: invalid ticks");for(a=0;a<2;++a){var p=f[a];if((Array.isArray(p)||p.length)&&(p=l(p)),p.shape[0]!==o[a])throw Error("gl-surface: invalid tick length");var d=l(p.data,o);d.stride[a]=p.stride[0],d.stride[1^a]=0,this.padField(this._field[a],d)}}else{for(a=0;a<2;++a){var v=[0,0];v[a]=1,this._field[a]=l(this._field[a].data,[o[0]+2,o[1]+2],v,0)}this._field[0].set(0,0,0);for(var m=0;m<o[0];++m)this._field[0].set(m+1,0,m);for(this._field[0].set(o[0]+1,0,o[0]-1),this._field[1].set(0,0,0),m=0;m<o[1];++m)this._field[1].set(0,m+1,m);this._field[1].set(0,o[1]+1,o[1]-1)}var b=this._field,y=l(s.mallocFloat(6*b[2].size),[3,o[0]+2,o[1]+2,2]);for(a=0;a<3;++a)g(y.pick(a),b[a],"mirror");var x=l(s.mallocFloat(3*b[2].size),[o[0]+2,o[1]+2,3]);for(a=0;a<o[0]+2;++a)for(m=0;m<o[1]+2;++m){var _=y.get(0,a,m,0),w=y.get(0,a,m,1),M=y.get(1,a,m,0),A=y.get(1,a,m,1),T=y.get(2,a,m,0),R=y.get(2,a,m,1),O=M*R-A*T,S=T*w-R*_,k=_*A-w*M,C=Math.sqrt(O*O+S*S+k*k);C<1e-8?(C=Math.max(Math.abs(O),Math.abs(S),Math.abs(k)))<1e-8?(k=1,S=O=0,C=1):C=1/C:C=1/Math.sqrt(C),x.set(a,m,0,O*C),x.set(a,m,1,S*C),x.set(a,m,2,k*C)}s.free(y.data);var L=[1/0,1/0,1/0],I=[-1/0,-1/0,-1/0],P=1/0,B=-1/0,N=(o[0]-1)*(o[1]-1)*6,U=s.mallocFloat(n.nextPow2(10*N)),z=0,j=0;for(a=0;a<o[0]-1;++a)a:for(m=0;m<o[1]-1;++m){for(var V=0;V<2;++V)for(var G=0;G<2;++G)for(var H=0;H<3;++H){var W=this._field[H].get(1+a+V,1+m+G);if(isNaN(W)||!isFinite(W))continue a}for(H=0;H<6;++H){var X=a+E[H][0],Y=m+E[H][1],q=this._field[0].get(X+1,Y+1),Z=this._field[1].get(X+1,Y+1);W=this._field[2].get(X+1,Y+1),O=x.get(X+1,Y+1,0),S=x.get(X+1,Y+1,1),k=x.get(X+1,Y+1,2),t.intensity&&(K=t.intensity.get(X,Y));var K=t.intensity?t.intensity.get(X,Y):W+this.objectOffset[2];U[z++]=X,U[z++]=Y,U[z++]=q,U[z++]=Z,U[z++]=W,U[z++]=0,U[z++]=K,U[z++]=O,U[z++]=S,U[z++]=k,L[0]=Math.min(L[0],q+this.objectOffset[0]),L[1]=Math.min(L[1],Z+this.objectOffset[1]),L[2]=Math.min(L[2],W+this.objectOffset[2]),P=Math.min(P,K),I[0]=Math.max(I[0],q+this.objectOffset[0]),I[1]=Math.max(I[1],Z+this.objectOffset[1]),I[2]=Math.max(I[2],W+this.objectOffset[2]),B=Math.max(B,K),j+=1}}for(t.intensityBounds&&(P=+t.intensityBounds[0],B=+t.intensityBounds[1]),a=6;a<z;a+=10)U[a]=(U[a]-P)/(B-P);this._vertexCount=j,this._coordinateBuffer.update(U.subarray(0,z)),s.freeFloat(U),s.free(x.data),this.bounds=[L,I],this.intensity=t.intensity||this._field[2],(this.intensityBounds[0]!==P||this.intensityBounds[1]!==B)&&(r=!0),this.intensityBounds=[P,B]}if("levels"in t){var Q=t.levels;for(a=0,Q=Array.isArray(Q[0])?Q.slice():[[],[],Q];a<3;++a)Q[a]=Q[a].slice(),Q[a].sort(function(t,e){return t-e});for(a=0;a<3;++a)for(m=0;m<Q[a].length;++m)Q[a][m]-=this.objectOffset[a];s:for(a=0;a<3;++a){if(Q[a].length!==this.contourLevels[a].length){r=!0;break}for(m=0;m<Q[a].length;++m)if(Q[a][m]!==this.contourLevels[a][m]){r=!0;break s}}this.contourLevels=Q}if(r){b=this._field,o=this.shape;for(var J=[],$=0;$<3;++$){var tt=this.contourLevels[$],te=[],tr=[],tn=[0,0,0];for(a=0;a<tt.length;++a){var ti=c(this._field[$],tt[a]);te.push(J.length/5|0),j=0;u:for(m=0;m<ti.cells.length;++m){var to=ti.cells[m];for(H=0;H<2;++H){var ta=ti.positions[to[H]],ts=ta[0],tu=0|Math.floor(ts),th=ts-tu,tf=ta[1],tl=0|Math.floor(tf),tc=tf-tl,tp=!1;h:for(var td=0;td<3;++td){tn[td]=0;var tv=($+td+1)%3;for(V=0;V<2;++V){var tg=V?th:1-th;for(G=0,X=0|Math.min(Math.max(tu+V,0),o[0]);G<2;++G){var tm=G?tc:1-tc;if(Y=0|Math.min(Math.max(tl+G,0),o[1]),!isFinite(W=td<2?this._field[tv].get(X,Y):(this.intensity.get(X,Y)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]))||isNaN(W)){tp=!0;break h}var tb=tg*tm;tn[td]+=tb*W}}}if(tp){if(H>0){for(var ty=0;ty<5;++ty)J.pop();j-=1}continue u}J.push(tn[0],tn[1],ta[0],ta[1],tn[2]),j+=1}}tr.push(j)}this._contourOffsets[$]=te,this._contourCounts[$]=tr}var tx=s.mallocFloat(J.length);for(a=0;a<J.length;++a)tx[a]=J[a];this._contourBuffer.update(tx),s.freeFloat(tx)}},R.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var t=0;t<3;++t)s.freeFloat(this._field[t].data)},R.highlight=function(t){if(!t){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(e=0;e<3;++e)this.enableHighlight[e]?this.highlightLevel[e]=t.level[e]:this.highlightLevel[e]=-1;for(e=0,r=this.snapToData?t.dataCoordinate:t.position;e<3;++e)r[e]-=this.objectOffset[e];if(this.enableDynamic[0]&&r[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&r[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&r[2]!==this.dynamicLevel[2]){for(var e,r,n=0,i=this.shape,o=s.mallocFloat(12*i[0]*i[1]),a=0;a<3;++a){if(!this.enableDynamic[a]){this.dynamicLevel[a]=NaN,this._dynamicCounts[a]=0;continue}this.dynamicLevel[a]=r[a];var u=(a+1)%3,h=(a+2)%3,f=this._field[a],l=this._field[u],p=this._field[h],d=c(f,r[a]),v=d.cells,g=d.positions;for(e=0,this._dynamicOffsets[a]=n;e<v.length;++e)for(var m=v[e],b=0;b<2;++b){var y=g[m[b]],x=+y[0],_=0|x,w=0|Math.min(_+1,i[0]),E=x-_,M=1-E,A=+y[1],T=0|A,R=0|Math.min(T+1,i[1]),O=A-T,S=1-O,k=M*S,C=M*O,L=E*S,I=E*O,P=k*l.get(_,T)+C*l.get(_,R)+L*l.get(w,T)+I*l.get(w,R),B=k*p.get(_,T)+C*p.get(_,R)+L*p.get(w,T)+I*p.get(w,R);if(isNaN(P)||isNaN(B)){b&&(n-=1);break}o[2*n+0]=P,o[2*n+1]=B,n+=1}this._dynamicCounts[a]=n-this._dynamicOffsets[a]}this._dynamicBuffer.update(o.subarray(0,2*n)),s.freeFloat(o)}}},7766:function(t,e,r){"use strict";var n=r(9618),i=r(5298),o=r(1888);t.exports=function(t){if(arguments.length<=1)throw Error("gl-texture2d: Missing arguments for texture2d constructor");if(!a&&(a=[t.LINEAR,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_NEAREST],s=[t.NEAREST,t.LINEAR,t.NEAREST_MIPMAP_NEAREST,t.NEAREST_MIPMAP_LINEAR,t.LINEAR_MIPMAP_NEAREST,t.LINEAR_MIPMAP_LINEAR],u=[t.REPEAT,t.CLAMP_TO_EDGE,t.MIRRORED_REPEAT]),"number"==typeof arguments[1])return g(t,arguments[1],arguments[2],arguments[3]||t.RGBA,arguments[4]||t.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return g(t,0|arguments[1][0],0|arguments[1][1],arguments[2]||t.RGBA,arguments[3]||t.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var e,r,l,p,m,b=arguments[1],y=h(b)?b:b.raw;if(y)return e=0|b.width,r=0|b.height,l=arguments[2]||t.RGBA,p=arguments[3]||t.UNSIGNED_BYTE,m=v(t),t.texImage2D(t.TEXTURE_2D,0,l,l,p,y),new c(t,m,e,r,l,p);if(b.shape&&b.data&&b.stride)return function(t,e){var r,a,s=e.dtype,u=e.shape.slice(),h=t.getParameter(t.MAX_TEXTURE_SIZE);if(u[0]<0||u[0]>h||u[1]<0||u[1]>h)throw Error("gl-texture2d: Invalid texture size");var l=d(u,e.stride.slice()),p=0;"float32"===s?p=t.FLOAT:"float64"===s?(p=t.FLOAT,l=!1,s="float32"):"uint8"===s?p=t.UNSIGNED_BYTE:(p=t.UNSIGNED_BYTE,l=!1,s="uint8");var g=0;if(2===u.length)g=t.LUMINANCE,u=[u[0],u[1],1],e=n(e.data,u,[e.stride[0],e.stride[1],1],e.offset);else if(3===u.length){if(1===u[2])g=t.ALPHA;else if(2===u[2])g=t.LUMINANCE_ALPHA;else if(3===u[2])g=t.RGB;else if(4===u[2])g=t.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords")}else throw Error("gl-texture2d: Invalid shape for texture");p!==t.FLOAT||t.getExtension("OES_texture_float")||(p=t.UNSIGNED_BYTE,l=!1);var m=e.size;if(l)r=0===e.offset&&e.data.length===m?e.data:e.data.subarray(e.offset,e.offset+m);else{var b=[u[2],u[2]*u[0],1],y=n(a=o.malloc(m,s),u,b,0);("float32"===s||"float64"===s)&&p===t.UNSIGNED_BYTE?f(y,e):i.assign(y,e),r=a.subarray(0,m)}var x=v(t);return t.texImage2D(t.TEXTURE_2D,0,g,u[0],u[1],0,g,p,r),l||o.free(a),new c(t,x,u[0],u[1],g,p)}(t,b)}throw Error("gl-texture2d: Invalid arguments for texture2d constructor")};var a=null,s=null,u=null;function h(t){return"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&t instanceof ImageData}var f=function(t,e){i.muls(t,e,255)};function l(t,e,r){var n=t.gl,i=n.getParameter(n.MAX_TEXTURE_SIZE);if(e<0||e>i||r<0||r>i)throw Error("gl-texture2d: Invalid texture size");return t._shape=[e,r],t.bind(),n.texImage2D(n.TEXTURE_2D,0,t.format,e,r,0,t.format,t.type,null),t._mipLevels=[0],t}function c(t,e,r,n,i,o){this.gl=t,this.handle=e,this.format=i,this.type=o,this._shape=[r,n],this._mipLevels=[0],this._magFilter=t.NEAREST,this._minFilter=t.NEAREST,this._wrapS=t.CLAMP_TO_EDGE,this._wrapT=t.CLAMP_TO_EDGE,this._anisoSamples=1;var a=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return a._wrapS},set:function(t){return a.wrapS=t}},{get:function(){return a._wrapT},set:function(t){return a.wrapT=t}}]),this._wrapVector=s;var u=[this._shape[0],this._shape[1]];Object.defineProperties(u,[{get:function(){return a._shape[0]},set:function(t){return a.width=t}},{get:function(){return a._shape[1]},set:function(t){return a.height=t}}]),this._shapeVector=u}var p=c.prototype;function d(t,e){return 3===t.length?1===e[2]&&e[1]===t[0]*t[2]&&e[0]===t[2]:1===e[0]&&e[1]===t[0]}function v(t){var e=t.createTexture();return t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),e}function g(t,e,r,n,i){var o=t.getParameter(t.MAX_TEXTURE_SIZE);if(e<0||e>o||r<0||r>o)throw Error("gl-texture2d: Invalid texture shape");if(i===t.FLOAT&&!t.getExtension("OES_texture_float"))throw Error("gl-texture2d: Floating point textures not supported on this platform");var a=v(t);return t.texImage2D(t.TEXTURE_2D,0,n,e,r,0,n,i,null),new c(t,a,e,r,n,i)}Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&!e.getExtension("OES_texture_float_linear")&&(t=e.NEAREST),0>s.indexOf(t))throw Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t),this._minFilter=t}},magFilter:{get:function(){return this._magFilter},set:function(t){this.bind();var e=this.gl;if(this.type===e.FLOAT&&a.indexOf(t)>=0&&!e.getExtension("OES_texture_float_linear")&&(t=e.NEAREST),0>s.indexOf(t))throw Error("gl-texture2d: Unknown filter mode "+t);return e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t),this._magFilter=t}},mipSamples:{get:function(){return this._anisoSamples},set:function(t){var e=this._anisoSamples;if(this._anisoSamples=0|Math.max(t,1),e!==this._anisoSamples){var r=this.gl.getExtension("EXT_texture_filter_anisotropic");r&&this.gl.texParameterf(this.gl.TEXTURE_2D,r.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(t){if(this.bind(),0>u.indexOf(t))throw Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,t),this._wrapS=t}},wrapT:{get:function(){return this._wrapT},set:function(t){if(this.bind(),0>u.indexOf(t))throw Error("gl-texture2d: Unknown wrap mode "+t);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,t),this._wrapT=t}},wrap:{get:function(){return this._wrapVector},set:function(t){if(Array.isArray(t)||(t=[t,t]),2!==t.length)throw Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var e=0;e<2;++e)if(0>u.indexOf(t[e]))throw Error("gl-texture2d: Unknown wrap mode "+t);this._wrapS=t[0],this._wrapT=t[1];var r=this.gl;return this.bind(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this._wrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this._wrapT),t}},shape:{get:function(){return this._shapeVector},set:function(t){if(Array.isArray(t)){if(2!==t.length)throw Error("gl-texture2d: Invalid texture shape")}else t=[0|t,0|t];return l(this,0|t[0],0|t[1]),[0|t[0],0|t[1]]}},width:{get:function(){return this._shape[0]},set:function(t){return l(this,t|=0,this._shape[1]),t}},height:{get:function(){return this._shape[1]},set:function(t){return t|=0,l(this,this._shape[0],t),t}}}),p.bind=function(t){var e=this.gl;return(void 0!==t&&e.activeTexture(e.TEXTURE0+(0|t)),e.bindTexture(e.TEXTURE_2D,this.handle),void 0!==t)?0|t:e.getParameter(e.ACTIVE_TEXTURE)-e.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var t=Math.min(this._shape[0],this._shape[1]),e=0;t>0;++e,t>>>=1)0>this._mipLevels.indexOf(e)&&this._mipLevels.push(e)},p.setPixels=function(t,e,r,a){var s=this.gl;this.bind(),Array.isArray(e)?(a=r,r=0|e[1],e=0|e[0]):(e=e||0,r=r||0),a=a||0;var u=h(t)?t:t.raw;if(u)0>this._mipLevels.indexOf(a)?(s.texImage2D(s.TEXTURE_2D,0,this.format,this.format,this.type,u),this._mipLevels.push(a)):s.texSubImage2D(s.TEXTURE_2D,a,e,r,this.format,this.type,u);else if(t.shape&&t.stride&&t.data){if(t.shape.length<2||e+t.shape[1]>this._shape[1]>>>a||r+t.shape[0]>this._shape[0]>>>a||e<0||r<0)throw Error("gl-texture2d: Texture dimensions are out of bounds");(function(t,e,r,a,s,u,h,l){var c=l.dtype,p=l.shape.slice();if(p.length<2||p.length>3)throw Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var v=0,g=0,m=d(p,l.stride.slice());if("float32"===c?v=t.FLOAT:"float64"===c?(v=t.FLOAT,m=!1,c="float32"):"uint8"===c?v=t.UNSIGNED_BYTE:(v=t.UNSIGNED_BYTE,m=!1,c="uint8"),2===p.length)g=t.LUMINANCE,p=[p[0],p[1],1],l=n(l.data,p,[l.stride[0],l.stride[1],1],l.offset);else if(3===p.length){if(1===p[2])g=t.ALPHA;else if(2===p[2])g=t.LUMINANCE_ALPHA;else if(3===p[2])g=t.RGB;else if(4===p[2])g=t.RGBA;else throw Error("gl-texture2d: Invalid shape for pixel coords");p[2]}else throw Error("gl-texture2d: Invalid shape for texture");if((g===t.LUMINANCE||g===t.ALPHA)&&(s===t.LUMINANCE||s===t.ALPHA)&&(g=s),g!==s)throw Error("gl-texture2d: Incompatible texture format for setPixels");var b=l.size,y=0>h.indexOf(a);if(y&&h.push(a),v===u&&m)0===l.offset&&l.data.length===b?y?t.texImage2D(t.TEXTURE_2D,a,s,p[0],p[1],0,s,u,l.data):t.texSubImage2D(t.TEXTURE_2D,a,e,r,p[0],p[1],s,u,l.data):y?t.texImage2D(t.TEXTURE_2D,a,s,p[0],p[1],0,s,u,l.data.subarray(l.offset,l.offset+b)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,p[0],p[1],s,u,l.data.subarray(l.offset,l.offset+b));else{var x,_=n(x=u===t.FLOAT?o.mallocFloat32(b):o.mallocUint8(b),p,[p[2],p[2]*p[0],1]);v===t.FLOAT&&u===t.UNSIGNED_BYTE?f(_,l):i.assign(_,l),y?t.texImage2D(t.TEXTURE_2D,a,s,p[0],p[1],0,s,u,x.subarray(0,b)):t.texSubImage2D(t.TEXTURE_2D,a,e,r,p[0],p[1],s,u,x.subarray(0,b)),u===t.FLOAT?o.freeFloat32(x):o.freeUint8(x)}})(s,e,r,a,this.format,this.type,this._mipLevels,t)}else throw Error("gl-texture2d: Unsupported data type")}},1433:function(t){"use strict";t.exports=function(t,e,r){e?e.bind():t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null);var n=0|t.getParameter(t.MAX_VERTEX_ATTRIBS);if(r){if(r.length>n)throw Error("gl-vao: Too many vertex attributes");for(var i=0;i<r.length;++i){var o=r[i];if(o.buffer){var a=o.buffer,s=o.size||4,u=o.type||t.FLOAT,h=!!o.normalized,f=o.stride||0,l=o.offset||0;a.bind(),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,s,u,h,f,l)}else{if("number"==typeof o)t.vertexAttrib1f(i,o);else if(1===o.length)t.vertexAttrib1f(i,o[0]);else if(2===o.length)t.vertexAttrib2f(i,o[0],o[1]);else if(3===o.length)t.vertexAttrib3f(i,o[0],o[1],o[2]);else if(4===o.length)t.vertexAttrib4f(i,o[0],o[1],o[2],o[3]);else throw Error("gl-vao: Invalid vertex attribute");t.disableVertexAttribArray(i)}}for(;i<n;++i)t.disableVertexAttribArray(i)}else{t.bindBuffer(t.ARRAY_BUFFER,null);for(var i=0;i<n;++i)t.disableVertexAttribArray(i)}}},870:function(t,e,r){"use strict";var n=r(1433);function i(t){this.gl=t,this._elements=null,this._attributes=null,this._elementsType=t.UNSIGNED_SHORT}i.prototype.bind=function(){n(this.gl,this._elements,this._attributes)},i.prototype.update=function(t,e,r){this._elements=e,this._attributes=t,this._elementsType=r||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._elements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},t.exports=function(t){return new i(t)}},7518:function(t,e,r){"use strict";var n=r(1433);function i(t,e,r,n,i,o){this.location=t,this.dimension=e,this.a=r,this.b=n,this.c=i,this.d=o}function o(t,e,r){this.gl=t,this._ext=e,this.handle=r,this._attribs=[],this._useElements=!1,this._elementsType=t.UNSIGNED_SHORT}i.prototype.bind=function(t){switch(this.dimension){case 1:t.vertexAttrib1f(this.location,this.a);break;case 2:t.vertexAttrib2f(this.location,this.a,this.b);break;case 3:t.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:t.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},o.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var t=0;t<this._attribs.length;++t)this._attribs[t].bind(this.gl)},o.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},o.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},o.prototype.update=function(t,e,r){if(this.bind(),n(this.gl,e,t),this.unbind(),this._attribs.length=0,t)for(var o=0;o<t.length;++o){var a=t[o];"number"==typeof a?this._attribs.push(new i(o,1,a)):Array.isArray(a)&&this._attribs.push(new i(o,a.length,a[0],a[1],a[2],a[3]))}this._useElements=!!e,this._elementsType=r||this.gl.UNSIGNED_SHORT},o.prototype.draw=function(t,e,r){r=r||0;var n=this.gl;this._useElements?n.drawElements(t,e,this._elementsType,r):n.drawArrays(t,r,e)},t.exports=function(t,e){return new o(t,e,e.createVertexArrayOES())}},8116:function(t,e,r){"use strict";var n=r(7518),i=r(870);function o(t){this.bindVertexArrayOES=t.bindVertexArray.bind(t),this.createVertexArrayOES=t.createVertexArray.bind(t),this.deleteVertexArrayOES=t.deleteVertexArray.bind(t)}t.exports=function(t,e,r,a){var s,u=t.createVertexArray?new o(t):t.getExtension("OES_vertex_array_object");return(s=u?n(t,u):i(t)).update(e,r,a),s}},5632:function(t){t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}},8192:function(t,e,r){t.exports=function(t,e){var r=n(t[0],t[1],t[2]),a=n(e[0],e[1],e[2]);i(r,r),i(a,a);var s=o(r,a);return s>1?0:Math.acos(s)};var n=r(2825),i=r(3536),o=r(244)},9226:function(t){t.exports=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}},3126:function(t){t.exports=function(t){var e=new Float32Array(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}},3990:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}},1091:function(t){t.exports=function(){var t=new Float32Array(3);return t[0]=0,t[1]=0,t[2]=0,t}},5911:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t}},5455:function(t,e,r){t.exports=r(7056)},7056:function(t){t.exports=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}},4008:function(t,e,r){t.exports=r(6690)},6690:function(t){t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}},244:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}},2613:function(t){t.exports=1e-6},9922:function(t,e,r){t.exports=function(t,e){var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(r-a)<=n*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=n*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=n*Math.max(1,Math.abs(o),Math.abs(u))};var n=r(2613)},9265:function(t){t.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}},2681:function(t){t.exports=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}},5137:function(t,e,r){t.exports=function(t,e,r,i,o,a){var s,u;for(e||(e=3),r||(r=0),u=i?Math.min(i*e+r,t.length):t.length,s=r;s<u;s+=e)n[0]=t[s],n[1]=t[s+1],n[2]=t[s+2],o(n,n,a),t[s]=n[0],t[s+1]=n[1],t[s+2]=n[2];return t};var n=r(1091)()},2825:function(t){t.exports=function(t,e,r){var n=new Float32Array(3);return n[0]=t,n[1]=e,n[2]=r,n}},2931:function(t,e,r){t.exports={EPSILON:r(2613),create:r(1091),clone:r(3126),angle:r(8192),fromValues:r(2825),copy:r(3990),set:r(1463),equals:r(9922),exactEquals:r(9265),add:r(5632),subtract:r(6843),sub:r(2229),multiply:r(5847),mul:r(4505),divide:r(6690),div:r(4008),min:r(8107),max:r(7417),floor:r(2681),ceil:r(9226),round:r(2447),scale:r(6621),scaleAndAdd:r(8489),distance:r(7056),dist:r(5455),squaredDistance:r(2953),sqrDist:r(6141),length:r(1387),len:r(868),squaredLength:r(3066),sqrLen:r(5486),negate:r(5093),inverse:r(811),normalize:r(3536),dot:r(244),cross:r(5911),lerp:r(6658),random:r(7636),transformMat4:r(5673),transformMat3:r(492),transformQuat:r(264),rotateX:r(6894),rotateY:r(109),rotateZ:r(8692),forEach:r(5137)}},811:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}},868:function(t,e,r){t.exports=r(1387)},1387:function(t){t.exports=function(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}},6658:function(t){t.exports=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}},7417:function(t){t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}},8107:function(t){t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}},4505:function(t,e,r){t.exports=r(5847)},5847:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}},5093:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}},3536:function(t){t.exports=function(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}},7636:function(t){t.exports=function(t,e){var r=2*Math.random()*Math.PI,n=2*Math.random()-1,i=Math.sqrt(1-n*n)*(e=e||1);return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}},6894:function(t){t.exports=function(t,e,r,n){var i=r[1],o=r[2],a=e[1]-i,s=e[2]-o,u=Math.sin(n),h=Math.cos(n);return t[0]=e[0],t[1]=i+a*h-s*u,t[2]=o+a*u+s*h,t}},109:function(t){t.exports=function(t,e,r,n){var i=r[0],o=r[2],a=e[0]-i,s=e[2]-o,u=Math.sin(n),h=Math.cos(n);return t[0]=i+s*u+a*h,t[1]=e[1],t[2]=o+s*h-a*u,t}},8692:function(t){t.exports=function(t,e,r,n){var i=r[0],o=r[1],a=e[0]-i,s=e[1]-o,u=Math.sin(n),h=Math.cos(n);return t[0]=i+a*h-s*u,t[1]=o+a*u+s*h,t[2]=e[2],t}},2447:function(t){t.exports=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}},6621:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}},8489:function(t){t.exports=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}},1463:function(t){t.exports=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}},6141:function(t,e,r){t.exports=r(2953)},5486:function(t,e,r){t.exports=r(3066)},2953:function(t){t.exports=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}},3066:function(t){t.exports=function(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}},2229:function(t,e,r){t.exports=r(6843)},6843:function(t){t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}},492:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}},5673:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t}},264:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],h=r[3],f=h*n+s*o-u*i,l=h*i+u*n-a*o,c=h*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=f*h+-(p*a)+-(l*u)- -(c*s),t[1]=l*h+-(p*s)+-(c*a)- -(f*u),t[2]=c*h+-(p*u)+-(f*s)- -(l*a),t}},4361:function(t){t.exports=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}},2335:function(t){t.exports=function(t){var e=new Float32Array(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}},2933:function(t){t.exports=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}},7536:function(t){t.exports=function(){var t=new Float32Array(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}},4691:function(t){t.exports=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(r*r+n*n+i*i+o*o)}},1373:function(t){t.exports=function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}},3750:function(t){t.exports=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}},3390:function(t){t.exports=function(t,e,r,n){var i=new Float32Array(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}},9970:function(t,e,r){t.exports={create:r(7536),clone:r(2335),fromValues:r(3390),copy:r(2933),set:r(4578),add:r(4361),subtract:r(6860),multiply:r(3576),divide:r(1373),min:r(2334),max:r(160),scale:r(9288),scaleAndAdd:r(4844),distance:r(4691),squaredDistance:r(7960),length:r(6808),squaredLength:r(483),negate:r(1498),inverse:r(4494),normalize:r(5177),dot:r(3750),lerp:r(2573),random:r(9131),transformMat4:r(5352),transformQuat:r(4041)}},4494:function(t){t.exports=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}},6808:function(t){t.exports=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.sqrt(e*e+r*r+n*n+i*i)}},2573:function(t){t.exports=function(t,e,r,n){var i=e[0],o=e[1],a=e[2],s=e[3];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t[3]=s+n*(r[3]-s),t}},160:function(t){t.exports=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}},2334:function(t){t.exports=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}},3576:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}},1498:function(t){t.exports=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}},5177:function(t){t.exports=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=o*a),t}},9131:function(t,e,r){var n=r(5177),i=r(9288);t.exports=function(t,e){return e=e||1,t[0]=Math.random(),t[1]=Math.random(),t[2]=Math.random(),t[3]=Math.random(),n(t,t),i(t,t,e),t}},9288:function(t){t.exports=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}},4844:function(t){t.exports=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}},4578:function(t){t.exports=function(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}},7960:function(t){t.exports=function(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return r*r+n*n+i*i+o*o}},483:function(t){t.exports=function(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}},6860:function(t){t.exports=function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}},5352:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,t}},4041:function(t){t.exports=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2],h=r[3],f=h*n+s*o-u*i,l=h*i+u*n-a*o,c=h*o+a*i-s*n,p=-a*n-s*i-u*o;return t[0]=f*h+-(p*a)+-(l*u)- -(c*s),t[1]=l*h+-(p*s)+-(c*a)- -(f*u),t[2]=c*h+-(p*u)+-(f*s)- -(l*a),t[3]=e[3],t}},1848:function(t,e,r){var n=r(4905),i=r(6468);t.exports=function(t){for(var e=Array.isArray(t)?t:n(t),r=0;r<e.length;r++){var o=e[r];if("preprocessor"===o.type){var a=o.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(a&&a[2]){var s=a[1],u=a[2];return(s?i(u):u).trim()}}}}},5874:function(t,e,r){t.exports=function(t){var e,r,h,f=0,l=0,c=999,p=[],d=[],v=1,g=0,m=0,b=!1,y=!1,x="",_=o,w=n;"300 es"===(t=t||{}).version&&(_=s,w=a);for(var E={},M={},f=0;f<_.length;f++)E[_[f]]=!0;for(var f=0;f<w.length;f++)M[w[f]]=!0;return function(t){return(d=[],null!==t)?function(t){var n;for(f=0,t.toString&&(t=t.toString()),x+=t.replace(/\r\n/g,"\n"),h=x.length;e=x[f],f<h;){switch(n=f,c){case 0:"/"===e&&"*"===r?(p.push(e),A(p.join("")),c=999):(p.push(e),r=e),f+=1;break;case 1:case 2:f=function(){return("\r"===e||"\n"===e)&&"\\"!==r?(A(p.join("")),c=999,f):(p.push(e),r=e,f+1)}();break;case 3:f=function(){if("."===r&&/\d/.test(e))return c=5,f;if("/"===r&&"*"===e)return c=0,f;if("/"===r&&"/"===e)return c=1,f;if("."===e&&p.length){for(;T(p););return c=5,f}if(";"===e||")"===e||"("===e){if(p.length)for(;T(p););return A(e),c=999,f+1}var t=2===p.length&&"="!==e;if(/[\w_\d\s]/.test(e)||t){for(;T(p););return c=999,f}return p.push(e),r=e,f+1}();break;case 4:f="."===e||/[eE]/.test(e)?(p.push(e),c=5,r=e,f+1):"x"===e&&1===p.length&&"0"===p[0]?(c=11,p.push(e),r=e,f+1):/[^\d]/.test(e)?(A(p.join("")),c=999,f):(p.push(e),r=e,f+1);break;case 11:f=/[^a-fA-F0-9]/.test(e)?(A(p.join("")),c=999,f):(p.push(e),r=e,f+1);break;case 5:"f"===e&&(p.push(e),r=e,f+=1),f=/[eE]/.test(e)||("-"===e||"+"===e)&&/[eE]/.test(r)?(p.push(e),r=e,f+1):/[^\d]/.test(e)?(A(p.join("")),c=999,f):(p.push(e),r=e,f+1);break;case 9999:f=function(){if(/[^\d\w_]/.test(e)){var t=p.join("");return c=M[t]?8:E[t]?7:6,A(p.join("")),c=999,f}return p.push(e),r=e,f+1}();break;case 9:f=/[^\s]/g.test(e)?(A(p.join("")),c=999,f):(p.push(e),r=e,f+1);break;case 999:p=p.length?[]:p,f="/"===r&&"*"===e?(m=l+f-1,c=0,r=e,f+1):"/"===r&&"/"===e?(m=l+f-1,c=1,r=e,f+1):("#"===e?(c=2,m=l+f):/\s/.test(e)?(c=9,m=l+f):(b=/\d/.test(e),y=/[^\w_]/.test(e),m=l+f,c=b?4:y?3:9999),f)}n!==f&&("\n"===x[n]?(g=0,++v):++g)}return l+=f,x=x.slice(f),d}(t):(p.length&&A(p.join("")),c=10,A("(eof)"),d)};function A(t){t.length&&d.push({type:u[c],data:t,position:m,line:v,column:g})}function T(t){for(var e,r,n=0;;){if(e=i.indexOf(t.slice(0,t.length+n).join("")),r=i[e],-1===e){if(n--+t.length>0)continue;r=t.slice(0,1).join("")}return A(r),m+=r.length,(p=p.slice(r.length)).length}}};var n=r(620),i=r(7827),o=r(6852),a=r(7932),s=r(3508),u=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},3508:function(t,e,r){var n=r(6852);n=n.slice().filter(function(t){return!/^(gl\_|texture)/.test(t)}),t.exports=n.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},6852:function(t){t.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},7932:function(t,e,r){var n=r(620);t.exports=n.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},620:function(t){t.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},7827:function(t){t.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},4905:function(t,e,r){var n=r(5874);t.exports=function(t,e){var r=n(e),i=[];return(i=i.concat(r(t))).concat(r(null))}},3236:function(t){t.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")}},7520:function(t,e,r){"use strict";var n=r(9507);t.exports=n&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch(e){t=!1}return t}()},3778:function(t,e){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */e.read=function(t,e,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,h=u>>1,f=-7,l=r?i-1:0,c=r?-1:1,p=t[e+l];for(l+=c,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=c,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+t[e+l],l+=c,f-=8);if(0===o)o=1-h;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=h}return(p?-1:1)*a*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var a,s,u,h=8*o-i-1,f=(1<<h)-1,l=f>>1,c=23===i?5960464477539062e-23:0,p=n?0:o-1,d=n?1:-1,v=e<0||0===e&&1/e<0?1:0;for(isNaN(e=Math.abs(e))||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),a+l>=1?e+=c/u:e+=c*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,h+=i;h>0;t[r+p]=255&a,p+=d,a/=256,h-=8);t[r+p-d]|=128*v}},8954:function(t,e,r){"use strict";t.exports=function(t,e){var r=t.length;if(0===r)throw Error("Must have at least d+1 points");var i=t[0].length;if(r<=i)throw Error("Must input at least d+1 points");var a=t.slice(0,i+1),s=n.apply(void 0,a);if(0===s)throw Error("Input not in general position");for(var u=Array(i+1),f=0;f<=i;++f)u[f]=f;s<0&&(u[0]=1,u[1]=0);for(var l=new o(u,Array(i+1),!1),c=l.adjacent,p=Array(i+2),f=0;f<=i;++f){for(var d=u.slice(),v=0;v<=i;++v)v===f&&(d[v]=-1);var g=d[0];d[0]=d[1],d[1]=g;var m=new o(d,Array(i+1),!0);c[f]=m,p[f]=m}p[i+1]=l;for(var f=0;f<=i;++f)for(var d=c[f].vertices,b=c[f].adjacent,v=0;v<=i;++v){var y=d[v];if(y<0){b[v]=l;continue}for(var x=0;x<=i;++x)0>c[x].vertices.indexOf(y)&&(b[v]=c[x])}for(var _=new h(i,a,p),w=!!e,f=i+1;f<r;++f)_.insert(t[f],w);return _.boundary()};var n=r(3250),i=r(6803).Fw;function o(t,e,r){this.vertices=t,this.adjacent=e,this.boundary=r,this.lastVisited=-1}function a(t,e,r){this.vertices=t,this.cell=e,this.index=r}function s(t,e){return i(t.vertices,e.vertices)}o.prototype.flip=function(){var t=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=t;var e=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=e};var u=[];function h(t,e,r){this.dimension=t,this.vertices=e,this.simplices=r,this.interior=r.filter(function(t){return!t.boundary}),this.tuple=Array(t+1);for(var i,o,a=0;a<=t;++a)this.tuple[a]=this.vertices[a];var s=u[t];s||(s=u[t]=((i=n[t+1])||(i=n),o=i,function(){var t=this.tuple;return o.apply(this,t)})),this.orient=s}var f=h.prototype;f.handleBoundaryDegeneracy=function(t,e){var r=this.dimension,n=this.vertices.length-1,i=this.tuple,o=this.vertices,a=[t];for(t.lastVisited=-n;a.length>0;)for(var s=(t=a.pop()).adjacent,u=0;u<=r;++u){var h=s[u];if(h.boundary&&!(h.lastVisited<=-n)){for(var f=h.vertices,l=0;l<=r;++l){var c=f[l];c<0?i[l]=e:i[l]=o[c]}var p=this.orient();if(p>0)return h;h.lastVisited=-n,0===p&&a.push(h)}}return null},f.walk=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,o=this.tuple,a=e?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[a];f:for(;!s.boundary;){for(var u=s.vertices,h=s.adjacent,f=0;f<=n;++f)o[f]=i[u[f]];s.lastVisited=r;for(var f=0;f<=n;++f){var l=h[f];if(!(l.lastVisited>=r)){var c=o[f];o[f]=t;var p=this.orient();if(o[f]=c,p<0){s=l;continue f}l.boundary?l.lastVisited=-r:l.lastVisited=r}}return}return s},f.addPeaks=function(t,e){var r=this.vertices.length-1,n=this.dimension,i=this.vertices,u=this.tuple,h=this.interior,f=this.simplices,l=[e];e.lastVisited=r,e.vertices[e.vertices.indexOf(-1)]=r,e.boundary=!1,h.push(e);for(var c=[];l.length>0;){var e=l.pop(),p=e.vertices,d=e.adjacent,v=p.indexOf(r);if(!(v<0))for(var g=0;g<=n;++g){if(g!==v){var m=d[g];if(m.boundary&&!(m.lastVisited>=r)){var b=m.vertices;if(m.lastVisited!==-r){for(var y=0,x=0;x<=n;++x)b[x]<0?(y=x,u[x]=t):u[x]=i[b[x]];if(this.orient()>0){b[y]=r,m.boundary=!1,h.push(m),l.push(m),m.lastVisited=r;continue}m.lastVisited=-r}var _=m.adjacent,w=p.slice(),E=d.slice(),M=new o(w,E,!0);f.push(M);var A=_.indexOf(e);if(!(A<0)){_[A]=M,E[v]=m,w[g]=-1,E[g]=e,d[g]=M,M.flip();for(var x=0;x<=n;++x){var T=w[x];if(!(T<0)&&T!==r){for(var R=Array(n-1),O=0,S=0;S<=n;++S){var k=w[S];k<0||S===x||(R[O++]=k)}c.push(new a(R,M,x))}}}}}}}c.sort(s);for(var g=0;g+1<c.length;g+=2){var C=c[g],L=c[g+1],I=C.index,P=L.index;I<0||P<0||(C.cell.adjacent[C.index]=L.cell,L.cell.adjacent[L.index]=C.cell)}},f.insert=function(t,e){var r=this.vertices;r.push(t);var n=this.walk(t,e);if(n){for(var i=this.dimension,o=this.tuple,a=0;a<=i;++a){var s=n.vertices[a];s<0?o[a]=t:o[a]=r[s]}var u=this.orient(o);!(u<0)&&(0!==u||(n=this.handleBoundaryDegeneracy(n,t)))&&this.addPeaks(t,n)}},f.boundary=function(){for(var t=this.dimension,e=[],r=this.simplices,n=r.length,i=0;i<n;++i){var o=r[i];if(o.boundary){for(var a=Array(t),s=o.vertices,u=0,h=0,f=0;f<=t;++f)s[f]>=0?a[u++]=s[f]:h=1&f;if(h===(1&t)){var l=a[0];a[0]=a[1],a[1]=l}e.push(a)}}return e}},3352:function(t,e,r){"use strict";var n=r(2478);function i(t,e,r,n,i){this.mid=t,this.left=e,this.right=r,this.leftPoints=n,this.rightPoints=i,this.count=(e?e.count:0)+(r?r.count:0)+n.length}t.exports=function(t){return new m(t&&0!==t.length?g(t):null)};var o=i.prototype;function a(t,e){t.mid=e.mid,t.left=e.left,t.right=e.right,t.leftPoints=e.leftPoints,t.rightPoints=e.rightPoints,t.count=e.count}function s(t,e){var r=g(e);t.mid=r.mid,t.left=r.left,t.right=r.right,t.leftPoints=r.leftPoints,t.rightPoints=r.rightPoints,t.count=r.count}function u(t,e){var r=t.intervals([]);r.push(e),s(t,r)}function h(t,e){var r=t.intervals([]),n=r.indexOf(e);return n<0?0:(r.splice(n,1),s(t,r),1)}function f(t,e,r){for(var n=0;n<t.length&&t[n][0]<=e;++n){var i=r(t[n]);if(i)return i}}function l(t,e,r){for(var n=t.length-1;n>=0&&t[n][1]>=e;--n){var i=r(t[n]);if(i)return i}}function c(t,e){for(var r=0;r<t.length;++r){var n=e(t[r]);if(n)return n}}function p(t,e){return t-e}function d(t,e){return t[0]-e[0]||t[1]-e[1]}function v(t,e){return t[1]-e[1]||t[0]-e[0]}function g(t){if(0===t.length)return null;for(var e=[],r=0;r<t.length;++r)e.push(t[r][0],t[r][1]);e.sort(p);for(var n=e[e.length>>1],o=[],a=[],s=[],r=0;r<t.length;++r){var u=t[r];u[1]<n?o.push(u):n<u[0]?a.push(u):s.push(u)}var h=s.slice();return s.sort(d),h.sort(v),new i(n,g(o),g(a),s,h)}function m(t){this.root=t}o.intervals=function(t){return t.push.apply(t,this.leftPoints),this.left&&this.left.intervals(t),this.right&&this.right.intervals(t),t},o.insert=function(t){var e=this.count-this.leftPoints.length;if(this.count+=1,t[1]<this.mid)this.left?4*(this.left.count+1)>3*(e+1)?u(this,t):this.left.insert(t):this.left=g([t]);else if(t[0]>this.mid)this.right?4*(this.right.count+1)>3*(e+1)?u(this,t):this.right.insert(t):this.right=g([t]);else{var r=n.ge(this.leftPoints,t,d),i=n.ge(this.rightPoints,t,v);this.leftPoints.splice(r,0,t),this.rightPoints.splice(i,0,t)}},o.remove=function(t){var e=this.count-this.leftPoints;if(t[1]<this.mid){if(!this.left)return 0;if(4*(this.right?this.right.count:0)>3*(e-1))return h(this,t);var r=this.left.remove(t);return 2===r?(this.left=null,this.count-=1,1):(1===r&&(this.count-=1),r)}if(t[0]>this.mid){if(!this.right)return 0;if(4*(this.left?this.left.count:0)>3*(e-1))return h(this,t);var r=this.right.remove(t);return 2===r?(this.right=null,this.count-=1,1):(1===r&&(this.count-=1),r)}if(1===this.count)return this.leftPoints[0]===t?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===t){if(this.left&&this.right){for(var i=this,o=this.left;o.right;)i=o,o=o.right;if(i===this)o.right=this.right;else{var s=this.left,r=this.right;i.count-=o.count,i.right=o.left,o.left=s,o.right=r}a(this,o),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?a(this,this.left):a(this,this.right);return 1}for(var s=n.ge(this.leftPoints,t,d);s<this.leftPoints.length&&this.leftPoints[s][0]===t[0];++s)if(this.leftPoints[s]===t){this.count-=1,this.leftPoints.splice(s,1);for(var r=n.ge(this.rightPoints,t,v);r<this.rightPoints.length&&this.rightPoints[r][1]===t[1];++r)if(this.rightPoints[r]===t)return this.rightPoints.splice(r,1),1}return 0},o.queryPoint=function(t,e){if(t<this.mid){if(this.left){var r=this.left.queryPoint(t,e);if(r)return r}return f(this.leftPoints,t,e)}if(!(t>this.mid))return c(this.leftPoints,e);if(this.right){var r=this.right.queryPoint(t,e);if(r)return r}return l(this.rightPoints,t,e)},o.queryInterval=function(t,e,r){if(t<this.mid&&this.left){var n=this.left.queryInterval(t,e,r);if(n)return n}if(e>this.mid&&this.right){var n=this.right.queryInterval(t,e,r);if(n)return n}return e<this.mid?f(this.leftPoints,e,r):t>this.mid?l(this.rightPoints,t,r):c(this.leftPoints,r)};var b=m.prototype;b.insert=function(t){this.root?this.root.insert(t):this.root=new i(t[0],null,null,[t],[t])},b.remove=function(t){if(this.root){var e=this.root.remove(t);return 2===e&&(this.root=null),0!==e}return!1},b.queryPoint=function(t,e){if(this.root)return this.root.queryPoint(t,e)},b.queryInterval=function(t,e,r){if(t<=e&&this.root)return this.root.queryInterval(t,e,r)},Object.defineProperty(b,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(b,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},7762:function(t){"use strict";t.exports=function(t){for(var e=Array(t),r=0;r<t;++r)e[r]=r;return e}},9507:function(t){t.exports=!0},7163:function(t){function e(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */t.exports=function(t){return null!=t&&(e(t)||"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&e(t.slice(0,0))||!!t._isBuffer)}},5219:function(t){"use strict";t.exports=function(t){for(var e,r=t.length,n=0;n<r;n++)if(((e=t.charCodeAt(n))<9||e>13)&&32!==e&&133!==e&&160!==e&&5760!==e&&6158!==e&&(e<8192||e>8205)&&8232!==e&&8233!==e&&8239!==e&&8287!==e&&8288!==e&&12288!==e&&65279!==e)return!1;return!0}},395:function(t){t.exports=function(t,e,r){return t*(1-r)+e*r}},2652:function(t,e,r){var n=r(4335),i=r(6864),o=r(1903),a=r(9921),s=r(7608),u=r(5665),h={length:r(1387),normalize:r(3536),dot:r(244),cross:r(5911)},f=i(),l=i(),c=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],d=[0,0,0];function v(t,e,r,n,i){t[0]=e[0]*n+r[0]*i,t[1]=e[1]*n+r[1]*i,t[2]=e[2]*n+r[2]*i}t.exports=function(t,e,r,i,g,m){if(e||(e=[0,0,0]),r||(r=[0,0,0]),i||(i=[0,0,0]),g||(g=[0,0,0,1]),m||(m=[0,0,0,1]),!n(f,t)||(o(l,f),l[3]=0,l[7]=0,l[11]=0,l[15]=1,Math.abs(1e-8>a(l))))return!1;var b,y,x,_,w,E=f[3],M=f[7],A=f[11],T=f[12],R=f[13],O=f[14],S=f[15];if(0!==E||0!==M||0!==A){if(c[0]=E,c[1]=M,c[2]=A,c[3]=S,!s(l,l))return!1;u(l,l),b=g,y=c[0],x=c[1],_=c[2],w=c[3],b[0]=l[0]*y+l[4]*x+l[8]*_+l[12]*w,b[1]=l[1]*y+l[5]*x+l[9]*_+l[13]*w,b[2]=l[2]*y+l[6]*x+l[10]*_+l[14]*w,b[3]=l[3]*y+l[7]*x+l[11]*_+l[15]*w}else g[0]=g[1]=g[2]=0,g[3]=1;if(e[0]=T,e[1]=R,e[2]=O,p[0][0]=f[0],p[0][1]=f[1],p[0][2]=f[2],p[1][0]=f[4],p[1][1]=f[5],p[1][2]=f[6],p[2][0]=f[8],p[2][1]=f[9],p[2][2]=f[10],r[0]=h.length(p[0]),h.normalize(p[0],p[0]),i[0]=h.dot(p[0],p[1]),v(p[1],p[1],p[0],1,-i[0]),r[1]=h.length(p[1]),h.normalize(p[1],p[1]),i[0]/=r[1],i[1]=h.dot(p[0],p[2]),v(p[2],p[2],p[0],1,-i[1]),i[2]=h.dot(p[1],p[2]),v(p[2],p[2],p[1],1,-i[2]),r[2]=h.length(p[2]),h.normalize(p[2],p[2]),i[1]/=r[2],i[2]/=r[2],h.cross(d,p[1],p[2]),0>h.dot(p[0],d))for(var k=0;k<3;k++)r[k]*=-1,p[k][0]*=-1,p[k][1]*=-1,p[k][2]*=-1;return m[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),m[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),m[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),m[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(m[0]=-m[0]),p[0][2]>p[2][0]&&(m[1]=-m[1]),p[1][0]>p[0][1]&&(m[2]=-m[2]),!0}},4335:function(t){t.exports=function(t,e){var r=e[15];if(0===r)return!1;for(var n=1/r,i=0;i<16;i++)t[i]=e[i]*n;return!0}},7442:function(t,e,r){var n=r(6658),i=r(7182),o=r(2652),a=r(9921),s=r(8648),u=l(),h=l(),f=l();function l(){return{translate:c(),scale:c(1),skew:c(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function c(t){return[t||0,t||0,t||0]}t.exports=function(t,e,r,l){if(0===a(e)||0===a(r))return!1;var c=o(e,u.translate,u.scale,u.skew,u.perspective,u.quaternion),p=o(r,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!!c&&!!p&&(n(f.translate,u.translate,h.translate,l),n(f.skew,u.skew,h.skew,l),n(f.scale,u.scale,h.scale,l),n(f.perspective,u.perspective,h.perspective,l),s(f.quaternion,u.quaternion,h.quaternion,l),i(t,f.translate,f.scale,f.skew,f.perspective,f.quaternion),!0)}},7182:function(t,e,r){var n={identity:r(7894),translate:r(7656),multiply:r(6760),create:r(6864),scale:r(2504),fromRotationTranslation:r(6743)};n.create();var i=n.create();t.exports=function(t,e,r,o,a,s){return n.identity(t),n.fromRotationTranslation(t,s,e),t[3]=a[0],t[7]=a[1],t[11]=a[2],t[15]=a[3],n.identity(i),0!==o[2]&&(i[9]=o[2],n.multiply(t,t,i)),0!==o[1]&&(i[9]=0,i[8]=o[1],n.multiply(t,t,i)),0!==o[0]&&(i[8]=0,i[4]=o[0],n.multiply(t,t,i)),n.scale(t,t,r),t}},4192:function(t,e,r){"use strict";var n=r(2478),i=r(7442),o=r(7608),a=r(5567),s=r(2408),u=r(7089),h=r(6582),f=r(7656);r(2504);var l=r(3536),c=[0,0,0];function p(t){this._components=t.slice(),this._time=[0],this.prevMatrix=t.slice(),this.nextMatrix=t.slice(),this.computedMatrix=t.slice(),this.computedInverse=t.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}t.exports=function(t){return new p((t=t||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var d=p.prototype;d.recalcMatrix=function(t){var e=this._time,r=n.le(e,t),a=this.computedMatrix;if(!(r<0)){var s=this._components;if(r===e.length-1)for(var u=16*r,h=0;h<16;++h)a[h]=s[u++];else{for(var f=e[r+1]-e[r],u=16*r,c=this.prevMatrix,p=!0,h=0;h<16;++h)c[h]=s[u++];for(var d=this.nextMatrix,h=0;h<16;++h)d[h]=s[u++],p=p&&c[h]===d[h];if(f<1e-6||p)for(var h=0;h<16;++h)a[h]=c[h];else i(a,c,d,(t-e[r])/f)}var v=this.computedUp;v[0]=a[1],v[1]=a[5],v[2]=a[9],l(v,v);var g=this.computedInverse;o(g,a);var m=this.computedEye,b=g[15];m[0]=g[12]/b,m[1]=g[13]/b,m[2]=g[14]/b;for(var y=this.computedCenter,x=Math.exp(this.computedRadius[0]),h=0;h<3;++h)y[h]=m[h]-a[2+4*h]*x}},d.idle=function(t){if(!(t<this.lastT())){for(var e=this._components,r=e.length-16,n=0;n<16;++n)e.push(e[r++]);this._time.push(t)}},d.flush=function(t){var e=n.gt(this._time,t)-2;e<0||(this._time.splice(0,e),this._components.splice(0,16*e))},d.lastT=function(){return this._time[this._time.length-1]},d.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||c,n=n||this.computedUp,this.setMatrix(t,h(this.computedMatrix,e,r,n));for(var i=0,o=0;o<3;++o)i+=Math.pow(r[o]-e[o],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},d.rotate=function(t,e,r,n){this.recalcMatrix(t);var i=this.computedInverse;e&&s(i,i,e),r&&a(i,i,r),n&&u(i,i,n),this.setMatrix(t,o(this.computedMatrix,i))};var v=[0,0,0];d.pan=function(t,e,r,n){v[0]=-(e||0),v[1]=-(r||0),v[2]=-(n||0),this.recalcMatrix(t);var i=this.computedInverse;f(i,i,v),this.setMatrix(t,o(i,i))},d.translate=function(t,e,r,n){v[0]=e||0,v[1]=r||0,v[2]=n||0,this.recalcMatrix(t);var i=this.computedMatrix;f(i,i,v),this.setMatrix(t,i)},d.setMatrix=function(t,e){if(!(t<this.lastT())){this._time.push(t);for(var r=0;r<16;++r)this._components.push(e[r])}},d.setDistance=function(t,e){this.computedRadius[0]=e},d.setDistanceLimits=function(t,e){var r=this._limits;r[0]=t,r[1]=e},d.getDistanceLimits=function(t){var e=this._limits;return t?(t[0]=e[0],t[1]=e[1],t):e}},3090:function(t,e,r){"use strict";t.exports=function(t){var e=t.length;if(e<3){for(var r=Array(e),i=0;i<e;++i)r[i]=i;return 2===e&&t[0][0]===t[1][0]&&t[0][1]===t[1][1]?[0]:r}for(var o=Array(e),i=0;i<e;++i)o[i]=i;o.sort(function(e,r){return t[e][0]-t[r][0]||t[e][1]-t[r][1]});for(var a=[o[0],o[1]],s=[o[0],o[1]],i=2;i<e;++i){for(var u=o[i],h=t[u],f=a.length;f>1&&0>=n(t[a[f-2]],t[a[f-1]],h);)f-=1,a.pop();for(a.push(u),f=s.length;f>1&&n(t[s[f-2]],t[s[f-1]],h)>=0;)f-=1,s.pop();s.push(u)}for(var r=Array(s.length+a.length-2),l=0,i=0,c=a.length;i<c;++i)r[l++]=a[i];for(var p=s.length-2;p>0;--p)r[l++]=s[p];return r};var n=r(3250)[3]},351:function(t,e,r){"use strict";t.exports=function(t,e){e||(e=t,t=window);var r=0,i=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function u(t){var e=!1;return"altKey"in t&&(e=e||t.altKey!==a.alt,a.alt=!!t.altKey),"shiftKey"in t&&(e=e||t.shiftKey!==a.shift,a.shift=!!t.shiftKey),"ctrlKey"in t&&(e=e||t.ctrlKey!==a.control,a.control=!!t.ctrlKey),"metaKey"in t&&(e=e||t.metaKey!==a.meta,a.meta=!!t.metaKey),e}function h(t,s){var h=n.x(s),f=n.y(s);"buttons"in s&&(t=0|s.buttons),(t!==r||h!==i||f!==o||u(s))&&(r=0|t,i=h||0,o=f||0,e&&e(r,i,o,a))}function f(t){h(0,t)}function l(){(r||i||o||a.shift||a.alt||a.meta||a.control)&&(i=o=0,r=0,a.shift=a.alt=a.control=a.meta=!1,e&&e(0,0,0,a))}function c(t){u(t)&&e&&e(r,i,o,a)}function p(t){0===n.buttons(t)?h(0,t):h(r,t)}function d(t){h(r|n.buttons(t),t)}function v(t){h(r&~n.buttons(t),t)}function g(){s||(s=!0,t.addEventListener("mousemove",p),t.addEventListener("mousedown",d),t.addEventListener("mouseup",v),t.addEventListener("mouseleave",f),t.addEventListener("mouseenter",f),t.addEventListener("mouseout",f),t.addEventListener("mouseover",f),t.addEventListener("blur",l),t.addEventListener("keyup",c),t.addEventListener("keydown",c),t.addEventListener("keypress",c),t!==window&&(window.addEventListener("blur",l),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}g();var m={element:t};return Object.defineProperties(m,{enabled:{get:function(){return s},set:function(e){e?g():s&&(s=!1,t.removeEventListener("mousemove",p),t.removeEventListener("mousedown",d),t.removeEventListener("mouseup",v),t.removeEventListener("mouseleave",f),t.removeEventListener("mouseenter",f),t.removeEventListener("mouseout",f),t.removeEventListener("mouseover",f),t.removeEventListener("blur",l),t.removeEventListener("keyup",c),t.removeEventListener("keydown",c),t.removeEventListener("keypress",c),t!==window&&(window.removeEventListener("blur",l),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))},enumerable:!0},buttons:{get:function(){return r},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),m};var n=r(4687)},24:function(t){var e={left:0,top:0};t.exports=function(t,r,n){r=r||t.currentTarget||t.srcElement,Array.isArray(n)||(n=[0,0]);var i,o=t.clientX||0,a=t.clientY||0,s=(i=r)===window||i===document||i===document.body?e:i.getBoundingClientRect();return n[0]=o-s.left,n[1]=a-s.top,n}},4687:function(t,e){"use strict";function r(t){return t.target||t.srcElement||window}e.buttons=function(t){if("object"==typeof t){if("buttons"in t)return t.buttons;if("which"in t){var e=t.which;if(2===e)return 4;if(3===e)return 2;if(e>0)return 1<<e-1}else if("button"in t){var e=t.button;if(1===e)return 4;if(2===e)return 2;if(e>=0)return 1<<e}}return 0},e.element=r,e.x=function(t){if("object"==typeof t){if("offsetX"in t)return t.offsetX;var e=r(t).getBoundingClientRect();return t.clientX-e.left}return 0},e.y=function(t){if("object"==typeof t){if("offsetY"in t)return t.offsetY;var e=r(t).getBoundingClientRect();return t.clientY-e.top}return 0}},8512:function(t,e,r){"use strict";var n=r(665);t.exports=function(t,e,r){"function"==typeof t&&(r=!!e,e=t,t=window);var i=n("ex",t),o=function(t){r&&t.preventDefault();var n=t.deltaX||0,o=t.deltaY||0,a=t.deltaZ||0,s=t.deltaMode,u=1;switch(s){case 1:u=i;break;case 2:u=window.innerHeight}if(n*=u,o*=u,a*=u,n||o||a)return e(n,o,a,t)};return t.addEventListener("wheel",o),o}},2640:function(t,e,r){"use strict";var n=r(1888);t.exports=function(t){function e(t){throw Error("ndarray-extract-contour: "+t)}"object"!=typeof t&&e("Must specify arguments");var r,o,a,s=t.order;Array.isArray(s)||e("Must specify order");var u=t.arrayArguments||1;u<1&&e("Must have at least one array argument"),0>(t.scalarArguments||0)&&e("Scalar arg count must be > 0"),"function"!=typeof t.vertex&&e("Must specify vertex creation function"),"function"!=typeof t.cell&&e("Must specify cell creation function"),"function"!=typeof t.phase&&e("Must specify phase function");for(var h=t.getters||[],f=Array(u),l=0;l<u;++l)h.indexOf(l)>=0?f[l]=!0:f[l]=!1;return r=t.vertex,o=t.cell,a=t.phase,(0,i[[f,s].join(",")])(r,o,a,n.mallocUint32,n.freeUint32)};var i={"false,0,1":function(t,e,r,n,i){return function(o,a,s,u){var h,f=0|o.shape[0],l=0|o.shape[1],c=o.data,p=0|o.offset,d=0|o.stride[0],v=0|o.stride[1],g=p,m=0|-d,b=0,y=0|-v,x=0,_=-d-v|0,w=0,E=0|d,M=v-d*f|0,A=0,T=0,R=0,O=2*f|0,S=n(O),k=n(O),C=0,L=0,I=-1,P=-1,B=0,F=0|-f,N=0|f,D=0,U=-f-1|0,z=f-1|0,j=0,V=0,G=0;for(A=0;A<f;++A)S[C++]=r(c[g],a,s,u),g+=E;if(g+=M,l>0){if(T=1,S[C++]=r(c[g],a,s,u),g+=E,f>0)for(A=1,h=c[g],L=S[C]=r(h,a,s,u),B=S[C+I],D=S[C+F],j=S[C+U],(L!==B||L!==D||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,B,D,j,a,s,u),V=k[C]=R++),C+=1,g+=E,A=2;A<f;++A)h=c[g],L=S[C]=r(h,a,s,u),B=S[C+I],D=S[C+F],j=S[C+U],(L!==B||L!==D||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,B,D,j,a,s,u),V=k[C]=R++,j!==B&&e(k[C+I],V,w,b,j,B,a,s,u)),C+=1,g+=E;for(g+=M,C=0,G=I,I=P,P=G,G=F,F=N,N=G,G=U,U=z,z=G,T=2;T<l;++T){if(S[C++]=r(c[g],a,s,u),g+=E,f>0)for(A=1,h=c[g],L=S[C]=r(h,a,s,u),B=S[C+I],D=S[C+F],j=S[C+U],(L!==B||L!==D||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,B,D,j,a,s,u),V=k[C]=R++,j!==D&&e(k[C+F],V,x,w,D,j,a,s,u)),C+=1,g+=E,A=2;A<f;++A)h=c[g],L=S[C]=r(h,a,s,u),B=S[C+I],D=S[C+F],j=S[C+U],(L!==B||L!==D||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,B,D,j,a,s,u),V=k[C]=R++,j!==D&&e(k[C+F],V,x,w,D,j,a,s,u),j!==B&&e(k[C+I],V,w,b,j,B,a,s,u)),C+=1,g+=E;1&T&&(C=0),G=I,I=P,P=G,G=F,F=N,N=G,G=U,U=z,z=G,g+=M}}i(k),i(S)}},"false,1,0":function(t,e,r,n,i){return function(o,a,s,u){var h,f=0|o.shape[0],l=0|o.shape[1],c=o.data,p=0|o.offset,d=0|o.stride[0],v=0|o.stride[1],g=p,m=0|-d,b=0,y=0|-v,x=0,_=-d-v|0,w=0,E=0|v,M=d-v*l|0,A=0,T=0,R=0,O=2*l|0,S=n(O),k=n(O),C=0,L=0,I=-1,P=-1,B=0,F=0|-l,N=0|l,D=0,U=-l-1|0,z=l-1|0,j=0,V=0,G=0;for(T=0;T<l;++T)S[C++]=r(c[g],a,s,u),g+=E;if(g+=M,f>0){if(A=1,S[C++]=r(c[g],a,s,u),g+=E,l>0)for(T=1,h=c[g],L=S[C]=r(h,a,s,u),D=S[C+F],B=S[C+I],j=S[C+U],(L!==D||L!==B||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,D,B,j,a,s,u),V=k[C]=R++),C+=1,g+=E,T=2;T<l;++T)h=c[g],L=S[C]=r(h,a,s,u),D=S[C+F],B=S[C+I],j=S[C+U],(L!==D||L!==B||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,D,B,j,a,s,u),V=k[C]=R++,j!==B&&e(k[C+I],V,x,w,B,j,a,s,u)),C+=1,g+=E;for(g+=M,C=0,G=F,F=N,N=G,G=I,I=P,P=G,G=U,U=z,z=G,A=2;A<f;++A){if(S[C++]=r(c[g],a,s,u),g+=E,l>0)for(T=1,h=c[g],L=S[C]=r(h,a,s,u),D=S[C+F],B=S[C+I],j=S[C+U],(L!==D||L!==B||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,D,B,j,a,s,u),V=k[C]=R++,j!==D&&e(k[C+F],V,w,b,j,D,a,s,u)),C+=1,g+=E,T=2;T<l;++T)h=c[g],L=S[C]=r(h,a,s,u),D=S[C+F],B=S[C+I],j=S[C+U],(L!==D||L!==B||L!==j)&&(t(A,T,h,b=c[g+m],x=c[g+y],w=c[g+_],L,D,B,j,a,s,u),V=k[C]=R++,j!==B&&e(k[C+I],V,x,w,B,j,a,s,u),j!==D&&e(k[C+F],V,w,b,j,D,a,s,u)),C+=1,g+=E;1&A&&(C=0),G=F,F=N,N=G,G=I,I=P,P=G,G=U,U=z,z=G,g+=M}}i(k),i(S)}}}},6199:function(t,e,r){"use strict";var n=r(1338),i={zero:function(t,e,r,n){var i=t[0],o=r[0];n|=0;var a=0;for(a=0;a<i;++a)e[n]=0,n+=o},fdTemplate1:function(t,e,r,n,i,o,a){var s=t[0],u=r[0],h=o[0],f=-1*u;n|=0,a|=0;var l=0;for(l=0;l<s;++l)i[a]=.5*(e[n+f]-e[n+u]),n+=u,a+=h},fdTemplate2:function(t,e,r,n,i,o,a,s,u,h){var f=t[0],l=t[1],c=r[0],p=r[1],d=o[0],v=o[1],g=u[0],m=u[1],b=-1*c,y=-1*p;n|=0,a|=0,h|=0;var x=0,_=0,w=c-l*p,E=d-l*v,M=g-l*m;for(_=0;_<f;++_){for(x=0;x<l;++x)i[a]=.5*(e[n+b]-e[n+c]),s[h]=.5*(e[n+y]-e[n+p]),n+=p,a+=v,h+=m;n+=w,a+=E,h+=M}}},o={cdiff:function(t){var e={};return function(r,n,i){var o=r.dtype,a=r.order,s=n.dtype,u=n.order,h=i.dtype,f=i.order,l=[o,a.join(),s,u.join(),h,f.join()].join(),c=e[l];return c||(e[l]=c=t([o,a,s,u,h,f])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},zero:function(t){var e={};return function(r){var n=r.dtype,i=r.order,o=[n,i.join()].join(),a=e[o];return a||(e[o]=a=t([n,i])),a(r.shape.slice(0),r.data,r.stride,0|r.offset)}},fdTemplate1:function(t){var e={};return function(r,n){var i=r.dtype,o=r.order,a=n.dtype,s=n.order,u=[i,o.join(),a,s.join()].join(),h=e[u];return h||(e[u]=h=t([i,o,a,s])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset)}},fdTemplate2:function(t){var e={};return function(r,n,i){var o=r.dtype,a=r.order,s=n.dtype,u=n.order,h=i.dtype,f=i.order,l=[o,a.join(),s,u.join(),h,f.join()].join(),c=e[l];return c||(e[l]=c=t([o,a,s,u,h,f])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}}};function a(t){return i[t.funcName]}function s(t){var e;return(0,o[(e={funcName:t.funcName}).funcName])(a.bind(void 0,e))}var u={},h={},f=s({funcName:"cdiff"}),l=s({funcName:"zero"});function c(t,e,r,n){return function(t,i){var o=i.shape.slice();return o[0]>2&&o[1]>2&&n(i.pick(-1,-1).lo(1,1).hi(o[0]-2,o[1]-2),t.pick(-1,-1,0).lo(1,1).hi(o[0]-2,o[1]-2),t.pick(-1,-1,1).lo(1,1).hi(o[0]-2,o[1]-2)),o[1]>2&&(r(i.pick(0,-1).lo(1).hi(o[1]-2),t.pick(0,-1,1).lo(1).hi(o[1]-2)),e(t.pick(0,-1,0).lo(1).hi(o[1]-2))),o[1]>2&&(r(i.pick(o[0]-1,-1).lo(1).hi(o[1]-2),t.pick(o[0]-1,-1,1).lo(1).hi(o[1]-2)),e(t.pick(o[0]-1,-1,0).lo(1).hi(o[1]-2))),o[0]>2&&(r(i.pick(-1,0).lo(1).hi(o[0]-2),t.pick(-1,0,0).lo(1).hi(o[0]-2)),e(t.pick(-1,0,1).lo(1).hi(o[0]-2))),o[0]>2&&(r(i.pick(-1,o[1]-1).lo(1).hi(o[0]-2),t.pick(-1,o[1]-1,0).lo(1).hi(o[0]-2)),e(t.pick(-1,o[1]-1,1).lo(1).hi(o[0]-2))),t.set(0,0,0,0),t.set(0,0,1,0),t.set(o[0]-1,0,0,0),t.set(o[0]-1,0,1,0),t.set(0,o[1]-1,0,0),t.set(0,o[1]-1,1,0),t.set(o[0]-1,o[1]-1,0,0),t.set(o[0]-1,o[1]-1,1,0),t}}t.exports=function(t,e,r){return(Array.isArray(r)||(r="string"==typeof r?n(e.dimension,r):n(e.dimension,"clamp")),0===e.size)?t:0===e.dimension?(t.set(0),t):(function(t){var e,r=t.join(),n=h[r];if(n)return n;for(var i=t.length,o=[f,l],a=1;a<=i;++a)o.push((e=a)in u?u[e]:u[e]=s({funcName:"fdTemplate"+e}));var n=c.apply(void 0,o);return h[r]=n,n})(r)(t,e)}},4317:function(t){"use strict";function e(t,e){var r=Math.floor(e),n=e-r,i=0<=r&&r<t.shape[0],o=0<=r+1&&r+1<t.shape[0];return(1-n)*(i?+t.get(r):0)+n*(o?+t.get(r+1):0)}function r(t,e,r){var n=Math.floor(e),i=e-n,o=0<=n&&n<t.shape[0],a=0<=n+1&&n+1<t.shape[0],s=Math.floor(r),u=r-s,h=0<=s&&s<t.shape[1],f=0<=s+1&&s+1<t.shape[1],l=o&&h?t.get(n,s):0,c=o&&f?t.get(n,s+1):0;return(1-u)*((1-i)*l+i*(a&&h?t.get(n+1,s):0))+u*((1-i)*c+i*(a&&f?t.get(n+1,s+1):0))}function n(t,e,r,n){var i=Math.floor(e),o=e-i,a=0<=i&&i<t.shape[0],s=0<=i+1&&i+1<t.shape[0],u=Math.floor(r),h=r-u,f=0<=u&&u<t.shape[1],l=0<=u+1&&u+1<t.shape[1],c=Math.floor(n),p=n-c,d=0<=c&&c<t.shape[2],v=0<=c+1&&c+1<t.shape[2],g=a&&f&&d?t.get(i,u,c):0,m=a&&l&&d?t.get(i,u+1,c):0,b=s&&f&&d?t.get(i+1,u,c):0,y=s&&l&&d?t.get(i+1,u+1,c):0,x=a&&f&&v?t.get(i,u,c+1):0,_=a&&l&&v?t.get(i,u+1,c+1):0;return(1-p)*((1-h)*((1-o)*g+o*b)+h*((1-o)*m+o*y))+p*((1-h)*((1-o)*x+o*(s&&f&&v?t.get(i+1,u,c+1):0))+h*((1-o)*_+o*(s&&l&&v?t.get(i+1,u+1,c+1):0)))}function i(t){var e,r,n=0|t.shape.length,i=Array(n),o=Array(n),a=Array(n),s=Array(n);for(e=0;e<n;++e)r=+arguments[e+1],i[e]=Math.floor(r),o[e]=r-i[e],a[e]=0<=i[e]&&i[e]<t.shape[e],s[e]=0<=i[e]+1&&i[e]+1<t.shape[e];var u,h,f,l=0;r:for(e=0;e<1<<n;++e){for(u=0,h=1,f=t.offset;u<n;++u)if(e&1<<u){if(!s[u])continue r;h*=o[u],f+=t.stride[u]*(i[u]+1)}else{if(!a[u])continue r;h*=1-o[u],f+=t.stride[u]*i[u]}l+=h*t.data[f]}return l}t.exports=function(t,o,a,s){switch(t.shape.length){case 0:return 0;case 1:return e(t,o);case 2:return r(t,o,a);case 3:return n(t,o,a,s);default:return i.apply(void 0,arguments)}},t.exports.d1=e,t.exports.d2=r,t.exports.d3=n},5298:function(t,e){"use strict";var r={"float64,2,1,0":function(){return function(t,e,r,n,i){var o=t[0],a=t[1],s=t[2],u=r[0],h=r[1],f=r[2];n|=0;var l=0,c=0,p=0,d=h-s*f,v=u-a*h;for(p=0;p<o;++p){for(c=0;c<a;++c){for(l=0;l<s;++l)e[n]/=i,n+=f;n+=d}n+=v}}},"uint8,2,0,1,float64,2,1,0":function(){return function(t,e,r,n,i,o,a,s){for(var u=t[0],h=t[1],f=t[2],l=r[0],c=r[1],p=r[2],d=o[0],v=o[1],g=o[2],m=n|=0,b=a|=0,y=0|t[0];y>0;){y<64?(u=y,y=0):(u=64,y-=64);for(var x=0|t[1];x>0;){x<64?(h=x,x=0):(h=64,x-=64),n=m+y*l+x*c,a=b+y*d+x*v;var _=0,w=0,E=0,M=l-f*p,A=c-u*l,T=d-f*g,R=v-u*d;for(E=0;E<h;++E){for(w=0;w<u;++w){for(_=0;_<f;++_)e[n]=i[a]*s,n+=p,a+=g;n+=M,a+=T}n+=A,a+=R}}}}},"float32,1,0,float32,1,0":function(){return function(t,e,r,n,i,o,a){var s=t[0],u=t[1],h=r[0],f=r[1],l=o[0],c=o[1];n|=0,a|=0;var p=0,d=0,v=h-u*f,g=l-u*c;for(d=0;d<s;++d){for(p=0;p<u;++p)e[n]=i[a],n+=f,a+=c;n+=v,a+=g}}},"float32,1,0,float32,0,1":function(){return function(t,e,r,n,i,o,a){for(var s=t[0],u=t[1],h=r[0],f=r[1],l=o[0],c=o[1],p=n|=0,d=a|=0,v=0|t[1];v>0;){v<64?(u=v,v=0):(u=64,v-=64);for(var g=0|t[0];g>0;){g<64?(s=g,g=0):(s=64,g-=64),n=p+v*f+g*h,a=d+v*c+g*l;var m=0,b=0,y=h-u*f,x=l-u*c;for(b=0;b<s;++b){for(m=0;m<u;++m)e[n]=i[a],n+=f,a+=c;n+=y,a+=x}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(t,e,r,n,i,o,a){for(var s=t[0],u=t[1],h=t[2],f=r[0],l=r[1],c=r[2],p=o[0],d=o[1],v=o[2],g=n|=0,m=a|=0,b=0|t[2];b>0;){b<64?(h=b,b=0):(h=64,b-=64);for(var y=0|t[0];y>0;){y<64?(s=y,y=0):(s=64,y-=64);for(var x=0|t[1];x>0;){x<64?(u=x,x=0):(u=64,x-=64),n=g+b*c+y*f+x*l,a=m+b*v+y*p+x*d;var _=0,w=0,E=0,M=f-h*c,A=l-s*f,T=p-h*v,R=d-s*p;for(E=0;E<u;++E){for(w=0;w<s;++w){for(_=0;_<h;++_)e[n]=i[a],n+=c,a+=v;n+=M,a+=T}n+=A,a+=R}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(t,e,r,n,i,o,a){var s=t[0],u=t[1],h=t[2],f=r[0],l=r[1],c=r[2],p=o[0],d=o[1],v=o[2];n|=0,a|=0;var g=0,m=0,b=0,y=f-h*c,x=l-s*f,_=p-h*v,w=d-s*p;for(b=0;b<u;++b){for(m=0;m<s;++m){for(g=0;g<h;++g)e[n]=i[a],n+=c,a+=v;n+=y,a+=_}n+=x,a+=w}}}},n=function(t,e){return(0,r[e.join(",")])()},i={mul:function(t){var e={};return function(r,n,i){var o=r.dtype,a=r.order,s=n.dtype,u=n.order,h=i.dtype,f=i.order,l=[o,a.join(),s,u.join(),h,f.join()].join(),c=e[l];return c||(e[l]=c=t([o,a,s,u,h,f])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},muls:function(t){var e={};return function(r,n,i){var o=r.dtype,a=r.order,s=n.dtype,u=n.order,h=[o,a.join(),s,u.join()].join(),f=e[h];return f||(e[h]=f=t([o,a,s,u])),f(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i)}},mulseq:function(t){var e={};return function(r,n){var i=r.dtype,o=r.order,a=[i,o.join()].join(),s=e[a];return s||(e[a]=s=t([i,o])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}},div:function(t){var e={};return function(r,n,i){var o=r.dtype,a=r.order,s=n.dtype,u=n.order,h=i.dtype,f=i.order,l=[o,a.join(),s,u.join(),h,f.join()].join(),c=e[l];return c||(e[l]=c=t([o,a,s,u,h,f])),c(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i.data,i.stride,0|i.offset)}},divs:function(t){var e={};return function(r,n,i){var o=r.dtype,a=r.order,s=n.dtype,u=n.order,h=[o,a.join(),s,u.join()].join(),f=e[h];return f||(e[h]=f=t([o,a,s,u])),f(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset,i)}},divseq:function(t){var e={};return function(r,n){var i=r.dtype,o=r.order,a=[i,o.join()].join(),s=e[a];return s||(e[a]=s=t([i,o])),s(r.shape.slice(0),r.data,r.stride,0|r.offset,n)}},assign:function(t){var e={};return function(r,n){var i=r.dtype,o=r.order,a=n.dtype,s=n.order,u=[i,o.join(),a,s.join()].join(),h=e[u];return h||(e[u]=h=t([i,o,a,s])),h(r.shape.slice(0),r.data,r.stride,0|r.offset,n.data,n.stride,0|n.offset)}}};function o(t){var e;return(0,i[(e={funcName:t.funcName}).funcName])(n.bind(void 0,e))}var a={mul:"*",div:"/"};!function(){for(var t in a)e[t]=o({funcName:t}),e[t+"s"]=o({funcName:t+"s"}),e[t+"seq"]=o({funcName:t+"seq"})}(),e.assign=o({funcName:"assign"})},9994:function(t,e,r){"use strict";var n=r(9618),i=r(8277);t.exports=function(t,e){for(var r=[],o=t,a=1;Array.isArray(o);)r.push(o.length),a*=o.length,o=o[0];return 0===r.length?n():(e||(e=n(new Float64Array(a),r)),i(e,t),e)}},8277:function(t){"use strict";var e,r;t.exports=(e=(function(){return function(t,e,r,n,i){var o=t[0],a=t[1],s=t[2],u=r[0],h=r[1],f=r[2],l=[0,0,0];n|=0;var c=0,p=0,d=0,v=h-s*f,g=u-a*h;for(d=0;d<o;++d){for(p=0;p<a;++p){for(c=0;c<s;++c){var m,b=i;for(m=0;m<l.length-1;++m)b=b[l[m]];e[n]=b[l[l.length-1]],n+=f,++l[2]}n+=v,l[2]-=s,++l[1]}n+=g,l[1]-=a,++l[0]}}}).bind(void 0,{funcName:"convert"}),r={},function(t,n){var i=t.dtype,o=t.order,a=[i,o.join()].join(),s=r[a];return s||(r[a]=s=e([i,o])),s(t.shape.slice(0),t.data,t.stride,0|t.offset,n)})},7640:function(t,e,r){"use strict";var n=r(1888);function i(t){return"uint32"===t?[n.mallocUint32,n.freeUint32]:null}var o={"uint32,1,0":function(t,e){return function(r,n,i,o,a,s,u,h,f,l,c){var p,d,v,g,m,b,y,x,_=r*a+o,w=t(h);for(p=r+1;p<=n;++p){for(d=p,_+=a,v=_,m=0,b=_,g=0;g<h;++g)w[m++]=i[b],b+=f;l:for(;d-- >r;){for(g=0,m=0,b=v-a;g<h;++g){if((y=i[b])<(x=w[m]))break l;if(y>x)break;b+=l,m+=c}for(g=0,m=v,b=v-a;g<h;++g)i[m]=i[b],m+=f,b+=f;v-=a}for(g=0,m=v,b=0;g<h;++g)i[m]=w[b++],m+=f}e(w)}}},a={"uint32,1,0":function(t,e,r){return function n(i,o,a,s,u,h,f,l,c,p,d){var v,g,m,b,y,x,_,w,E,M,A,T,R,O,S,k,C,L,I,P,B,F,N,D,U,z=(o-i+1)/6|0,j=i+z,V=o-z,G=i+o>>1,H=G-z,W=G+z,X=j,Y=H,q=G,Z=W,K=V,Q=i+1,J=o-1,$=!0,tt=0,te=0,tr=0,tn=e(l),ti=e(l);for(M=0,A=u*X,T=u*Y,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=X,X=Y,Y=g;break}if(tr<0)break;U+=p}for(M=0,A=u*Z,T=u*K,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=Z,Z=K,K=g;break}if(tr<0)break;U+=p}for(M=0,A=u*X,T=u*q,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=X,X=q,q=g;break}if(tr<0)break;U+=p}for(M=0,A=u*Y,T=u*q,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=Y,Y=q,q=g;break}if(tr<0)break;U+=p}for(M=0,A=u*X,T=u*Z,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=X,X=Z,Z=g;break}if(tr<0)break;U+=p}for(M=0,A=u*q,T=u*Z,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=q,q=Z,Z=g;break}if(tr<0)break;U+=p}for(M=0,A=u*Y,T=u*K,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=Y,Y=K,K=g;break}if(tr<0)break;U+=p}for(M=0,A=u*Y,T=u*q,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=Y,Y=q,q=g;break}if(tr<0)break;U+=p}for(M=0,A=u*Z,T=u*K,U=s;M<l;++M){if(_=A+U,w=T+U,(tr=a[_]-a[w])>0){g=Z,Z=K,K=g;break}if(tr<0)break;U+=p}for(M=0,A=u*X,T=u*Y,R=u*q,O=u*Z,S=u*K,k=u*j,C=u*G,L=u*V,D=0,U=s;M<l;++M)_=A+U,w=T+U,E=R+U,I=O+U,P=S+U,B=k+U,F=C+U,N=L+U,tn[D]=a[w],ti[D]=a[I],$=$&&tn[D]===ti[D],m=a[_],b=a[E],y=a[P],a[B]=m,a[F]=b,a[N]=y,++D,U+=c;for(M=0,A=u*H,T=u*i,U=s;M<l;++M)_=A+U,w=T+U,a[_]=a[w],U+=c;for(M=0,A=u*W,T=u*o,U=s;M<l;++M)_=A+U,w=T+U,a[_]=a[w],U+=c;if($)for(x=Q;x<=J;++x){for(M=0,_=s+x*u,D=0;M<l&&0==(tr=a[_]-tn[D]);++M)D+=d,_+=p;if(0!==tr){if(tr<0){if(x!==Q)for(M=0,A=u*x,T=u*Q,U=s;M<l;++M)_=A+U,w=T+U,v=a[_],a[_]=a[w],a[w]=v,U+=c;++Q}else for(;;){for(M=0,_=s+J*u,D=0;M<l&&0==(tr=a[_]-tn[D]);++M)D+=d,_+=p;if(tr>0)J--;else if(tr<0){for(M=0,A=u*x,T=u*Q,R=u*J,U=s;M<l;++M)_=A+U,w=T+U,E=R+U,v=a[_],a[_]=a[w],a[w]=a[E],a[E]=v,U+=c;++Q,--J;break}else{for(M=0,A=u*x,T=u*J,U=s;M<l;++M)_=A+U,w=T+U,v=a[_],a[_]=a[w],a[w]=v,U+=c;--J;break}}}}else for(x=Q;x<=J;++x){for(M=0,_=s+x*u,D=0;M<l&&0==(tt=a[_]-tn[D]);++M)D+=d,_+=p;if(tt<0){if(x!==Q)for(M=0,A=u*x,T=u*Q,U=s;M<l;++M)_=A+U,w=T+U,v=a[_],a[_]=a[w],a[w]=v,U+=c;++Q}else{for(M=0,_=s+x*u,D=0;M<l&&0==(te=a[_]-ti[D]);++M)D+=d,_+=p;if(te>0)for(;;){for(M=0,_=s+J*u,D=0;M<l&&0==(tr=a[_]-ti[D]);++M)D+=d,_+=p;if(tr>0){if(--J<x)break;continue}for(M=0,_=s+J*u,D=0;M<l&&0==(tr=a[_]-tn[D]);++M)D+=d,_+=p;if(tr<0){for(M=0,A=u*x,T=u*Q,R=u*J,U=s;M<l;++M)_=A+U,w=T+U,E=R+U,v=a[_],a[_]=a[w],a[w]=a[E],a[E]=v,U+=c;++Q,--J}else{for(M=0,A=u*x,T=u*J,U=s;M<l;++M)_=A+U,w=T+U,v=a[_],a[_]=a[w],a[w]=v,U+=c;--J}break}}}for(M=0,A=u*i,T=u*(Q-1),D=0,U=s;M<l;++M)_=A+U,w=T+U,a[_]=a[w],a[w]=tn[D],++D,U+=c;for(M=0,A=u*o,T=u*(J+1),D=0,U=s;M<l;++M)_=A+U,w=T+U,a[_]=a[w],a[w]=ti[D],++D,U+=c;if(Q-2-i<=32?t(i,Q-2,a,s,u,h,f,l,c,p,d):n(i,Q-2,a,s,u,h,f,l,c,p,d),o-(J+2)<=32?t(J+2,o,a,s,u,h,f,l,c,p,d):n(J+2,o,a,s,u,h,f,l,c,p,d),$){r(tn),r(ti);return}if(Q<j&&J>V){c:for(;;){for(M=0,_=s+Q*u,D=0,U=s;M<l;++M){if(a[_]!==tn[D])break c;++D,_+=c}++Q}p:for(;;){for(M=0,_=s+J*u,D=0,U=s;M<l;++M){if(a[_]!==ti[D])break p;++D,_+=c}--J}for(x=Q;x<=J;++x){for(M=0,_=s+x*u,D=0;M<l&&0==(tt=a[_]-tn[D]);++M)D+=d,_+=p;if(0===tt){if(x!==Q)for(M=0,A=u*x,T=u*Q,U=s;M<l;++M)_=A+U,w=T+U,v=a[_],a[_]=a[w],a[w]=v,U+=c;++Q}else{for(M=0,_=s+x*u,D=0;M<l&&0==(te=a[_]-ti[D]);++M)D+=d,_+=p;if(0===te)for(;;){for(M=0,_=s+J*u,D=0;M<l&&0==(tr=a[_]-ti[D]);++M)D+=d,_+=p;if(0===tr){if(--J<x)break;continue}for(M=0,_=s+J*u,D=0;M<l&&0==(tr=a[_]-tn[D]);++M)D+=d,_+=p;if(tr<0){for(M=0,A=u*x,T=u*Q,R=u*J,U=s;M<l;++M)_=A+U,w=T+U,E=R+U,v=a[_],a[_]=a[w],a[w]=a[E],a[E]=v,U+=c;++Q,--J}else{for(M=0,A=u*x,T=u*J,U=s;M<l;++M)_=A+U,w=T+U,v=a[_],a[_]=a[w],a[w]=v,U+=c;--J}break}}}}r(tn),r(ti),J-Q<=32?t(Q,J,a,s,u,h,f,l,c,p,d):n(Q,J,a,s,u,h,f,l,c,p,d)}}},s={"uint32,1,0":function(t,e){return function(r){var n=r.data,i=0|r.offset,o=r.shape,a=r.stride,s=0|a[0],u=0|o[0],h=0|a[1],f=0|o[1];u<=32?t(0,u-1,n,i,s,h,u,f,h,h,1):e(0,u-1,n,i,s,h,u,f,h,h,1)}}};t.exports=function(t,e){var r,n,u,h,f=s[[e,t].join(",")],l=(r=i(e),n=o[[e,t].join(",")],r?n(r[0],r[1]):n()),c=(u=i(e),h=a[[e,t].join(",")],t.length>1&&u?h(l,u[0],u[1]):h(l));return f(l,c)}},446:function(t,e,r){"use strict";var n=r(7640),i={};t.exports=function(t){var e=t.order,r=t.dtype,o=[e,r].join(":"),a=i[o];return a||(i[o]=a=n(e,r)),a(t),t}},9618:function(t,e,r){var n=r(7163),i="undefined"!=typeof Float64Array;function o(t,e){return t[0]-e[0]}function a(){var t,e=this.stride,r=Array(e.length);for(t=0;t<r.length;++t)r[t]=[Math.abs(e[t]),t];r.sort(o);var n=Array(r.length);for(t=0;t<n.length;++t)n[t]=r[t][1];return n}var s={T:function(t){function e(t){this.data=t}var r=e.prototype;return r.dtype=t,r.index=function(){return -1},r.size=0,r.dimension=-1,r.shape=r.stride=r.order=[],r.lo=r.hi=r.transpose=r.step=function(){return new e(this.data)},r.get=r.set=function(){},r.pick=function(){return null},function(t){return new e(t)}},0:function(t,e){function r(t,e){this.data=t,this.offset=e}var n=r.prototype;return n.dtype=t,n.index=function(){return this.offset},n.dimension=0,n.size=1,n.shape=n.stride=n.order=[],n.lo=n.hi=n.transpose=n.step=function(){return new r(this.data,this.offset)},n.pick=function(){return e(this.data)},n.valueOf=n.get=function(){return"generic"===t?this.data.get(this.offset):this.data[this.offset]},n.set=function(e){return"generic"===t?this.data.set(this.offset,e):this.data[this.offset]=e},function(t,e,n,i){return new r(t,i)}},1:function(t,e,r){function n(t,e,r,n){this.data=t,this.shape=[e],this.stride=[r],this.offset=0|n}var i=n.prototype;return i.dtype=t,i.dimension=1,Object.defineProperty(i,"size",{get:function(){return this.shape[0]}}),i.order=[0],i.set=function(e,r){return"generic"===t?this.data.set(this.offset+this.stride[0]*e,r):this.data[this.offset+this.stride[0]*e]=r},i.get=function(e){return"generic"===t?this.data.get(this.offset+this.stride[0]*e):this.data[this.offset+this.stride[0]*e]},i.index=function(t){return this.offset+this.stride[0]*t},i.hi=function(t){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,this.stride[0],this.offset)},i.lo=function(t){var e=this.offset,r=0,i=this.shape[0],o=this.stride[0];return"number"==typeof t&&t>=0&&(e+=o*(r=0|t),i-=r),new n(this.data,i,o,e)},i.step=function(t){var e=this.shape[0],r=this.stride[0],i=this.offset,o=0,a=Math.ceil;return"number"==typeof t&&((o=0|t)<0?(i+=r*(e-1),e=a(-e/o)):e=a(e/o),r*=o),new n(this.data,e,r,i)},i.transpose=function(t){t=void 0===t?0:0|t;var e=this.shape,r=this.stride;return new n(this.data,e[t],r[t],this.offset)},i.pick=function(t){var r=[],n=[],i=this.offset;return"number"==typeof t&&t>=0?i=i+this.stride[0]*t|0:(r.push(this.shape[0]),n.push(this.stride[0])),(0,e[r.length+1])(this.data,r,n,i)},function(t,e,r,i){return new n(t,e[0],r[0],i)}},2:function(t,e,r){function n(t,e,r,n,i,o){this.data=t,this.shape=[e,r],this.stride=[n,i],this.offset=0|o}var i=n.prototype;return i.dtype=t,i.dimension=2,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(i,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),i.set=function(e,r,n){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r,n):this.data[this.offset+this.stride[0]*e+this.stride[1]*r]=n},i.get=function(e,r){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r):this.data[this.offset+this.stride[0]*e+this.stride[1]*r]},i.index=function(t,e){return this.offset+this.stride[0]*t+this.stride[1]*e},i.hi=function(t,e){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,this.stride[0],this.stride[1],this.offset)},i.lo=function(t,e){var r=this.offset,i=0,o=this.shape[0],a=this.shape[1],s=this.stride[0],u=this.stride[1];return"number"==typeof t&&t>=0&&(r+=s*(i=0|t),o-=i),"number"==typeof e&&e>=0&&(r+=u*(i=0|e),a-=i),new n(this.data,o,a,s,u,r)},i.step=function(t,e){var r=this.shape[0],i=this.shape[1],o=this.stride[0],a=this.stride[1],s=this.offset,u=0,h=Math.ceil;return"number"==typeof t&&((u=0|t)<0?(s+=o*(r-1),r=h(-r/u)):r=h(r/u),o*=u),"number"==typeof e&&((u=0|e)<0?(s+=a*(i-1),i=h(-i/u)):i=h(i/u),a*=u),new n(this.data,r,i,o,a,s)},i.transpose=function(t,e){t=void 0===t?0:0|t,e=void 0===e?1:0|e;var r=this.shape,i=this.stride;return new n(this.data,r[t],r[e],i[t],i[e],this.offset)},i.pick=function(t,r){var n=[],i=[],o=this.offset;return"number"==typeof t&&t>=0?o=o+this.stride[0]*t|0:(n.push(this.shape[0]),i.push(this.stride[0])),"number"==typeof r&&r>=0?o=o+this.stride[1]*r|0:(n.push(this.shape[1]),i.push(this.stride[1])),(0,e[n.length+1])(this.data,n,i,o)},function(t,e,r,i){return new n(t,e[0],e[1],r[0],r[1],i)}},3:function(t,e,r){function n(t,e,r,n,i,o,a,s){this.data=t,this.shape=[e,r,n],this.stride=[i,o,a],this.offset=0|s}var i=n.prototype;return i.dtype=t,i.dimension=3,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(i,"order",{get:function(){var t=Math.abs(this.stride[0]),e=Math.abs(this.stride[1]),r=Math.abs(this.stride[2]);return t>e?e>r?[2,1,0]:t>r?[1,2,0]:[1,0,2]:t>r?[2,0,1]:r>e?[0,1,2]:[0,2,1]}}),i.set=function(e,r,n,i){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n,i):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n]=i},i.get=function(e,r,n){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n]},i.index=function(t,e,r){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r},i.hi=function(t,e,r){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,this.stride[0],this.stride[1],this.stride[2],this.offset)},i.lo=function(t,e,r){var i=this.offset,o=0,a=this.shape[0],s=this.shape[1],u=this.shape[2],h=this.stride[0],f=this.stride[1],l=this.stride[2];return"number"==typeof t&&t>=0&&(i+=h*(o=0|t),a-=o),"number"==typeof e&&e>=0&&(i+=f*(o=0|e),s-=o),"number"==typeof r&&r>=0&&(i+=l*(o=0|r),u-=o),new n(this.data,a,s,u,h,f,l,i)},i.step=function(t,e,r){var i=this.shape[0],o=this.shape[1],a=this.shape[2],s=this.stride[0],u=this.stride[1],h=this.stride[2],f=this.offset,l=0,c=Math.ceil;return"number"==typeof t&&((l=0|t)<0?(f+=s*(i-1),i=c(-i/l)):i=c(i/l),s*=l),"number"==typeof e&&((l=0|e)<0?(f+=u*(o-1),o=c(-o/l)):o=c(o/l),u*=l),"number"==typeof r&&((l=0|r)<0?(f+=h*(a-1),a=c(-a/l)):a=c(a/l),h*=l),new n(this.data,i,o,a,s,u,h,f)},i.transpose=function(t,e,r){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r;var i=this.shape,o=this.stride;return new n(this.data,i[t],i[e],i[r],o[t],o[e],o[r],this.offset)},i.pick=function(t,r,n){var i=[],o=[],a=this.offset;return"number"==typeof t&&t>=0?a=a+this.stride[0]*t|0:(i.push(this.shape[0]),o.push(this.stride[0])),"number"==typeof r&&r>=0?a=a+this.stride[1]*r|0:(i.push(this.shape[1]),o.push(this.stride[1])),"number"==typeof n&&n>=0?a=a+this.stride[2]*n|0:(i.push(this.shape[2]),o.push(this.stride[2])),(0,e[i.length+1])(this.data,i,o,a)},function(t,e,r,i){return new n(t,e[0],e[1],e[2],r[0],r[1],r[2],i)}},4:function(t,e,r){function n(t,e,r,n,i,o,a,s,u,h){this.data=t,this.shape=[e,r,n,i],this.stride=[o,a,s,u],this.offset=0|h}var i=n.prototype;return i.dtype=t,i.dimension=4,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(i,"order",{get:r}),i.set=function(e,r,n,i,o){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i,o):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i]=o},i.get=function(e,r,n,i){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i]},i.index=function(t,e,r,n){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r+this.stride[3]*n},i.hi=function(t,e,r,i){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof i||i<0?this.shape[3]:0|i,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},i.lo=function(t,e,r,i){var o=this.offset,a=0,s=this.shape[0],u=this.shape[1],h=this.shape[2],f=this.shape[3],l=this.stride[0],c=this.stride[1],p=this.stride[2],d=this.stride[3];return"number"==typeof t&&t>=0&&(o+=l*(a=0|t),s-=a),"number"==typeof e&&e>=0&&(o+=c*(a=0|e),u-=a),"number"==typeof r&&r>=0&&(o+=p*(a=0|r),h-=a),"number"==typeof i&&i>=0&&(o+=d*(a=0|i),f-=a),new n(this.data,s,u,h,f,l,c,p,d,o)},i.step=function(t,e,r,i){var o=this.shape[0],a=this.shape[1],s=this.shape[2],u=this.shape[3],h=this.stride[0],f=this.stride[1],l=this.stride[2],c=this.stride[3],p=this.offset,d=0,v=Math.ceil;return"number"==typeof t&&((d=0|t)<0?(p+=h*(o-1),o=v(-o/d)):o=v(o/d),h*=d),"number"==typeof e&&((d=0|e)<0?(p+=f*(a-1),a=v(-a/d)):a=v(a/d),f*=d),"number"==typeof r&&((d=0|r)<0?(p+=l*(s-1),s=v(-s/d)):s=v(s/d),l*=d),"number"==typeof i&&((d=0|i)<0?(p+=c*(u-1),u=v(-u/d)):u=v(u/d),c*=d),new n(this.data,o,a,s,u,h,f,l,c,p)},i.transpose=function(t,e,r,i){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r,i=void 0===i?3:0|i;var o=this.shape,a=this.stride;return new n(this.data,o[t],o[e],o[r],o[i],a[t],a[e],a[r],a[i],this.offset)},i.pick=function(t,r,n,i){var o=[],a=[],s=this.offset;return"number"==typeof t&&t>=0?s=s+this.stride[0]*t|0:(o.push(this.shape[0]),a.push(this.stride[0])),"number"==typeof r&&r>=0?s=s+this.stride[1]*r|0:(o.push(this.shape[1]),a.push(this.stride[1])),"number"==typeof n&&n>=0?s=s+this.stride[2]*n|0:(o.push(this.shape[2]),a.push(this.stride[2])),"number"==typeof i&&i>=0?s=s+this.stride[3]*i|0:(o.push(this.shape[3]),a.push(this.stride[3])),(0,e[o.length+1])(this.data,o,a,s)},function(t,e,r,i){return new n(t,e[0],e[1],e[2],e[3],r[0],r[1],r[2],r[3],i)}},5:function(t,e,r){function n(t,e,r,n,i,o,a,s,u,h,f,l){this.data=t,this.shape=[e,r,n,i,o],this.stride=[a,s,u,h,f],this.offset=0|l}var i=n.prototype;return i.dtype=t,i.dimension=5,Object.defineProperty(i,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(i,"order",{get:r}),i.set=function(e,r,n,i,o,a){return"generic"===t?this.data.set(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*o,a):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*o]=a},i.get=function(e,r,n,i,o){return"generic"===t?this.data.get(this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*o):this.data[this.offset+this.stride[0]*e+this.stride[1]*r+this.stride[2]*n+this.stride[3]*i+this.stride[4]*o]},i.index=function(t,e,r,n,i){return this.offset+this.stride[0]*t+this.stride[1]*e+this.stride[2]*r+this.stride[3]*n+this.stride[4]*i},i.hi=function(t,e,r,i,o){return new n(this.data,"number"!=typeof t||t<0?this.shape[0]:0|t,"number"!=typeof e||e<0?this.shape[1]:0|e,"number"!=typeof r||r<0?this.shape[2]:0|r,"number"!=typeof i||i<0?this.shape[3]:0|i,"number"!=typeof o||o<0?this.shape[4]:0|o,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},i.lo=function(t,e,r,i,o){var a=this.offset,s=0,u=this.shape[0],h=this.shape[1],f=this.shape[2],l=this.shape[3],c=this.shape[4],p=this.stride[0],d=this.stride[1],v=this.stride[2],g=this.stride[3],m=this.stride[4];return"number"==typeof t&&t>=0&&(a+=p*(s=0|t),u-=s),"number"==typeof e&&e>=0&&(a+=d*(s=0|e),h-=s),"number"==typeof r&&r>=0&&(a+=v*(s=0|r),f-=s),"number"==typeof i&&i>=0&&(a+=g*(s=0|i),l-=s),"number"==typeof o&&o>=0&&(a+=m*(s=0|o),c-=s),new n(this.data,u,h,f,l,c,p,d,v,g,m,a)},i.step=function(t,e,r,i,o){var a=this.shape[0],s=this.shape[1],u=this.shape[2],h=this.shape[3],f=this.shape[4],l=this.stride[0],c=this.stride[1],p=this.stride[2],d=this.stride[3],v=this.stride[4],g=this.offset,m=0,b=Math.ceil;return"number"==typeof t&&((m=0|t)<0?(g+=l*(a-1),a=b(-a/m)):a=b(a/m),l*=m),"number"==typeof e&&((m=0|e)<0?(g+=c*(s-1),s=b(-s/m)):s=b(s/m),c*=m),"number"==typeof r&&((m=0|r)<0?(g+=p*(u-1),u=b(-u/m)):u=b(u/m),p*=m),"number"==typeof i&&((m=0|i)<0?(g+=d*(h-1),h=b(-h/m)):h=b(h/m),d*=m),"number"==typeof o&&((m=0|o)<0?(g+=v*(f-1),f=b(-f/m)):f=b(f/m),v*=m),new n(this.data,a,s,u,h,f,l,c,p,d,v,g)},i.transpose=function(t,e,r,i,o){t=void 0===t?0:0|t,e=void 0===e?1:0|e,r=void 0===r?2:0|r,i=void 0===i?3:0|i,o=void 0===o?4:0|o;var a=this.shape,s=this.stride;return new n(this.data,a[t],a[e],a[r],a[i],a[o],s[t],s[e],s[r],s[i],s[o],this.offset)},i.pick=function(t,r,n,i,o){var a=[],s=[],u=this.offset;return"number"==typeof t&&t>=0?u=u+this.stride[0]*t|0:(a.push(this.shape[0]),s.push(this.stride[0])),"number"==typeof r&&r>=0?u=u+this.stride[1]*r|0:(a.push(this.shape[1]),s.push(this.stride[1])),"number"==typeof n&&n>=0?u=u+this.stride[2]*n|0:(a.push(this.shape[2]),s.push(this.stride[2])),"number"==typeof i&&i>=0?u=u+this.stride[3]*i|0:(a.push(this.shape[3]),s.push(this.stride[3])),"number"==typeof o&&o>=0?u=u+this.stride[4]*o|0:(a.push(this.shape[4]),s.push(this.stride[4])),(0,e[a.length+1])(this.data,a,s,u)},function(t,e,r,i){return new n(t,e[0],e[1],e[2],e[3],e[4],r[0],r[1],r[2],r[3],r[4],i)}}},u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};t.exports=function(t,e,r,o){if(void 0===t){var h=u.array[0];return h([])}"number"==typeof t&&(t=[t]),void 0===e&&(e=[t.length]);var f=e.length;if(void 0===r){r=Array(f);for(var l=f-1,c=1;l>=0;--l)r[l]=c,c*=e[l]}if(void 0===o){o=0;for(var l=0;l<f;++l)r[l]<0&&(o-=(e[l]-1)*r[l])}for(var p=function(t){if(n(t))return"buffer";if(i)switch(Object.prototype.toString.call(t)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(t)?"array":"generic"}(t),d=u[p];d.length<=f+1;)d.push(function(t,e){var r=s[-1===e?"T":String(e)];return -1===e?r(t):0===e?r(t,u[t][0]):r(t,u[t],a)}(p,d.length-1));var h=d[f+1];return h(t,e,r,o)}},1278:function(t,e,r){"use strict";var n=r(2361);t.exports=function(t,e){if(isNaN(t)||isNaN(e))return NaN;if(t===e)return t;if(0===t)return e<0?-.000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005:5e-324;var r=n.hi(t),i=n.lo(t);return e>t==t>0?4294967295===i?(r+=1,i=0):i+=1:0===i?(i=4294967295,r-=1):i-=1,n.pack(i,r)}},8406:function(t,e){e.vertexNormals=function(t,e,r){for(var n=e.length,i=Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a)i[a]=[0,0,0];for(var a=0;a<t.length;++a)for(var s=t[a],u=0,h=s[s.length-1],f=s[0],l=0;l<s.length;++l){u=h,h=f,f=s[(l+1)%s.length];for(var c=e[u],p=e[h],d=e[f],v=[,,,],g=0,m=[,,,],b=0,y=0;y<3;++y)v[y]=c[y]-p[y],g+=v[y]*v[y],m[y]=d[y]-p[y],b+=m[y]*m[y];if(g*b>o)for(var x=i[h],_=1/Math.sqrt(g*b),y=0;y<3;++y){var w=(y+1)%3,E=(y+2)%3;x[y]+=_*(m[w]*v[E]-m[E]*v[w])}}for(var a=0;a<n;++a){for(var x=i[a],M=0,y=0;y<3;++y)M+=x[y]*x[y];if(M>o)for(var _=1/Math.sqrt(M),y=0;y<3;++y)x[y]*=_;else for(var y=0;y<3;++y)x[y]=0}return i},e.faceNormals=function(t,e,r){for(var n=t.length,i=Array(n),o=void 0===r?1e-6:r,a=0;a<n;++a){for(var s=t[a],u=[,,,],h=0;h<3;++h)u[h]=e[s[h]];for(var f=[,,,],l=[,,,],h=0;h<3;++h)f[h]=u[1][h]-u[0][h],l[h]=u[2][h]-u[0][h];for(var c=[,,,],p=0,h=0;h<3;++h){var d=(h+1)%3,v=(h+2)%3;c[h]=f[d]*l[v]-f[v]*l[d],p+=c[h]*c[h]}p=p>o?1/Math.sqrt(p):0;for(var h=0;h<3;++h)c[h]*=p;i[a]=c}return i}},4081:function(t){"use strict";t.exports=function(t,e,r,n,i,o,a,s,u,h){var f=e+o+h;if(l>0){var l=Math.sqrt(f+1);t[0]=.5*(a-u)/l,t[1]=.5*(s-n)/l,t[2]=.5*(r-o)/l,t[3]=.5*l}else{var c=Math.max(e,o,h),l=Math.sqrt(2*c-f+1);e>=c?(t[0]=.5*l,t[1]=.5*(i+r)/l,t[2]=.5*(s+n)/l,t[3]=.5*(a-u)/l):o>=c?(t[0]=.5*(r+i)/l,t[1]=.5*l,t[2]=.5*(u+a)/l,t[3]=.5*(s-n)/l):(t[0]=.5*(n+s)/l,t[1]=.5*(a+u)/l,t[2]=.5*l,t[3]=.5*(r-i)/l)}return t}},9977:function(t,e,r){"use strict";t.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.rotation||[0,0,0,1],n=t.radius||1;e=[].slice.call(e,0,3),f(r=[].slice.call(r,0,4),r);var i=new l(r,e,Math.log(n));return i.setDistanceLimits(t.zoomMin,t.zoomMax),("eye"in t||"up"in t)&&i.lookAt(0,t.eye,t.center,t.up),i};var n=r(9215),i=r(6582),o=r(7399),a=r(7608),s=r(4081);function u(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function h(t,e,r,n){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2)+Math.pow(n,2))}function f(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=h(r,n,i,o);a>1e-6?(t[0]=r/a,t[1]=n/a,t[2]=i/a,t[3]=o/a):(t[0]=t[1]=t[2]=0,t[3]=1)}function l(t,e,r){this.radius=n([r]),this.center=n(e),this.rotation=n(t),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var c=l.prototype;c.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},c.recalcMatrix=function(t){this.radius.curve(t),this.center.curve(t),this.rotation.curve(t);var e=this.computedRotation;f(e,e);var r=this.computedMatrix;o(r,e);var n=this.computedCenter,i=this.computedEye,a=this.computedUp,s=Math.exp(this.computedRadius[0]);i[0]=n[0]+s*r[2],i[1]=n[1]+s*r[6],i[2]=n[2]+s*r[10],a[0]=r[1],a[1]=r[5],a[2]=r[9];for(var u=0;u<3;++u){for(var h=0,l=0;l<3;++l)h+=r[u+4*l]*i[l];r[12+u]=-h}},c.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r},c.idle=function(t){this.center.idle(t),this.radius.idle(t),this.rotation.idle(t)},c.flush=function(t){this.center.flush(t),this.radius.flush(t),this.rotation.flush(t)},c.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix,o=i[1],a=i[5],s=i[9],h=u(o,a,s);o/=h,a/=h,s/=h;var f=i[0],l=i[4],c=i[8],p=f*o+l*a+c*s,d=u(f-=o*p,l-=a*p,c-=s*p);f/=d,l/=d,c/=d;var v=i[2],g=i[6],m=i[10],b=v*o+g*a+m*s,y=v*f+g*l+m*c,x=u(v-=b*o+y*f,g-=b*a+y*l,m-=b*s+y*c);v/=x,g/=x,m/=x;var _=f*e+o*r,w=l*e+a*r,E=c*e+s*r;this.center.move(t,_,w,E);var M=Math.exp(this.computedRadius[0]);M=Math.max(1e-4,M+n),this.radius.set(t,Math.log(M))},c.rotate=function(t,e,r,n){this.recalcMatrix(t),e=e||0,r=r||0;var i=this.computedMatrix,o=i[0],a=i[4],s=i[8],f=i[1],l=i[5],c=i[9],p=i[2],d=i[6],v=i[10],g=e*o+r*f,m=e*a+r*l,b=e*s+r*c,y=-(d*b-v*m),x=-(v*g-p*b),_=-(p*m-d*g),w=Math.sqrt(Math.max(0,1-Math.pow(y,2)-Math.pow(x,2)-Math.pow(_,2))),E=h(y,x,_,w);E>1e-6?(y/=E,x/=E,_/=E,w/=E):(y=x=_=0,w=1);var M=this.computedRotation,A=M[0],T=M[1],R=M[2],O=M[3],S=A*w+O*y+T*_-R*x,k=T*w+O*x+R*y-A*_,C=R*w+O*_+A*x-T*y,L=O*w-A*y-T*x-R*_;if(n){var I=Math.sin(n)/u(y=p,x=d,_=v);y*=I,x*=I,_*=I,S=S*(w=Math.cos(e))+L*y+k*_-C*x,k=k*w+L*x+C*y-S*_,C=C*w+L*_+S*x-k*y,L=L*w-S*y-k*x-C*_}var P=h(S,k,C,L);P>1e-6?(S/=P,k/=P,C/=P,L/=P):(S=k=C=0,L=1),this.rotation.set(t,S,k,C,L)},c.lookAt=function(t,e,r,n){this.recalcMatrix(t),r=r||this.computedCenter,e=e||this.computedEye,n=n||this.computedUp;var o=this.computedMatrix;i(o,e,r,n);var a=this.computedRotation;s(a,o[0],o[1],o[2],o[4],o[5],o[6],o[8],o[9],o[10]),f(a,a),this.rotation.set(t,a[0],a[1],a[2],a[3]);for(var u=0,h=0;h<3;++h)u+=Math.pow(r[h]-e[h],2);this.radius.set(t,.5*Math.log(Math.max(u,1e-6))),this.center.set(t,r[0],r[1],r[2])},c.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},c.setMatrix=function(t,e){var r=this.computedRotation;s(r,e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]),f(r,r),this.rotation.set(t,r[0],r[1],r[2],r[3]);var n=this.computedMatrix;a(n,e);var i=n[15];if(Math.abs(i)>1e-6){var o=n[12]/i,u=n[13]/i,h=n[14]/i;this.recalcMatrix(t);var l=Math.exp(this.computedRadius[0]);this.center.set(t,o-n[2]*l,u-n[6]*l,h-n[10]*l),this.radius.idle(t)}else this.center.idle(t),this.radius.idle(t)},c.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},c.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=Math.max(e=e>0?Math.log(e):1/0,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},c.getDistanceLimits=function(t){var e=this.radius.bounds;return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},c.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},c.fromJSON=function(t){var e=this.lastT(),r=t.center;r&&this.center.set(e,r[0],r[1],r[2]);var n=t.rotation;n&&this.rotation.set(e,n[0],n[1],n[2],n[3]);var i=t.distance;i&&i>0&&this.radius.set(e,Math.log(i)),this.setDistanceLimits(t.zoomMin,t.zoomMax)}},1371:function(t,e,r){"use strict";/*!
 * pad-left <https://github.com/jonschlinkert/pad-left>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT license.
 */var n=r(3233);t.exports=function(t,e,r){return n(r=void 0!==r?r+"":" ",e)+t}},3202:function(t){t.exports=function(t,e){e||(e=[0,""]);var r=parseFloat(t=String(t),10);return e[0]=r,e[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",e}},3088:function(t,e,r){"use strict";t.exports=function(t,e){for(var r=0|e.length,i=t.length,o=[Array(r),Array(r)],a=0;a<r;++a)o[0][a]=[],o[1][a]=[];for(var a=0;a<i;++a){var s=t[a];o[0][s[0]].push(s),o[1][s[1]].push(s)}for(var u=[],a=0;a<r;++a)o[0][a].length+o[1][a].length===0&&u.push([a]);function h(t,e){var r=o[e][t[e]];r.splice(r.indexOf(t),1)}function f(t,r,i){for(var a,s,u,f=0;f<2;++f)if(o[f][r].length>0){a=o[f][r][0],u=f;break}s=a[1^u];for(var l=0;l<2;++l)for(var c=o[l][r],p=0;p<c.length;++p){var d=c[p],v=d[1^l];n(e[t],e[r],e[s],e[v])>0&&(a=d,s=v,u=l)}return i||a&&h(a,u),s}for(var a=0;a<r;++a)for(var l=0;l<2;++l){for(var c=[];o[l][a].length>0;){o[0][a].length;var p=function(t,r){var i=o[r][t][0],a=[t];h(i,r);for(var s=i[1^r];;){for(;s!==t;)a.push(s),s=f(a[a.length-2],s,!1);if(o[0][t].length+o[1][t].length===0)break;var u=a[a.length-1],l=a[1],c=f(u,t,!0);if(0>n(e[u],e[t],e[l],e[c]))break;a.push(t),s=f(u,t)}return a}(a,l);p[1]===p[p.length-1]?c.push.apply(c,p):(c.length>0&&u.push(c),c=p)}c.length>0&&u.push(c)}return u};var n=r(3140)},5609:function(t,e,r){"use strict";t.exports=function(t,e){for(var r=n(t,e.length),i=Array(e.length),o=Array(e.length),a=[],s=0;s<e.length;++s){var u=r[s].length;o[s]=u,i[s]=!0,u<=1&&a.push(s)}for(;a.length>0;){var h=a.pop();i[h]=!1;for(var f=r[h],s=0;s<f.length;++s){var l=f[s];0==--o[l]&&a.push(l)}}for(var c=Array(e.length),p=[],s=0;s<e.length;++s)if(i[s]){var h=p.length;c[s]=h,p.push(e[s])}else c[s]=-1;for(var d=[],s=0;s<t.length;++s){var v=t[s];i[v[0]]&&i[v[1]]&&d.push([c[v[0]],c[v[1]]])}return[d,p]};var n=r(3134)},2095:function(t,e,r){"use strict";t.exports=function(t,e){var r=h(t,e);t=r[0];var l=(e=r[1]).length;t.length;for(var c=n(t,e.length),p=0;p<l;++p)if(c[p].length%2==1)throw Error("planar-graph-to-polyline: graph must be manifold");for(var d=i(t,e),v=(d=d.filter(function(t){for(var r=t.length,n=[0],i=0;i<r;++i){var o=e[t[i]],u=e[t[(i+1)%r]],h=a(-o[0],o[1]),f=a(-o[0],u[1]),l=a(u[0],o[1]),c=a(u[0],u[1]);n=s(n,s(s(h,f),s(l,c)))}return n[n.length-1]>0})).length,g=Array(v),m=Array(v),p=0;p<v;++p){g[p]=p;var b=Array(v),y=o([d[p].map(function(t){return e[t]})]),x=0;d:for(var _=0;_<v;++_)if(b[_]=0,p!==_){for(var w=d[_],E=w.length,M=0;M<E;++M){var A=y(e[w[M]]);if(0!==A){A<0&&(b[_]=1,x+=1);continue d}}b[_]=1,x+=1}m[p]=[x,p,b]}m.sort(function(t,e){return e[0]-t[0]});for(var p=0;p<v;++p)for(var b=m[p],T=b[1],R=b[2],_=0;_<v;++_)R[_]&&(g[_]=T);for(var O=function(t){for(var e=Array(t),r=0;r<t;++r)e[r]=[];return e}(v),p=0;p<v;++p)O[p].push(g[p]),O[g[p]].push(p);for(var S={},k=f(l,!1),p=0;p<v;++p)for(var w=d[p],E=w.length,_=0;_<E;++_){var C=w[_],L=w[(_+1)%E],I=Math.min(C,L)+":"+Math.max(C,L);if(I in S){var P=S[I];O[P].push(p),O[p].push(P),k[C]=k[L]=!0}else S[I]=p}function B(t){for(var e=t.length,r=0;r<e;++r)if(!k[t[r]])return!1;return!0}for(var F=[],N=f(v,-1),p=0;p<v;++p)g[p]!==p||B(d[p])?N[p]=-1:(F.push(p),N[p]=0);for(var r=[];F.length>0;){var D,U=F.pop(),z=O[U];u(z,function(t,e){return t-e});var j=z.length,V=N[U];if(0===V){var w=d[U];D=[w]}for(var p=0;p<j;++p){var G=z[p];if(!(N[G]>=0)&&(N[G]=1^V,F.push(G),0===V)){var w=d[G];B(w)||(w.reverse(),D.push(w))}}0===V&&r.push(D)}return r};var n=r(3134),i=r(3088),o=r(5085),a=r(5250),s=r(8210),u=r(1682),h=r(5609);function f(t,e){for(var r=Array(t),n=0;n<t;++n)r[n]=e;return r}},5085:function(t,e,r){t.exports=function(t){for(var e,r,o,s,f=t.length,l=[],c=[],p=0;p<f;++p)for(var d=t[p],v=d.length,g=v-1,m=0;m<v;g=m++){var b=d[g],y=d[m];b[0]===y[0]?c.push([b,y]):l.push([b,y])}if(0===l.length)return 0===c.length?h:(e=u(c),function(t){return e(t[0],t[1])?0:1});var x=i(l),_=(r=x.slabs,o=x.coordinates,function(t){var e=a.le(o,t[0]);if(e<0)return 1;var i=r[e];if(!i){if(!(e>0)||o[e]!==t[0])return 1;i=r[e-1]}for(var s=1;i;){var u=i.key,h=n(t,u[0],u[1]);if(u[0][0]<u[1][0]){if(h<0)i=i.left;else{if(!(h>0))return 0;s=-1,i=i.right}}else if(h>0)i=i.left;else{if(!(h<0))return 0;s=1,i=i.right}}return s});return 0===c.length?_:(s=u(c),function(t){return s(t[0],t[1])?0:_(t)})};var n=r(3250)[3],i=r(4209),o=r(3352),a=r(2478);function s(){return!0}function u(t){for(var e={},r=0;r<t.length;++r){var n=t[r],i=n[0][0],a=n[0][1],u=n[1][1],h=[Math.min(a,u),Math.max(a,u)];i in e?e[i].push(h):e[i]=[h]}for(var f={},l=Object.keys(e),r=0;r<l.length;++r){var c=e[l[r]];f[l[r]]=o(c)}return function(t,e){var r=f[t];return!!r&&!!r.queryPoint(e,s)}}function h(t){return 1}},9346:function(t){"use strict";var e=new Float64Array(4),r=new Float64Array(4),n=new Float64Array(4);t.exports=function(t,i,o,a,s){e.length<a.length&&(e=new Float64Array(a.length),r=new Float64Array(a.length),n=new Float64Array(a.length));for(var u,h,f,l,c,p=0;p<a.length;++p)e[p]=t[p]-a[p],r[p]=i[p]-t[p],n[p]=o[p]-t[p];for(var d=0,v=0,g=0,m=0,b=0,y=0,p=0;p<a.length;++p){var x=r[p],_=n[p],w=e[p];d+=x*x,v+=x*_,g+=_*_,m+=w*x,b+=w*_,y+=w*w}var E=Math.abs(d*g-v*v),M=v*b-g*m,A=v*m-d*b;if(M+A<=E){if(M<0)A<0&&m<0?(A=0,-m>=d?(M=1,u=d+2*m+y):(M=-m/d,u=m*M+y)):(M=0,b>=0?(A=0,u=y):-b>=g?(A=1,u=g+2*b+y):(A=-b/g,u=b*A+y));else if(A<0)A=0,m>=0?(M=0,u=y):-m>=d?(M=1,u=d+2*m+y):(M=-m/d,u=m*M+y);else{var T=1/E;M*=T,A*=T,u=M*(d*M+v*A+2*m)+A*(v*M+g*A+2*b)+y}}else M<0?(h=v+m,(f=g+b)>h?(l=f-h)>=(c=d-2*v+g)?(M=1,A=0,u=d+2*m+y):(A=1-(M=l/c),u=M*(d*M+v*A+2*m)+A*(v*M+g*A+2*b)+y):(M=0,f<=0?(A=1,u=g+2*b+y):b>=0?(A=0,u=y):(A=-b/g,u=b*A+y))):A<0?(h=v+b,(f=d+m)>h?(l=f-h)>=(c=d-2*v+g)?(A=1,M=0,u=g+2*b+y):u=(M=1-(A=l/c))*(d*M+v*A+2*m)+A*(v*M+g*A+2*b)+y:(A=0,f<=0?(M=1,u=d+2*m+y):m>=0?(M=0,u=y):(M=-m/d,u=m*M+y))):(l=g+b-v-m)<=0?(M=0,A=1,u=g+2*b+y):l>=(c=d-2*v+g)?(M=1,A=0,u=d+2*m+y):(A=1-(M=l/c),u=M*(d*M+v*A+2*m)+A*(v*M+g*A+2*b)+y);for(var R=1-M-A,p=0;p<a.length;++p)s[p]=R*t[p]+M*i[p]+A*o[p];return u<0?0:u}},8648:function(t,e,r){t.exports=r(783)},2653:function(t,e,r){"use strict";var n=r(3865);t.exports=function(t,e){for(var r=t.length,i=Array(r),o=0;o<r;++o)i[o]=n(t[o],e[o]);return i}},5838:function(t,e,r){"use strict";t.exports=function(t){for(var e=Array(t.length),r=0;r<t.length;++r)e[r]=n(t[r]);return e};var n=r(7842)},8987:function(t,e,r){"use strict";var n=r(7842),i=r(6504);t.exports=function(t,e){for(var r=n(e),o=t.length,a=Array(o),s=0;s<o;++s)a[s]=i(t[s],r);return a}},544:function(t,e,r){"use strict";var n=r(5572);t.exports=function(t,e){for(var r=t.length,i=Array(r),o=0;o<r;++o)i[o]=n(t[o],e[o]);return i}},5771:function(t,e,r){"use strict";var n=r(8507),i=r(3788),o=r(2419);t.exports=function(t){t.sort(i);for(var e=t.length,r=0,a=0;a<e;++a){var s=t[a],u=o(s);if(0!==u){if(r>0){var h=t[r-1];if(0===n(s,h)&&o(h)!==u){r-=1;continue}}t[r++]=s}}return t.length=r,t}},3233:function(t){"use strict";/*!
 * repeat-string <https://github.com/jonschlinkert/repeat-string>
 *
 * Copyright (c) 2014-2015, Jon Schlinkert.
 * Licensed under the MIT License.
 */var e,r="";t.exports=function(t,n){if("string"!=typeof t)throw TypeError("expected a string");if(1===n)return t;if(2===n)return t+t;var i=t.length*n;if(e!==t||void 0===e)e=t,r="";else if(r.length>=i)return r.substr(0,i);for(;i>r.length&&n>1;)1&n&&(r+=t),n>>=1,t+=t;return r+=t,r=r.substr(0,i)}},3025:function(t,e,r){t.exports=r.g.performance&&r.g.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}},7004:function(t){"use strict";t.exports=function(t){for(var e=t.length,r=t[t.length-1],n=e,i=e-2;i>=0;--i){var o=r,a=t[i],s=(r=o+a)-o,u=a-s;u&&(t[--n]=r,r=u)}for(var h=0,i=n;i<e;++i){var o=t[i],a=r,s=(r=o+a)-o,u=a-s;u&&(t[h++]=u)}return t[h++]=r,t.length=h,t}},2962:function(t,e,r){"use strict";var n=r(5250),i=r(8210),o=r(3012),a=r(7004);function s(t){return(2===t?function(t,e,r,n){return function(e){return n(t(r(e[0][0],e[1][1]),r(-e[0][1],e[1][0])))}}:3===t?function(t,e,r,n){return function(i){return n(t(e(t(r(i[1][1],i[2][2]),r(-i[1][2],i[2][1])),i[0][0]),t(e(t(r(i[1][0],i[2][2]),r(-i[1][2],i[2][0])),-i[0][1]),e(t(r(i[1][0],i[2][1]),r(-i[1][1],i[2][0])),i[0][2]))))}}:4===t?function(t,e,r,n){return function(i){return n(t(t(e(t(e(t(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][1]),t(e(t(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),-i[1][2]),e(t(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][3]))),i[0][0]),e(t(e(t(r(i[2][2],i[3][3]),r(-i[2][3],i[3][2])),i[1][0]),t(e(t(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][2]),e(t(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),i[1][3]))),-i[0][1])),t(e(t(e(t(r(i[2][1],i[3][3]),r(-i[2][3],i[3][1])),i[1][0]),t(e(t(r(i[2][0],i[3][3]),r(-i[2][3],i[3][0])),-i[1][1]),e(t(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][3]))),i[0][2]),e(t(e(t(r(i[2][1],i[3][2]),r(-i[2][2],i[3][1])),i[1][0]),t(e(t(r(i[2][0],i[3][2]),r(-i[2][2],i[3][0])),-i[1][1]),e(t(r(i[2][0],i[3][1]),r(-i[2][1],i[3][0])),i[1][2]))),-i[0][3]))))}}:5===t?function(t,e,r,n){return function(i){return n(t(t(e(t(t(e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][1]),e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),-i[1][2])),t(e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][3]),e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),-i[1][4]))),i[0][0]),e(t(t(e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][2]),t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),-i[2][3]),e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][4]))),i[1][0]),e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][2])),t(e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),i[1][3]),e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][4]))),-i[0][1])),t(e(t(t(e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][3]),e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][4]))),i[1][0]),e(t(e(t(r(i[3][3],i[4][4]),r(-i[3][4],i[4][3])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][3]),e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),i[2][4]))),-i[1][1])),t(e(t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][3]),e(t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),-i[1][4]))),i[0][2]),t(e(t(t(e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][4]))),i[1][0]),e(t(e(t(r(i[3][2],i[4][4]),r(-i[3][4],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][4]))),-i[1][1])),t(e(t(e(t(r(i[3][1],i[4][4]),r(-i[3][4],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][4]),r(-i[3][4],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][4]))),i[1][2]),e(t(e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][4]))),-i[0][3]),e(t(t(e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][1]),t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),-i[2][2]),e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][3]))),i[1][0]),e(t(e(t(r(i[3][2],i[4][3]),r(-i[3][3],i[4][2])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][2]),e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),i[2][3]))),-i[1][1])),t(e(t(e(t(r(i[3][1],i[4][3]),r(-i[3][3],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][3]),r(-i[3][3],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][3]))),i[1][2]),e(t(e(t(r(i[3][1],i[4][2]),r(-i[3][2],i[4][1])),i[2][0]),t(e(t(r(i[3][0],i[4][2]),r(-i[3][2],i[4][0])),-i[2][1]),e(t(r(i[3][0],i[4][1]),r(-i[3][1],i[4][0])),i[2][2]))),-i[1][3]))),i[0][4])))))}}:void 0)(i,o,n,a)}var u=[function(){return[0]},function(t){return[t[0][0]]}];function h(t,e,r,n,i,o,a,s){return function(u){switch(u.length){case 0:return t(u);case 1:return e(u);case 2:return r(u);case 3:return n(u);case 4:return i(u);case 5:return o(u)}var h=a[u.length];return h||(h=a[u.length]=s(u.length)),h(u)}}!function(){for(;u.length<6;)u.push(s(u.length));t.exports=h.apply(void 0,u.concat([u,s]));for(var e=0;e<u.length;++e)t.exports[e]=u[e]}()},1944:function(t,e,r){"use strict";var n=r(5250),i=r(8210);t.exports=function(t,e){for(var r=n(t[0],e[0]),o=1;o<t.length;++o)r=i(r,n(t[o],e[o]));return r}},2646:function(t,e,r){"use strict";var n=r(5250),i=r(8210),o=r(8545),a=r(3012);function s(t){return(3===t?function(t,e,r,n){return function(i,o,a){var s=r(i[0],i[0]),u=n(s,o[0]),h=n(s,a[0]),f=r(o[0],o[0]),l=n(f,i[0]),c=n(f,a[0]),p=r(a[0],a[0]),d=n(p,i[0]),v=t(e(n(p,o[0]),c),e(l,u)),g=e(d,h),m=e(v,g);return m[m.length-1]}}:4===t?function(t,e,r,n){return function(i,o,a,s){var u=t(r(i[0],i[0]),r(i[1],i[1])),h=n(u,o[0]),f=n(u,a[0]),l=n(u,s[0]),c=t(r(o[0],o[0]),r(o[1],o[1])),p=n(c,i[0]),d=n(c,a[0]),v=n(c,s[0]),g=t(r(a[0],a[0]),r(a[1],a[1])),m=n(g,i[0]),b=n(g,o[0]),y=n(g,s[0]),x=t(r(s[0],s[0]),r(s[1],s[1])),_=n(x,i[0]),w=n(x,o[0]),E=n(x,a[0]),M=t(t(n(e(E,y),o[1]),t(n(e(w,v),-a[1]),n(e(b,d),s[1]))),t(n(e(w,v),i[1]),t(n(e(_,l),-o[1]),n(e(p,h),s[1])))),A=t(t(n(e(E,y),i[1]),t(n(e(_,l),-a[1]),n(e(m,f),s[1]))),t(n(e(b,d),i[1]),t(n(e(m,f),-o[1]),n(e(p,h),a[1])))),T=e(M,A);return T[T.length-1]}}:5===t?function(t,e,r,n){return function(i,o,a,s,u){var h=t(r(i[0],i[0]),t(r(i[1],i[1]),r(i[2],i[2]))),f=n(h,o[0]),l=n(h,a[0]),c=n(h,s[0]),p=n(h,u[0]),d=t(r(o[0],o[0]),t(r(o[1],o[1]),r(o[2],o[2]))),v=n(d,i[0]),g=n(d,a[0]),m=n(d,s[0]),b=n(d,u[0]),y=t(r(a[0],a[0]),t(r(a[1],a[1]),r(a[2],a[2]))),x=n(y,i[0]),_=n(y,o[0]),w=n(y,s[0]),E=n(y,u[0]),M=t(r(s[0],s[0]),t(r(s[1],s[1]),r(s[2],s[2]))),A=n(M,i[0]),T=n(M,o[0]),R=n(M,a[0]),O=n(M,u[0]),S=t(r(u[0],u[0]),t(r(u[1],u[1]),r(u[2],u[2]))),k=n(S,i[0]),C=n(S,o[0]),L=n(S,a[0]),I=n(S,s[0]),P=t(t(t(n(t(n(e(I,O),a[1]),t(n(e(L,E),-s[1]),n(e(R,w),u[1]))),o[2]),t(n(t(n(e(I,O),o[1]),t(n(e(C,b),-s[1]),n(e(T,m),u[1]))),-a[2]),n(t(n(e(L,E),o[1]),t(n(e(C,b),-a[1]),n(e(_,g),u[1]))),s[2]))),t(n(t(n(e(R,w),o[1]),t(n(e(T,m),-a[1]),n(e(_,g),s[1]))),-u[2]),t(n(t(n(e(I,O),o[1]),t(n(e(C,b),-s[1]),n(e(T,m),u[1]))),i[2]),n(t(n(e(I,O),i[1]),t(n(e(k,p),-s[1]),n(e(A,c),u[1]))),-o[2])))),t(t(n(t(n(e(C,b),i[1]),t(n(e(k,p),-o[1]),n(e(v,f),u[1]))),s[2]),t(n(t(n(e(T,m),i[1]),t(n(e(A,c),-o[1]),n(e(v,f),s[1]))),-u[2]),n(t(n(e(R,w),o[1]),t(n(e(T,m),-a[1]),n(e(_,g),s[1]))),i[2]))),t(n(t(n(e(R,w),i[1]),t(n(e(A,c),-a[1]),n(e(x,l),s[1]))),-o[2]),t(n(t(n(e(T,m),i[1]),t(n(e(A,c),-o[1]),n(e(v,f),s[1]))),a[2]),n(t(n(e(_,g),i[1]),t(n(e(x,l),-o[1]),n(e(v,f),a[1]))),-s[2]))))),B=t(t(t(n(t(n(e(I,O),a[1]),t(n(e(L,E),-s[1]),n(e(R,w),u[1]))),i[2]),n(t(n(e(I,O),i[1]),t(n(e(k,p),-s[1]),n(e(A,c),u[1]))),-a[2])),t(n(t(n(e(L,E),i[1]),t(n(e(k,p),-a[1]),n(e(x,l),u[1]))),s[2]),n(t(n(e(R,w),i[1]),t(n(e(A,c),-a[1]),n(e(x,l),s[1]))),-u[2]))),t(t(n(t(n(e(L,E),o[1]),t(n(e(C,b),-a[1]),n(e(_,g),u[1]))),i[2]),n(t(n(e(L,E),i[1]),t(n(e(k,p),-a[1]),n(e(x,l),u[1]))),-o[2])),t(n(t(n(e(C,b),i[1]),t(n(e(k,p),-o[1]),n(e(v,f),u[1]))),a[2]),n(t(n(e(_,g),i[1]),t(n(e(x,l),-o[1]),n(e(v,f),a[1]))),-u[2])))),F=e(P,B);return F[F.length-1]}}:function(t,e,r,n){return function(i,o,a,s,u,h){var f=t(t(r(i[0],i[0]),r(i[1],i[1])),t(r(i[2],i[2]),r(i[3],i[3]))),l=n(f,o[0]),c=n(f,a[0]),p=n(f,s[0]),d=n(f,u[0]),v=n(f,h[0]),g=t(t(r(o[0],o[0]),r(o[1],o[1])),t(r(o[2],o[2]),r(o[3],o[3]))),m=n(g,i[0]),b=n(g,a[0]),y=n(g,s[0]),x=n(g,u[0]),_=n(g,h[0]),w=t(t(r(a[0],a[0]),r(a[1],a[1])),t(r(a[2],a[2]),r(a[3],a[3]))),E=n(w,i[0]),M=n(w,o[0]),A=n(w,s[0]),T=n(w,u[0]),R=n(w,h[0]),O=t(t(r(s[0],s[0]),r(s[1],s[1])),t(r(s[2],s[2]),r(s[3],s[3]))),S=n(O,i[0]),k=n(O,o[0]),C=n(O,a[0]),L=n(O,u[0]),I=n(O,h[0]),P=t(t(r(u[0],u[0]),r(u[1],u[1])),t(r(u[2],u[2]),r(u[3],u[3]))),B=n(P,i[0]),F=n(P,o[0]),N=n(P,a[0]),D=n(P,s[0]),U=n(P,h[0]),z=t(t(r(h[0],h[0]),r(h[1],h[1])),t(r(h[2],h[2]),r(h[3],h[3]))),j=n(z,i[0]),V=n(z,o[0]),G=n(z,a[0]),H=n(z,s[0]),W=n(z,u[0]),X=t(t(t(n(t(t(n(t(n(e(W,U),s[1]),t(n(e(H,I),-u[1]),n(e(D,L),h[1]))),a[2]),n(t(n(e(W,U),a[1]),t(n(e(G,R),-u[1]),n(e(N,T),h[1]))),-s[2])),t(n(t(n(e(H,I),a[1]),t(n(e(G,R),-s[1]),n(e(C,A),h[1]))),u[2]),n(t(n(e(D,L),a[1]),t(n(e(N,T),-s[1]),n(e(C,A),u[1]))),-h[2]))),o[3]),t(n(t(t(n(t(n(e(W,U),s[1]),t(n(e(H,I),-u[1]),n(e(D,L),h[1]))),o[2]),n(t(n(e(W,U),o[1]),t(n(e(V,_),-u[1]),n(e(F,x),h[1]))),-s[2])),t(n(t(n(e(H,I),o[1]),t(n(e(V,_),-s[1]),n(e(k,y),h[1]))),u[2]),n(t(n(e(D,L),o[1]),t(n(e(F,x),-s[1]),n(e(k,y),u[1]))),-h[2]))),-a[3]),n(t(t(n(t(n(e(W,U),a[1]),t(n(e(G,R),-u[1]),n(e(N,T),h[1]))),o[2]),n(t(n(e(W,U),o[1]),t(n(e(V,_),-u[1]),n(e(F,x),h[1]))),-a[2])),t(n(t(n(e(G,R),o[1]),t(n(e(V,_),-a[1]),n(e(M,b),h[1]))),u[2]),n(t(n(e(N,T),o[1]),t(n(e(F,x),-a[1]),n(e(M,b),u[1]))),-h[2]))),s[3]))),t(t(n(t(t(n(t(n(e(H,I),a[1]),t(n(e(G,R),-s[1]),n(e(C,A),h[1]))),o[2]),n(t(n(e(H,I),o[1]),t(n(e(V,_),-s[1]),n(e(k,y),h[1]))),-a[2])),t(n(t(n(e(G,R),o[1]),t(n(e(V,_),-a[1]),n(e(M,b),h[1]))),s[2]),n(t(n(e(C,A),o[1]),t(n(e(k,y),-a[1]),n(e(M,b),s[1]))),-h[2]))),-u[3]),n(t(t(n(t(n(e(D,L),a[1]),t(n(e(N,T),-s[1]),n(e(C,A),u[1]))),o[2]),n(t(n(e(D,L),o[1]),t(n(e(F,x),-s[1]),n(e(k,y),u[1]))),-a[2])),t(n(t(n(e(N,T),o[1]),t(n(e(F,x),-a[1]),n(e(M,b),u[1]))),s[2]),n(t(n(e(C,A),o[1]),t(n(e(k,y),-a[1]),n(e(M,b),s[1]))),-u[2]))),h[3])),t(n(t(t(n(t(n(e(W,U),s[1]),t(n(e(H,I),-u[1]),n(e(D,L),h[1]))),o[2]),n(t(n(e(W,U),o[1]),t(n(e(V,_),-u[1]),n(e(F,x),h[1]))),-s[2])),t(n(t(n(e(H,I),o[1]),t(n(e(V,_),-s[1]),n(e(k,y),h[1]))),u[2]),n(t(n(e(D,L),o[1]),t(n(e(F,x),-s[1]),n(e(k,y),u[1]))),-h[2]))),i[3]),n(t(t(n(t(n(e(W,U),s[1]),t(n(e(H,I),-u[1]),n(e(D,L),h[1]))),i[2]),n(t(n(e(W,U),i[1]),t(n(e(j,v),-u[1]),n(e(B,d),h[1]))),-s[2])),t(n(t(n(e(H,I),i[1]),t(n(e(j,v),-s[1]),n(e(S,p),h[1]))),u[2]),n(t(n(e(D,L),i[1]),t(n(e(B,d),-s[1]),n(e(S,p),u[1]))),-h[2]))),-o[3])))),t(t(t(n(t(t(n(t(n(e(W,U),o[1]),t(n(e(V,_),-u[1]),n(e(F,x),h[1]))),i[2]),n(t(n(e(W,U),i[1]),t(n(e(j,v),-u[1]),n(e(B,d),h[1]))),-o[2])),t(n(t(n(e(V,_),i[1]),t(n(e(j,v),-o[1]),n(e(m,l),h[1]))),u[2]),n(t(n(e(F,x),i[1]),t(n(e(B,d),-o[1]),n(e(m,l),u[1]))),-h[2]))),s[3]),n(t(t(n(t(n(e(H,I),o[1]),t(n(e(V,_),-s[1]),n(e(k,y),h[1]))),i[2]),n(t(n(e(H,I),i[1]),t(n(e(j,v),-s[1]),n(e(S,p),h[1]))),-o[2])),t(n(t(n(e(V,_),i[1]),t(n(e(j,v),-o[1]),n(e(m,l),h[1]))),s[2]),n(t(n(e(k,y),i[1]),t(n(e(S,p),-o[1]),n(e(m,l),s[1]))),-h[2]))),-u[3])),t(n(t(t(n(t(n(e(D,L),o[1]),t(n(e(F,x),-s[1]),n(e(k,y),u[1]))),i[2]),n(t(n(e(D,L),i[1]),t(n(e(B,d),-s[1]),n(e(S,p),u[1]))),-o[2])),t(n(t(n(e(F,x),i[1]),t(n(e(B,d),-o[1]),n(e(m,l),u[1]))),s[2]),n(t(n(e(k,y),i[1]),t(n(e(S,p),-o[1]),n(e(m,l),s[1]))),-u[2]))),h[3]),n(t(t(n(t(n(e(H,I),a[1]),t(n(e(G,R),-s[1]),n(e(C,A),h[1]))),o[2]),n(t(n(e(H,I),o[1]),t(n(e(V,_),-s[1]),n(e(k,y),h[1]))),-a[2])),t(n(t(n(e(G,R),o[1]),t(n(e(V,_),-a[1]),n(e(M,b),h[1]))),s[2]),n(t(n(e(C,A),o[1]),t(n(e(k,y),-a[1]),n(e(M,b),s[1]))),-h[2]))),i[3]))),t(t(n(t(t(n(t(n(e(H,I),a[1]),t(n(e(G,R),-s[1]),n(e(C,A),h[1]))),i[2]),n(t(n(e(H,I),i[1]),t(n(e(j,v),-s[1]),n(e(S,p),h[1]))),-a[2])),t(n(t(n(e(G,R),i[1]),t(n(e(j,v),-a[1]),n(e(E,c),h[1]))),s[2]),n(t(n(e(C,A),i[1]),t(n(e(S,p),-a[1]),n(e(E,c),s[1]))),-h[2]))),-o[3]),n(t(t(n(t(n(e(H,I),o[1]),t(n(e(V,_),-s[1]),n(e(k,y),h[1]))),i[2]),n(t(n(e(H,I),i[1]),t(n(e(j,v),-s[1]),n(e(S,p),h[1]))),-o[2])),t(n(t(n(e(V,_),i[1]),t(n(e(j,v),-o[1]),n(e(m,l),h[1]))),s[2]),n(t(n(e(k,y),i[1]),t(n(e(S,p),-o[1]),n(e(m,l),s[1]))),-h[2]))),a[3])),t(n(t(t(n(t(n(e(G,R),o[1]),t(n(e(V,_),-a[1]),n(e(M,b),h[1]))),i[2]),n(t(n(e(G,R),i[1]),t(n(e(j,v),-a[1]),n(e(E,c),h[1]))),-o[2])),t(n(t(n(e(V,_),i[1]),t(n(e(j,v),-o[1]),n(e(m,l),h[1]))),a[2]),n(t(n(e(M,b),i[1]),t(n(e(E,c),-o[1]),n(e(m,l),a[1]))),-h[2]))),-s[3]),n(t(t(n(t(n(e(C,A),o[1]),t(n(e(k,y),-a[1]),n(e(M,b),s[1]))),i[2]),n(t(n(e(C,A),i[1]),t(n(e(S,p),-a[1]),n(e(E,c),s[1]))),-o[2])),t(n(t(n(e(k,y),i[1]),t(n(e(S,p),-o[1]),n(e(m,l),s[1]))),a[2]),n(t(n(e(M,b),i[1]),t(n(e(E,c),-o[1]),n(e(m,l),a[1]))),-s[2]))),h[3]))))),Y=t(t(t(n(t(t(n(t(n(e(W,U),s[1]),t(n(e(H,I),-u[1]),n(e(D,L),h[1]))),a[2]),n(t(n(e(W,U),a[1]),t(n(e(G,R),-u[1]),n(e(N,T),h[1]))),-s[2])),t(n(t(n(e(H,I),a[1]),t(n(e(G,R),-s[1]),n(e(C,A),h[1]))),u[2]),n(t(n(e(D,L),a[1]),t(n(e(N,T),-s[1]),n(e(C,A),u[1]))),-h[2]))),i[3]),t(n(t(t(n(t(n(e(W,U),s[1]),t(n(e(H,I),-u[1]),n(e(D,L),h[1]))),i[2]),n(t(n(e(W,U),i[1]),t(n(e(j,v),-u[1]),n(e(B,d),h[1]))),-s[2])),t(n(t(n(e(H,I),i[1]),t(n(e(j,v),-s[1]),n(e(S,p),h[1]))),u[2]),n(t(n(e(D,L),i[1]),t(n(e(B,d),-s[1]),n(e(S,p),u[1]))),-h[2]))),-a[3]),n(t(t(n(t(n(e(W,U),a[1]),t(n(e(G,R),-u[1]),n(e(N,T),h[1]))),i[2]),n(t(n(e(W,U),i[1]),t(n(e(j,v),-u[1]),n(e(B,d),h[1]))),-a[2])),t(n(t(n(e(G,R),i[1]),t(n(e(j,v),-a[1]),n(e(E,c),h[1]))),u[2]),n(t(n(e(N,T),i[1]),t(n(e(B,d),-a[1]),n(e(E,c),u[1]))),-h[2]))),s[3]))),t(t(n(t(t(n(t(n(e(H,I),a[1]),t(n(e(G,R),-s[1]),n(e(C,A),h[1]))),i[2]),n(t(n(e(H,I),i[1]),t(n(e(j,v),-s[1]),n(e(S,p),h[1]))),-a[2])),t(n(t(n(e(G,R),i[1]),t(n(e(j,v),-a[1]),n(e(E,c),h[1]))),s[2]),n(t(n(e(C,A),i[1]),t(n(e(S,p),-a[1]),n(e(E,c),s[1]))),-h[2]))),-u[3]),n(t(t(n(t(n(e(D,L),a[1]),t(n(e(N,T),-s[1]),n(e(C,A),u[1]))),i[2]),n(t(n(e(D,L),i[1]),t(n(e(B,d),-s[1]),n(e(S,p),u[1]))),-a[2])),t(n(t(n(e(N,T),i[1]),t(n(e(B,d),-a[1]),n(e(E,c),u[1]))),s[2]),n(t(n(e(C,A),i[1]),t(n(e(S,p),-a[1]),n(e(E,c),s[1]))),-u[2]))),h[3])),t(n(t(t(n(t(n(e(W,U),a[1]),t(n(e(G,R),-u[1]),n(e(N,T),h[1]))),o[2]),n(t(n(e(W,U),o[1]),t(n(e(V,_),-u[1]),n(e(F,x),h[1]))),-a[2])),t(n(t(n(e(G,R),o[1]),t(n(e(V,_),-a[1]),n(e(M,b),h[1]))),u[2]),n(t(n(e(N,T),o[1]),t(n(e(F,x),-a[1]),n(e(M,b),u[1]))),-h[2]))),i[3]),n(t(t(n(t(n(e(W,U),a[1]),t(n(e(G,R),-u[1]),n(e(N,T),h[1]))),i[2]),n(t(n(e(W,U),i[1]),t(n(e(j,v),-u[1]),n(e(B,d),h[1]))),-a[2])),t(n(t(n(e(G,R),i[1]),t(n(e(j,v),-a[1]),n(e(E,c),h[1]))),u[2]),n(t(n(e(N,T),i[1]),t(n(e(B,d),-a[1]),n(e(E,c),u[1]))),-h[2]))),-o[3])))),t(t(t(n(t(t(n(t(n(e(W,U),o[1]),t(n(e(V,_),-u[1]),n(e(F,x),h[1]))),i[2]),n(t(n(e(W,U),i[1]),t(n(e(j,v),-u[1]),n(e(B,d),h[1]))),-o[2])),t(n(t(n(e(V,_),i[1]),t(n(e(j,v),-o[1]),n(e(m,l),h[1]))),u[2]),n(t(n(e(F,x),i[1]),t(n(e(B,d),-o[1]),n(e(m,l),u[1]))),-h[2]))),a[3]),n(t(t(n(t(n(e(G,R),o[1]),t(n(e(V,_),-a[1]),n(e(M,b),h[1]))),i[2]),n(t(n(e(G,R),i[1]),t(n(e(j,v),-a[1]),n(e(E,c),h[1]))),-o[2])),t(n(t(n(e(V,_),i[1]),t(n(e(j,v),-o[1]),n(e(m,l),h[1]))),a[2]),n(t(n(e(M,b),i[1]),t(n(e(E,c),-o[1]),n(e(m,l),a[1]))),-h[2]))),-u[3])),t(n(t(t(n(t(n(e(N,T),o[1]),t(n(e(F,x),-a[1]),n(e(M,b),u[1]))),i[2]),n(t(n(e(N,T),i[1]),t(n(e(B,d),-a[1]),n(e(E,c),u[1]))),-o[2])),t(n(t(n(e(F,x),i[1]),t(n(e(B,d),-o[1]),n(e(m,l),u[1]))),a[2]),n(t(n(e(M,b),i[1]),t(n(e(E,c),-o[1]),n(e(m,l),a[1]))),-u[2]))),h[3]),n(t(t(n(t(n(e(D,L),a[1]),t(n(e(N,T),-s[1]),n(e(C,A),u[1]))),o[2]),n(t(n(e(D,L),o[1]),t(n(e(F,x),-s[1]),n(e(k,y),u[1]))),-a[2])),t(n(t(n(e(N,T),o[1]),t(n(e(F,x),-a[1]),n(e(M,b),u[1]))),s[2]),n(t(n(e(C,A),o[1]),t(n(e(k,y),-a[1]),n(e(M,b),s[1]))),-u[2]))),i[3]))),t(t(n(t(t(n(t(n(e(D,L),a[1]),t(n(e(N,T),-s[1]),n(e(C,A),u[1]))),i[2]),n(t(n(e(D,L),i[1]),t(n(e(B,d),-s[1]),n(e(S,p),u[1]))),-a[2])),t(n(t(n(e(N,T),i[1]),t(n(e(B,d),-a[1]),n(e(E,c),u[1]))),s[2]),n(t(n(e(C,A),i[1]),t(n(e(S,p),-a[1]),n(e(E,c),s[1]))),-u[2]))),-o[3]),n(t(t(n(t(n(e(D,L),o[1]),t(n(e(F,x),-s[1]),n(e(k,y),u[1]))),i[2]),n(t(n(e(D,L),i[1]),t(n(e(B,d),-s[1]),n(e(S,p),u[1]))),-o[2])),t(n(t(n(e(F,x),i[1]),t(n(e(B,d),-o[1]),n(e(m,l),u[1]))),s[2]),n(t(n(e(k,y),i[1]),t(n(e(S,p),-o[1]),n(e(m,l),s[1]))),-u[2]))),a[3])),t(n(t(t(n(t(n(e(N,T),o[1]),t(n(e(F,x),-a[1]),n(e(M,b),u[1]))),i[2]),n(t(n(e(N,T),i[1]),t(n(e(B,d),-a[1]),n(e(E,c),u[1]))),-o[2])),t(n(t(n(e(F,x),i[1]),t(n(e(B,d),-o[1]),n(e(m,l),u[1]))),a[2]),n(t(n(e(M,b),i[1]),t(n(e(E,c),-o[1]),n(e(m,l),a[1]))),-u[2]))),-s[3]),n(t(t(n(t(n(e(C,A),o[1]),t(n(e(k,y),-a[1]),n(e(M,b),s[1]))),i[2]),n(t(n(e(C,A),i[1]),t(n(e(S,p),-a[1]),n(e(E,c),s[1]))),-o[2])),t(n(t(n(e(k,y),i[1]),t(n(e(S,p),-o[1]),n(e(m,l),s[1]))),a[2]),n(t(n(e(M,b),i[1]),t(n(e(E,c),-o[1]),n(e(m,l),a[1]))),-s[2]))),u[3]))))),q=e(X,Y);return q[q.length-1]}})(i,o,n,a)}var u=[function(){return 0},function(){return 0},function(){return 0}];function h(t){var e=u[t.length];return e||(e=u[t.length]=s(t.length)),e.apply(void 0,t)}function f(t,e,r,n,i,o,a,s){return function(e,r,u,h,f,l){switch(arguments.length){case 0:case 1:return 0;case 2:return n(e,r);case 3:return i(e,r,u);case 4:return o(e,r,u,h);case 5:return a(e,r,u,h,f);case 6:return s(e,r,u,h,f,l)}for(var c=Array(arguments.length),p=0;p<arguments.length;++p)c[p]=arguments[p];return t(c)}}!function(){for(;u.length<=6;)u.push(s(u.length));t.exports=f.apply(void 0,[h].concat(u));for(var e=0;e<=6;++e)t.exports[e]=u[e]}()},727:function(t,e,r){"use strict";var n=r(2962);function i(t){return(2===t?o:3===t?a:4===t?s:5===t?u:h)(t<6?n[t]:n)}function o(t){return function(e,r){return[t([[+r[0],+e[0][1]],[+r[1],+e[1][1]]]),t([[+e[0][0],+r[0]],[+e[1][0],+r[1]]]),t(e)]}}function a(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2]],[+r[1],+e[1][1],+e[1][2]],[+r[2],+e[2][1],+e[2][2]]]),t([[+e[0][0],+r[0],+e[0][2]],[+e[1][0],+r[1],+e[1][2]],[+e[2][0],+r[2],+e[2][2]]]),t([[+e[0][0],+e[0][1],+r[0]],[+e[1][0],+e[1][1],+r[1]],[+e[2][0],+e[2][1],+r[2]]]),t(e)]}}function s(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3]],[+r[1],+e[1][1],+e[1][2],+e[1][3]],[+r[2],+e[2][1],+e[2][2],+e[2][3]],[+r[3],+e[3][1],+e[3][2],+e[3][3]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3]],[+e[1][0],+r[1],+e[1][2],+e[1][3]],[+e[2][0],+r[2],+e[2][2],+e[2][3]],[+e[3][0],+r[3],+e[3][2],+e[3][3]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3]],[+e[1][0],+e[1][1],+r[1],+e[1][3]],[+e[2][0],+e[2][1],+r[2],+e[2][3]],[+e[3][0],+e[3][1],+r[3],+e[3][3]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+r[3]]]),t(e)]}}function u(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4]],[+r[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4]],[+r[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4]],[+r[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4]],[+r[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3],+e[0][4]],[+e[1][0],+r[1],+e[1][2],+e[1][3],+e[1][4]],[+e[2][0],+r[2],+e[2][2],+e[2][3],+e[2][4]],[+e[3][0],+r[3],+e[3][2],+e[3][3],+e[3][4]],[+e[4][0],+r[4],+e[4][2],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3],+e[0][4]],[+e[1][0],+e[1][1],+r[1],+e[1][3],+e[1][4]],[+e[2][0],+e[2][1],+r[2],+e[2][3],+e[2][4]],[+e[3][0],+e[3][1],+r[3],+e[3][3],+e[3][4]],[+e[4][0],+e[4][1],+r[4],+e[4][3],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0],+e[0][4]],[+e[1][0],+e[1][1],+e[1][2],+r[1],+e[1][4]],[+e[2][0],+e[2][1],+e[2][2],+r[2],+e[2][4]],[+e[3][0],+e[3][1],+e[3][2],+r[3],+e[3][4]],[+e[4][0],+e[4][1],+e[4][2],+r[4],+e[4][4]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+r[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+r[4]]]),t(e)]}}function h(t){return function(e,r){return[t([[+r[0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+r[1],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+r[2],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+r[3],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+r[4],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+r[5],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+r[0],+e[0][2],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+r[1],+e[1][2],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+r[2],+e[2][2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+r[3],+e[3][2],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+r[4],+e[4][2],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+r[5],+e[5][2],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+r[0],+e[0][3],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+r[1],+e[1][3],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+r[2],+e[2][3],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+r[3],+e[3][3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+r[4],+e[4][3],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+r[5],+e[5][3],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+r[0],+e[0][4],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+r[1],+e[1][4],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+r[2],+e[2][4],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+r[3],+e[3][4],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+r[4],+e[4][4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+r[5],+e[5][4],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+r[0],+e[0][5]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+r[1],+e[1][5]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+r[2],+e[2][5]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+r[3],+e[3][5]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+r[4],+e[4][5]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+r[5],+e[5][5]]]),t([[+e[0][0],+e[0][1],+e[0][2],+e[0][3],+e[0][4],+r[0]],[+e[1][0],+e[1][1],+e[1][2],+e[1][3],+e[1][4],+r[1]],[+e[2][0],+e[2][1],+e[2][2],+e[2][3],+e[2][4],+r[2]],[+e[3][0],+e[3][1],+e[3][2],+e[3][3],+e[3][4],+r[3]],[+e[4][0],+e[4][1],+e[4][2],+e[4][3],+e[4][4],+r[4]],[+e[5][0],+e[5][1],+e[5][2],+e[5][3],+e[5][4],+r[5]]]),t(e)]}}var f=[function(){return[[0]]},function(t,e){return[[e[0]],[t[0][0]]]}];function l(t,e,r,n,i,o,a,s){return function(u,h){switch(u.length){case 0:return t(u,h);case 1:return e(u,h);case 2:return r(u,h);case 3:return n(u,h);case 4:return i(u,h);case 5:return o(u,h)}var f=a[u.length];return f||(f=a[u.length]=s(u.length)),f(u,h)}}!function(){for(;f.length<6;)f.push(i(f.length));t.exports=l.apply(void 0,f.concat([f,i]));for(var e=0;e<6;++e)t.exports[e]=f[e]}()},3250:function(t,e,r){"use strict";var n=r(5250),i=r(8210),o=r(3012),a=r(8545);function s(t){return(3===t?function(t,e,r,n){return function(r,i,o){var a=n(t(t(e(i[1],o[0]),e(-o[1],i[0])),t(e(r[1],i[0]),e(-i[1],r[0]))),t(e(r[1],o[0]),e(-o[1],r[0])));return a[a.length-1]}}:4===t?function(t,e,r,n){return function(i,o,a,s){var u=n(t(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),s[2])))),t(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),t(r(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(r(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),a[2])))));return u[u.length-1]}}:function(t,e,r,n){return function(i,o,a,s,u){var h=n(t(t(t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(r(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),r(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),o[3]),t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),r(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),-a[3]),r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),u[2]))),s[3]))),t(r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),-u[3]),t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-s[2]),r(t(e(o[1],s[0]),e(-s[1],o[0])),u[2]))),i[3]),r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(r(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),r(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),-o[3])))),t(t(r(t(r(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(r(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),s[3]),t(r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),-u[3]),r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),o[2]),t(r(t(e(o[1],s[0]),e(-s[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),s[2]))),i[3]))),t(r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),-o[3]),t(r(t(r(t(e(o[1],s[0]),e(-s[1],o[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),s[2]))),a[3]),r(t(r(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(r(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]))),-s[3]))))),t(t(t(r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),a[2]),t(r(t(e(a[1],u[0]),e(-u[1],a[0])),-s[2]),r(t(e(a[1],s[0]),e(-s[1],a[0])),u[2]))),i[3]),r(t(r(t(e(s[1],u[0]),e(-u[1],s[0])),i[2]),t(r(t(e(i[1],u[0]),e(-u[1],i[0])),-s[2]),r(t(e(i[1],s[0]),e(-s[1],i[0])),u[2]))),-a[3])),t(r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),i[2]),t(r(t(e(i[1],u[0]),e(-u[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),u[2]))),s[3]),r(t(r(t(e(a[1],s[0]),e(-s[1],a[0])),i[2]),t(r(t(e(i[1],s[0]),e(-s[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),s[2]))),-u[3]))),t(t(r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),o[2]),t(r(t(e(o[1],u[0]),e(-u[1],o[0])),-a[2]),r(t(e(o[1],a[0]),e(-a[1],o[0])),u[2]))),i[3]),r(t(r(t(e(a[1],u[0]),e(-u[1],a[0])),i[2]),t(r(t(e(i[1],u[0]),e(-u[1],i[0])),-a[2]),r(t(e(i[1],a[0]),e(-a[1],i[0])),u[2]))),-o[3])),t(r(t(r(t(e(o[1],u[0]),e(-u[1],o[0])),i[2]),t(r(t(e(i[1],u[0]),e(-u[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),u[2]))),a[3]),r(t(r(t(e(o[1],a[0]),e(-a[1],o[0])),i[2]),t(r(t(e(i[1],a[0]),e(-a[1],i[0])),-o[2]),r(t(e(i[1],o[0]),e(-o[1],i[0])),a[2]))),-u[3])))));return h[h.length-1]}})(i,n,o,a)}var u=s(3),h=s(4),f=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var n,i=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),a=i-o;if(i>0){if(o<=0)return a;n=i+o}else{if(!(i<0)||o>=0)return a;n=-(i+o)}var s=33306690738754716e-32*n;return a>=s||a<=-s?a:u(t,e,r)},function(t,e,r,n){var i=t[0]-n[0],o=e[0]-n[0],a=r[0]-n[0],s=t[1]-n[1],u=e[1]-n[1],f=r[1]-n[1],l=t[2]-n[2],c=e[2]-n[2],p=r[2]-n[2],d=o*f,v=a*u,g=a*s,m=i*f,b=i*u,y=o*s,x=l*(d-v)+c*(g-m)+p*(b-y),_=7771561172376103e-31*((Math.abs(d)+Math.abs(v))*Math.abs(l)+(Math.abs(g)+Math.abs(m))*Math.abs(c)+(Math.abs(b)+Math.abs(y))*Math.abs(p));return x>_||-x>_?x:h(t,e,r,n)}];function l(t){var e=f[t.length];return e||(e=f[t.length]=s(t.length)),e.apply(void 0,t)}function c(t,e,r,n,i,o,a){return function(e,r,s,u,h){switch(arguments.length){case 0:case 1:return 0;case 2:return n(e,r);case 3:return i(e,r,s);case 4:return o(e,r,s,u);case 5:return a(e,r,s,u,h)}for(var f=Array(arguments.length),l=0;l<arguments.length;++l)f[l]=arguments[l];return t(f)}}!function(){for(;f.length<=5;)f.push(s(f.length));t.exports=c.apply(void 0,[l].concat(f));for(var e=0;e<=5;++e)t.exports[e]=f[e]}()},5382:function(t,e,r){"use strict";var n=r(8210),i=r(3012);t.exports=function(t,e){if(1===t.length)return i(e,t[0]);if(1===e.length)return i(t,e[0]);if(0===t.length||0===e.length)return[0];var r=[0];if(t.length<e.length)for(var o=0;o<t.length;++o)r=n(r,i(e,t[o]));else for(var o=0;o<e.length;++o)r=n(r,i(t,e[o]));return r}},3012:function(t,e,r){"use strict";var n=r(5250),i=r(9362);t.exports=function(t,e){var r=t.length;if(1===r){var o=n(t[0],e);return o[0]?o:[o[1]]}var a=Array(2*r),s=[.1,.1],u=[.1,.1],h=0;n(t[0],e,s),s[0]&&(a[h++]=s[0]);for(var f=1;f<r;++f){n(t[f],e,u),i(s[1],u[0],s),s[0]&&(a[h++]=s[0]);var l=u[1],c=s[1],p=l+c,d=c-(p-l);s[1]=p,d&&(a[h++]=d)}return s[1]&&(a[h++]=s[1]),0===h&&(a[h++]=0),a.length=h,a}},1125:function(t,e,r){"use strict";t.exports=function(t,e,r,i){var o=n(t,r,i),a=n(e,r,i);if(o>0&&a>0||o<0&&a<0)return!1;var s=n(r,t,e),u=n(i,t,e);return(!(s>0)||!(u>0))&&(!(s<0)||!(u<0))&&(0!==o||0!==a||0!==s||0!==u||function(t,e,r,n){for(var i=0;i<2;++i){var o=t[i],a=e[i],s=Math.min(o,a),u=Math.max(o,a),h=r[i],f=n[i],l=Math.min(h,f);if(Math.max(h,f)<s||u<l)return!1}return!0}(t,e,r,i))};var n=r(3250)[3]},8545:function(t){"use strict";t.exports=function(t,e){var r,n,i,o,a,s,u,h,f,l,c,p=0|t.length,d=0|e.length;if(1===p&&1===d)return o=(i=(r=t[0])+(n=-e[0]))-r,(a=r-(i-o)+(n-o))?[a,i]:[i];var v=Array(p+d),g=0,m=0,b=0,y=Math.abs,x=t[0],_=y(x),w=-e[b],E=y(w);_<E?(u=x,(m+=1)<p&&(_=y(x=t[m]))):(u=w,(b+=1)<d&&(E=y(w=-e[b]))),m<p&&_<E||b>=d?(s=x,(m+=1)<p&&(_=y(x=t[m]))):(s=w,(b+=1)<d&&(E=y(w=-e[b])));for(var M=s+u,A=M-s,T=u-A,R=T,O=M;m<p&&b<d;)_<E?(s=x,(m+=1)<p&&(_=y(x=t[m]))):(s=w,(b+=1)<d&&(E=y(w=-e[b]))),A=(M=s+(u=R))-s,(T=u-A)&&(v[g++]=T),f=(h=O+M)-O,R=O-(h-f)+(M-f),O=h;for(;m<p;)A=(M=(s=x)+(u=R))-s,(T=u-A)&&(v[g++]=T),f=(h=O+M)-O,R=O-(h-f)+(M-f),O=h,(m+=1)<p&&(x=t[m]);for(;b<d;)A=(M=(s=w)+(u=R))-s,(T=u-A)&&(v[g++]=T),f=(h=O+M)-O,R=O-(h-f)+(M-f),O=h,(b+=1)<d&&(w=-e[b]);return R&&(v[g++]=R),O&&(v[g++]=O),g||(v[g++]=0),v.length=g,v}},8210:function(t){"use strict";t.exports=function(t,e){var r,n,i,o,a,s,u,h,f,l,c,p=0|t.length,d=0|e.length;if(1===p&&1===d)return o=(i=(r=t[0])+(n=e[0]))-r,(a=r-(i-o)+(n-o))?[a,i]:[i];var v=Array(p+d),g=0,m=0,b=0,y=Math.abs,x=t[0],_=y(x),w=e[b],E=y(w);_<E?(u=x,(m+=1)<p&&(_=y(x=t[m]))):(u=w,(b+=1)<d&&(E=y(w=e[b]))),m<p&&_<E||b>=d?(s=x,(m+=1)<p&&(_=y(x=t[m]))):(s=w,(b+=1)<d&&(E=y(w=e[b])));for(var M=s+u,A=M-s,T=u-A,R=T,O=M;m<p&&b<d;)_<E?(s=x,(m+=1)<p&&(_=y(x=t[m]))):(s=w,(b+=1)<d&&(E=y(w=e[b]))),A=(M=s+(u=R))-s,(T=u-A)&&(v[g++]=T),f=(h=O+M)-O,R=O-(h-f)+(M-f),O=h;for(;m<p;)A=(M=(s=x)+(u=R))-s,(T=u-A)&&(v[g++]=T),f=(h=O+M)-O,R=O-(h-f)+(M-f),O=h,(m+=1)<p&&(x=t[m]);for(;b<d;)A=(M=(s=w)+(u=R))-s,(T=u-A)&&(v[g++]=T),f=(h=O+M)-O,R=O-(h-f)+(M-f),O=h,(b+=1)<d&&(w=e[b]);return R&&(v[g++]=R),O&&(v[g++]=O),g||(v[g++]=0),v.length=g,v}},9127:function(t,e,r){"use strict";t.exports=function(t){return i(n(t))};var n=r(6204),i=r(5771)},7765:function(t,e,r){"use strict";t.exports=function(t,e,r,s){if(r=r||0,void 0===s&&(s=function(t){for(var e=t.length,r=0,n=0;n<e;++n)r=0|Math.max(r,t[n].length);return r-1}(t)),0===t.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var u=function(t,e){for(var r=t.length,n=i.mallocUint8(r),o=0;o<r;++o)n[o]=t[o]<e|0;return n}(e,+r),h=function(t,e){for(var r=t.length,a=e*(e+1)/2*r|0,s=i.mallocUint32(2*a),u=0,h=0;h<r;++h)for(var f=t[h],e=f.length,l=0;l<e;++l)for(var c=0;c<l;++c){var p=f[c],d=f[l];s[u++]=0|Math.min(p,d),s[u++]=0|Math.max(p,d)}o(n(s,[u/2|0,2]));for(var v=2,h=2;h<u;h+=2)(s[h-2]!==s[h]||s[h-1]!==s[h+1])&&(s[v++]=s[h],s[v++]=s[h+1]);return n(s,[v/2|0,2])}(t,s),f=function(t,e,r,o){for(var a=t.data,s=t.shape[0],u=i.mallocDouble(s),h=0,f=0;f<s;++f){var l=a[2*f],c=a[2*f+1];if(r[l]!==r[c]){var p=e[l],d=e[c];a[2*h]=l,a[2*h+1]=c,u[h++]=(d-o)/(d-p)}}return t.shape[0]=h,n(u,[h])}(h,e,u,+r),l=function(t,e){var r=i.mallocInt32(2*e),n=t.shape[0],o=t.data;r[0]=0;for(var a=0,s=0;s<n;++s){var u=o[2*s];if(u!==a){for(r[2*a+1]=s;++a<u;)r[2*a]=s,r[2*a+1]=s;r[2*a]=s}}for(r[2*a+1]=n;++a<e;)r[2*a]=r[2*a+1]=n;return r}(h,0|e.length),c=a(s)(t,h.data,l,u),p=function(t){for(var e=0|t.shape[0],r=t.data,n=Array(e),i=0;i<e;++i)n[i]=[r[2*i],r[2*i+1]];return n}(h),d=[].slice.call(f.data,0,f.shape[0]);return i.free(u),i.free(h.data),i.free(f.data),i.free(l),{cells:c,vertexIds:p,vertexWeights:d}};var n=r(9618),i=r(1888),o=r(446),a=r(1570)},1570:function(t){"use strict";t.exports=function(t){return e[t]()};var e=[function(){return function(t,e,r,n){for(var i=t.length,o=0;o<i;++o)t[o].length;return[]}},function(){function t(t,e,r,n){for(var i=0|Math.min(r,n),o=0|Math.max(r,n),a=t[2*i],s=t[2*i+1];a<s;){var u=a+s>>1,h=e[2*u+1];if(h===o)return u;o<h?s=u:a=u+1}return a}return function(e,r,n,i){for(var o=e.length,a=[],s=0;s<o;++s){var u=e[s];if(2===u.length){var h=(i[u[0]]<<0)+(i[u[1]]<<1);if(0===h||3===h)continue;switch(h){case 0:break;case 1:a.push([t(n,r,u[0],u[1])]);break;case 2:a.push([t(n,r,u[1],u[0])])}}}return a}},function(){function t(t,e,r,n){for(var i=0|Math.min(r,n),o=0|Math.max(r,n),a=t[2*i],s=t[2*i+1];a<s;){var u=a+s>>1,h=e[2*u+1];if(h===o)return u;o<h?s=u:a=u+1}return a}return function(e,r,n,i){for(var o=e.length,a=[],s=0;s<o;++s){var u=e[s],h=u.length;if(3===h){var f=(i[u[0]]<<0)+(i[u[1]]<<1)+(i[u[2]]<<2);if(0===f||7===f)continue;switch(f){case 0:break;case 1:a.push([t(n,r,u[0],u[2]),t(n,r,u[0],u[1])]);break;case 2:a.push([t(n,r,u[1],u[0]),t(n,r,u[1],u[2])]);break;case 3:a.push([t(n,r,u[0],u[2]),t(n,r,u[1],u[2])]);break;case 4:a.push([t(n,r,u[2],u[1]),t(n,r,u[2],u[0])]);break;case 5:a.push([t(n,r,u[2],u[1]),t(n,r,u[0],u[1])]);break;case 6:a.push([t(n,r,u[1],u[0]),t(n,r,u[2],u[0])])}}else if(2===h){var f=(i[u[0]]<<0)+(i[u[1]]<<1);if(0===f||3===f)continue;switch(f){case 0:break;case 1:a.push([t(n,r,u[0],u[1])]);break;case 2:a.push([t(n,r,u[1],u[0])])}}}return a}},function(){function t(t,e,r,n){for(var i=0|Math.min(r,n),o=0|Math.max(r,n),a=t[2*i],s=t[2*i+1];a<s;){var u=a+s>>1,h=e[2*u+1];if(h===o)return u;o<h?s=u:a=u+1}return a}return function(e,r,n,i){for(var o=e.length,a=[],s=0;s<o;++s){var u=e[s],h=u.length;if(4===h){var f=(i[u[0]]<<0)+(i[u[1]]<<1)+(i[u[2]]<<2)+(i[u[3]]<<3);if(0===f||15===f)continue;switch(f){case 0:break;case 1:a.push([t(n,r,u[0],u[1]),t(n,r,u[0],u[2]),t(n,r,u[0],u[3])]);break;case 2:a.push([t(n,r,u[1],u[2]),t(n,r,u[1],u[0]),t(n,r,u[1],u[3])]);break;case 3:a.push([t(n,r,u[1],u[2]),t(n,r,u[0],u[2]),t(n,r,u[0],u[3])],[t(n,r,u[1],u[3]),t(n,r,u[1],u[2]),t(n,r,u[0],u[3])]);break;case 4:a.push([t(n,r,u[2],u[0]),t(n,r,u[2],u[1]),t(n,r,u[2],u[3])]);break;case 5:a.push([t(n,r,u[0],u[1]),t(n,r,u[2],u[1]),t(n,r,u[0],u[3])],[t(n,r,u[2],u[1]),t(n,r,u[2],u[3]),t(n,r,u[0],u[3])]);break;case 6:a.push([t(n,r,u[2],u[0]),t(n,r,u[1],u[0]),t(n,r,u[1],u[3])],[t(n,r,u[2],u[3]),t(n,r,u[2],u[0]),t(n,r,u[1],u[3])]);break;case 7:a.push([t(n,r,u[0],u[3]),t(n,r,u[1],u[3]),t(n,r,u[2],u[3])]);break;case 8:a.push([t(n,r,u[3],u[1]),t(n,r,u[3],u[0]),t(n,r,u[3],u[2])]);break;case 9:a.push([t(n,r,u[3],u[1]),t(n,r,u[0],u[1]),t(n,r,u[0],u[2])],[t(n,r,u[3],u[2]),t(n,r,u[3],u[1]),t(n,r,u[0],u[2])]);break;case 10:a.push([t(n,r,u[1],u[0]),t(n,r,u[3],u[0]),t(n,r,u[1],u[2])],[t(n,r,u[3],u[0]),t(n,r,u[3],u[2]),t(n,r,u[1],u[2])]);break;case 11:a.push([t(n,r,u[1],u[2]),t(n,r,u[0],u[2]),t(n,r,u[3],u[2])]);break;case 12:a.push([t(n,r,u[3],u[0]),t(n,r,u[2],u[0]),t(n,r,u[2],u[1])],[t(n,r,u[3],u[1]),t(n,r,u[3],u[0]),t(n,r,u[2],u[1])]);break;case 13:a.push([t(n,r,u[0],u[1]),t(n,r,u[2],u[1]),t(n,r,u[3],u[1])]);break;case 14:a.push([t(n,r,u[2],u[0]),t(n,r,u[1],u[0]),t(n,r,u[3],u[0])])}}else if(3===h){var f=(i[u[0]]<<0)+(i[u[1]]<<1)+(i[u[2]]<<2);if(0===f||7===f)continue;switch(f){case 0:break;case 1:a.push([t(n,r,u[0],u[2]),t(n,r,u[0],u[1])]);break;case 2:a.push([t(n,r,u[1],u[0]),t(n,r,u[1],u[2])]);break;case 3:a.push([t(n,r,u[0],u[2]),t(n,r,u[1],u[2])]);break;case 4:a.push([t(n,r,u[2],u[1]),t(n,r,u[2],u[0])]);break;case 5:a.push([t(n,r,u[2],u[1]),t(n,r,u[0],u[1])]);break;case 6:a.push([t(n,r,u[1],u[0]),t(n,r,u[2],u[0])])}}else if(2===h){var f=(i[u[0]]<<0)+(i[u[1]]<<1);if(0===f||3===f)continue;switch(f){case 0:break;case 1:a.push([t(n,r,u[0],u[1])]);break;case 2:a.push([t(n,r,u[1],u[0])])}}}return a}}]},6803:function(t,e,r){"use strict";function n(t,e){var r=t.length,n=t.length-e.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:var o=t[0]+t[1]-e[0]-e[1];if(o)return o;return i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],s=e[0]+e[1];if(o=a+t[2]-(s+e[2]))return o;var u=i(t[0],t[1]),h=i(e[0],e[1]),o=i(u,t[2])-i(h,e[2]);if(o)return o;return i(u+t[2],a)-i(h+e[2],s);default:var f=t.slice(0);f.sort();var l=e.slice(0);l.sort();for(var c=0;c<r;++c)if(n=f[c]-l[c])return n;return 0}}r(8828);r(1755),e.Fw=n},3105:function(t,e){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-2147483648,e.sign=function(t){return(t>0)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1)&&!!t},e.log2=function(t){var e,r;return e=(t>65535)<<4,t>>>=e,r=(t>255)<<3,t>>>=r,e|=r,r=(t>15)<<2,t>>>=r,e|=r,r=(t>3)<<1,t>>>=r,(e|=r)|t>>1},e.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},e.popCount=function(t){return t-=t>>>1&1431655765,((t=(858993459&t)+(t>>>2&858993459))+(t>>>4)&252645135)*16843009>>>24},e.countTrailingZeros=r,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=Array(256);!function(t){for(var e=0;e<256;++e){var r=e,n=e,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;t[e]=n<<i&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return t&=65535,e&=65535,(t=((t=((t=((t=(t|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)|(e=((e=((e=((e=(e|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)<<1},e.deinterleave2=function(t,e){return(t=((t=((t=((t=((t=t>>>e&1431655765)|t>>>1)&858993459)|t>>>2)&252645135)|t>>>4)&16711935)|t>>>16)&65535)<<16>>16},e.interleave3=function(t,e,r){return t&=1023,e&=1023,r&=1023,r=((r=((r=((r=(r|r<<16)&4278190335)|r<<8)&251719695)|r<<4)&3272356035)|r<<2)&1227133513,(t=((t=((t=((t=(t|t<<16)&4278190335)|t<<8)&251719695)|t<<4)&3272356035)|t<<2)&1227133513|(e=((e=((e=((e=(e|e<<16)&4278190335)|e<<8)&251719695)|e<<4)&3272356035)|e<<2)&1227133513)<<1)|r<<2},e.deinterleave3=function(t,e){return(t=((t=((t=((t=((t=t>>>e&1227133513)|t>>>2)&3272356035)|t>>>4)&251719695)|t>>>8)&4278190335)|t>>>16)&1023)<<22>>22},e.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},2014:function(t,e,r){"use strict";var n=r(3105),i=r(4623);function o(t,e){var r=t.length,n=t.length-e.length,i=Math.min;if(n)return n;switch(r){case 0:return 0;case 1:return t[0]-e[0];case 2:var o=t[0]+t[1]-e[0]-e[1];if(o)return o;return i(t[0],t[1])-i(e[0],e[1]);case 3:var a=t[0]+t[1],s=e[0]+e[1];if(o=a+t[2]-(s+e[2]))return o;var u=i(t[0],t[1]),h=i(e[0],e[1]),o=i(u,t[2])-i(h,e[2]);if(o)return o;return i(u+t[2],a)-i(h+e[2],s);default:var f=t.slice(0);f.sort();var l=e.slice(0);l.sort();for(var c=0;c<r;++c)if(n=f[c]-l[c])return n;return 0}}function a(t,e){return o(t[0],e[0])}function s(t,e){if(!e)return t.sort(o),t;for(var r=t.length,n=Array(r),i=0;i<r;++i)n[i]=[t[i],e[i]];n.sort(a);for(var i=0;i<r;++i)t[i]=n[i][0],e[i]=n[i][1];return t}function u(t){if(0===t.length)return[];for(var e=1,r=t.length,n=1;n<r;++n){var i=t[n];if(o(i,t[n-1])){if(n===e){e++;continue}t[e++]=i}}return t.length=e,t}function h(t,e){for(var r=0,n=t.length-1,i=-1;r<=n;){var a=r+n>>1,s=o(t[a],e);s<=0?(0===s&&(i=a),r=a+1):s>0&&(n=a-1)}return i}function f(t,e){for(var r=Array(t.length),i=0,a=r.length;i<a;++i)r[i]=[];for(var s=[],i=0,u=e.length;i<u;++i)for(var f=e[i],l=f.length,c=1,p=1<<l;c<p;++c){s.length=n.popCount(c);for(var d=0,v=0;v<l;++v)c&1<<v&&(s[d++]=f[v]);var g=h(t,s);if(!(g<0))for(;r[g++].push(i),!(g>=t.length)&&0===o(t[g],s););}return r}function l(t,e){if(e<0)return[];for(var r=[],i=(1<<e+1)-1,o=0;o<t.length;++o)for(var a=t[o],u=i;u<1<<a.length;u=n.nextCombination(u)){for(var h=Array(e+1),f=0,l=0;l<a.length;++l)u&1<<l&&(h[f++]=a[l]);r.push(h)}return s(r)}e.dimension=function(t){for(var e=0,r=Math.max,n=0,i=t.length;n<i;++n)e=r(e,t[n].length);return e-1},e.countVertices=function(t){for(var e=-1,r=Math.max,n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,s=o.length;a<s;++a)e=r(e,o[a]);return e+1},e.cloneCells=function(t){for(var e=Array(t.length),r=0,n=t.length;r<n;++r)e[r]=t[r].slice(0);return e},e.compareCells=o,e.normalize=s,e.unique=u,e.findCell=h,e.incidence=f,e.dual=function(t,e){if(!e)return f(u(l(t,0)),t,0);for(var r=Array(e),n=0;n<e;++n)r[n]=[];for(var n=0,i=t.length;n<i;++n)for(var o=t[n],a=0,s=o.length;a<s;++a)r[o[a]].push(n);return r},e.explode=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0|i.length,a=1,u=1<<o;a<u;++a){for(var h=[],f=0;f<o;++f)a>>>f&1&&h.push(i[f]);e.push(h)}return s(e)},e.skeleton=l,e.boundary=function(t){for(var e=[],r=0,n=t.length;r<n;++r)for(var i=t[r],o=0,a=i.length;o<a;++o){for(var u=Array(i.length-1),h=0,f=0;h<a;++h)h!==o&&(u[f++]=i[h]);e.push(u)}return s(e)},e.connectedComponents=function(t,e){return e?function(t,e){for(var r=new i(e),n=0;n<t.length;++n)for(var o=t[n],a=0;a<o.length;++a)for(var s=a+1;s<o.length;++s)r.link(o[a],o[s]);for(var u=[],h=r.ranks,n=0;n<h.length;++n)h[n]=-1;for(var n=0;n<t.length;++n){var f=r.find(t[n][0]);h[f]<0?(h[f]=u.length,u.push([t[n].slice(0)])):u[h[f]].push(t[n].slice(0))}return u}(t,e):function(t){for(var e=u(s(l(t,0))),r=new i(e.length),n=0;n<t.length;++n)for(var o=t[n],a=0;a<o.length;++a)for(var f=h(e,[o[a]]),c=a+1;c<o.length;++c)r.link(f,h(e,[o[c]]));for(var p=[],d=r.ranks,n=0;n<d.length;++n)d[n]=-1;for(var n=0;n<t.length;++n){var v=r.find(h(e,[t[n][0]]));d[v]<0?(d[v]=p.length,p.push([t[n].slice(0)])):p[d[v]].push(t[n].slice(0))}return p}(t)}},4623:function(t){"use strict";function e(t){this.roots=Array(t),this.ranks=Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},e.prototype.find=function(t){for(var e=this.roots;e[t]!==t;){var r=e[t];e[t]=e[r],t=r}return t},e.prototype.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],s=i[n];a<s?o[r]=n:s<a?o[n]=r:(o[n]=r,++i[r])}}},5878:function(t,e,r){"use strict";t.exports=function(t,e,r){for(var o=e.length,a=t.length,s=Array(o),u=Array(o),h=Array(o),f=Array(o),l=0;l<o;++l)s[l]=u[l]=-1,h[l]=1/0,f[l]=!1;for(var l=0;l<a;++l){var c=t[l];if(2!==c.length)throw Error("Input must be a graph");var p=c[1],d=c[0];-1!==u[d]?u[d]=-2:u[d]=p,-1!==s[p]?s[p]=-2:s[p]=d}function v(t){if(f[t])return 1/0;var r,i,o=s[t],a=u[t];return o<0||a<0?1/0:Math.abs(n(e[t],r=e[o],i=e[a]))/Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2))}function g(t,e){var r=w[t],n=w[e];w[t]=n,w[e]=r,E[r]=e,E[n]=t}function m(t){return h[w[t]]}function b(t){for(var e=m(t);;){var r=e,n=2*t+1,i=2*(t+1),o=t;if(n<M){var a=m(n);a<r&&(o=n,r=a)}if(i<M&&m(i)<r&&(o=i),o===t)return t;g(t,o),t=o}}function y(t){for(var e=m(t);t>0;){var r,n=1&(r=t)?r-1>>1:(r>>1)-1;if(n>=0&&e<m(n)){g(t,n),t=n;continue}return t}}function x(){if(M>0){var t=w[0];return g(0,M-1),M-=1,b(0),t}return -1}function _(t,e){var r=w[t];return h[r]===e?t:(h[r]=-1/0,y(t),x(),h[r]=e,y((M+=1)-1))}for(var w=[],E=Array(o),l=0;l<o;++l)(h[l]=v(l))<1/0?(E[l]=w.length,w.push(l)):E[l]=-1;for(var M=w.length,l=M>>1;l>=0;--l)b(l);for(;;){var A=x();if(A<0||h[A]>r)break;!function(t){if(!f[t]){f[t]=!0;var e=s[t],r=u[t];s[r]>=0&&(s[r]=e),u[e]>=0&&(u[e]=r),E[e]>=0&&_(E[e],v(e)),E[r]>=0&&_(E[r],v(r))}}(A)}for(var T=[],l=0;l<o;++l)f[l]||(E[l]=T.length,T.push(e[l].slice()));function R(t,e){if(t[e]<0)return e;var r=e,n=e;do{var i=t[n];if(!f[n]||i<0||i===n||(i=t[n=i],!f[n]||i<0||i===n))break;n=i,r=t[r]}while(r!==n);for(var o=e;o!==n;o=t[o])t[o]=n;return n}var O=[];return t.forEach(function(t){var e=R(s,t[0]),r=R(u,t[1]);if(e>=0&&r>=0&&e!==r){var n=E[e],i=E[r];n!==i&&O.push([n,i])}}),i.unique(i.normalize(O)),{positions:T,edges:O}};var n=r(3250),i=r(2014)},1303:function(t,e,r){"use strict";t.exports=function(t,e){if(e[0][0]<e[1][0])r=e[0],o=e[1];else{if(!(e[0][0]>e[1][0]))return i(e,t);r=e[1],o=e[0]}if(t[0][0]<t[1][0])a=t[0],s=t[1];else{if(!(t[0][0]>t[1][0]))return-i(t,e);a=t[1],s=t[0]}var r,o,a,s,u=n(r,o,s),h=n(r,o,a);if(u<0){if(h<=0)return u}else if(u>0){if(h>=0)return u}else if(h)return h;if(u=n(s,a,o),h=n(s,a,r),u<0){if(h<=0)return u}else if(u>0){if(h>=0)return u}else if(h)return h;return o[0]-s[0]};var n=r(3250);function i(t,e){if(e[0][0]<e[1][0])r=e[0],i=e[1];else if(e[0][0]>e[1][0])r=e[1],i=e[0];else{var r,i,o,a,s=Math.min(t[0][1],t[1][1]),u=Math.max(t[0][1],t[1][1]),h=Math.min(e[0][1],e[1][1]),f=Math.max(e[0][1],e[1][1]);return u<h?u-h:s>f?s-f:u-f}t[0][1]<t[1][1]?(o=t[0],a=t[1]):(o=t[1],a=t[0]);var l=n(i,r,o);return l||(l=n(i,r,a))?l:a-i}},4209:function(t,e,r){"use strict";t.exports=function(t){for(var e=t.length,r=2*e,n=Array(r),o=0;o<e;++o){var u=t[o],h=u[0][0]<u[1][0];n[2*o]=new l(u[0][0],u,h,o),n[2*o+1]=new l(u[1][0],u,!h,o)}n.sort(function(t,e){var r=t.x-e.x;return r||(r=t.create-e.create)?r:Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1])});for(var c=i(a),p=[],d=[],v=[],o=0;o<r;){for(var g=n[o].x,m=[];o<r;){var b=n[o];if(b.x!==g)break;o+=1,b.segment[0][0]===b.x&&b.segment[1][0]===b.x?b.create&&(b.segment[0][1]<b.segment[1][1]?(m.push(new f(b.segment[0][1],b.index,!0,!0)),m.push(new f(b.segment[1][1],b.index,!1,!1))):(m.push(new f(b.segment[1][1],b.index,!0,!1)),m.push(new f(b.segment[0][1],b.index,!1,!0)))):c=b.create?c.insert(b.segment,b.index):c.remove(b.segment)}p.push(c.root),d.push(g),v.push(m)}return new s(p,d,v)};var n=r(2478),i=r(3840),o=r(3250),a=r(1303);function s(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function u(t,e){return t.y-e}function h(t,e){for(var r=null;t;){var n,i,a=t.key;a[0][0]<a[1][0]?(n=a[0],i=a[1]):(n=a[1],i=a[0]);var s=o(n,i,e);if(s<0)t=t.left;else if(s>0){if(e[0]!==a[1][0])r=t,t=t.right;else{var u=h(t.right,e);if(u)return u;t=t.left}}else{if(e[0]!==a[1][0])return t;var u=h(t.right,e);if(u)return u;t=t.left}}return r}function f(t,e,r,n){this.y=t,this.index=e,this.start=r,this.closed=n}function l(t,e,r,n){this.x=t,this.segment=e,this.create=r,this.index=n}s.prototype.castUp=function(t){var e=n.le(this.coordinates,t[0]);if(e<0)return -1;this.slabs[e];var r=h(this.slabs[e],t),i=-1;if(r&&(i=r.value),this.coordinates[e]===t[0]){var s=null;if(r&&(s=r.key),e>0){var f=h(this.slabs[e-1],t);f&&(s?a(f.key,s)>0&&(s=f.key,i=f.value):(i=f.value,s=f.key))}var l=this.horizontal[e];if(l.length>0){var c=n.ge(l,t[1],u);if(c<l.length){var p=l[c];if(t[1]===p.y){if(p.closed)return p.index;for(;c<l.length-1&&l[c+1].y===t[1];)if(c+=1,(p=l[c]).closed)return p.index;if(p.y===t[1]&&!p.start){if((c+=1)>=l.length)return i;p=l[c]}}if(p.start){if(s){var d=o(s[0],s[1],[t[0],p.y]);s[0][0]>s[1][0]&&(d=-d),d>0&&(i=p.index)}else i=p.index}else p.y!==t[1]&&(i=p.index)}}}return i}},5202:function(t,e,r){"use strict";var n=r(1944),i=r(8210);function o(t,e){var r=i(n(t,e),[e[e.length-1]]);return r[r.length-1]}function a(t,e,r,n){var i=-e/(n-e);i<0?i=0:i>1&&(i=1);for(var o=1-i,a=t.length,s=Array(a),u=0;u<a;++u)s[u]=i*t[u]+o*r[u];return s}t.exports=function(t,e){for(var r=[],n=[],i=o(t[t.length-1],e),s=t[t.length-1],u=t[0],h=0;h<t.length;++h,s=u){var f=o(u=t[h],e);if(i<0&&f>0||i>0&&f<0){var l=a(s,f,u,i);r.push(l),n.push(l.slice())}f<0?n.push(u.slice()):f>0?r.push(u.slice()):(r.push(u.slice()),n.push(u.slice())),i=f}return{positive:r,negative:n}},t.exports.positive=function(t,e){for(var r=[],n=o(t[t.length-1],e),i=t[t.length-1],s=t[0],u=0;u<t.length;++u,i=s){var h=o(s=t[u],e);(n<0&&h>0||n>0&&h<0)&&r.push(a(i,h,s,n)),h>=0&&r.push(s.slice()),n=h}return r},t.exports.negative=function(t,e){for(var r=[],n=o(t[t.length-1],e),i=t[t.length-1],s=t[0],u=0;u<t.length;++u,i=s){var h=o(s=t[u],e);(n<0&&h>0||n>0&&h<0)&&r.push(a(i,h,s,n)),h<=0&&r.push(s.slice()),n=h}return r}},3387:function(t,e,r){var n;!function(){"use strict";var i={not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return function(t,e){var r,n,a,s,u,h,f,l,c,p=1,d=t.length,v="";for(n=0;n<d;n++)if("string"==typeof t[n])v+=t[n];else if("object"==typeof t[n]){if((s=t[n]).keys)for(a=0,r=e[p];a<s.keys.length;a++){if(void 0==r)throw Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',s.keys[a],s.keys[a-1]));r=r[s.keys[a]]}else r=s.param_no?e[s.param_no]:e[p++];if(i.not_type.test(s.type)&&i.not_primitive.test(s.type)&&r instanceof Function&&(r=r()),i.numeric_arg.test(s.type)&&"number"!=typeof r&&isNaN(r))throw TypeError(o("[sprintf] expecting number but found %T",r));switch(i.number.test(s.type)&&(l=r>=0),s.type){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s.width?parseInt(s.width):0);break;case"e":r=s.precision?parseFloat(r).toExponential(s.precision):parseFloat(r).toExponential();break;case"f":r=s.precision?parseFloat(r).toFixed(s.precision):parseFloat(r);break;case"g":r=s.precision?String(Number(r.toPrecision(s.precision))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s.precision?r.substring(0,s.precision):r;break;case"t":r=String(!!r),r=s.precision?r.substring(0,s.precision):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s.precision?r.substring(0,s.precision):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s.precision?r.substring(0,s.precision):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}i.json.test(s.type)?v+=r:(i.number.test(s.type)&&(!l||s.sign)?(c=l?"+":"-",r=r.toString().replace(i.sign,"")):c="",h=s.pad_char?"0"===s.pad_char?"0":s.pad_char.charAt(1):" ",f=s.width-(c+r).length,u=s.width&&f>0?h.repeat(f):"",v+=s.align?c+r+u:"0"===h?c+u+r:u+c+r)}return v}(function(t){if(s[t])return s[t];for(var e,r=t,n=[],o=0;r;){if(null!==(e=i.text.exec(r)))n.push(e[0]);else if(null!==(e=i.modulo.exec(r)))n.push("%");else if(null!==(e=i.placeholder.exec(r))){if(e[2]){o|=1;var a=[],u=e[2],h=[];if(null!==(h=i.key.exec(u)))for(a.push(h[1]);""!==(u=u.substring(h[0].length));)if(null!==(h=i.key_access.exec(u)))a.push(h[1]);else if(null!==(h=i.index_access.exec(u)))a.push(h[1]);else throw SyntaxError("[sprintf] failed to parse named argument key");else throw SyntaxError("[sprintf] failed to parse named argument key");e[2]=a}else o|=2;if(3===o)throw Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}else throw SyntaxError("[sprintf] unexpected placeholder");r=r.substring(e[0].length)}return s[t]=n}(t),arguments)}function a(t,e){return o.apply(null,[t].concat(e||[]))}var s=Object.create(null);e.sprintf=o,e.vsprintf=a,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=a,void 0!==(n=(function(){return{sprintf:o,vsprintf:a}}).call(e,r,e,t))&&(t.exports=n))}()},3711:function(t,e,r){"use strict";t.exports=function(t,e){if(t.dimension<=0)return{positions:[],cells:[]};if(1===t.dimension)return function(t,e){for(var r=i(t,e),n=r.length,o=Array(n),a=Array(n),s=0;s<n;++s)o[s]=[r[s]],a[s]=[s];return{positions:o,cells:a}}(t,e);var r=t.order.join()+"-"+t.dtype,s=a[r],e=+e||0;return s||(s=a[r]=function(t,e){var r=o[t.length+"d"];if(r)return r(n,t,e)}(t.order,t.dtype)),s(t,e)};var n=r(2640),i=r(781),o={"2d":function(t,e,r){var n=t({order:e,scalarArguments:3,getters:"generic"===r?[0]:void 0,phase:function(t,e,r,n){return t>n|0},vertex:function(t,e,r,n,i,o,a,s,u,h,f,l,c){var p=(a<<0)+(s<<1)+(u<<2)+(h<<3)|0;if(0!==p&&15!==p)switch(p){case 0:case 15:f.push([t-.5,e-.5]);break;case 1:f.push([t-.25-.25*(n+r-2*c)/(r-n),e-.25-.25*(i+r-2*c)/(r-i)]);break;case 2:f.push([t-.75-.25*(-n-r+2*c)/(n-r),e-.25-.25*(o+n-2*c)/(n-o)]);break;case 3:f.push([t-.5,e-.5-.5*(i+r+o+n-4*c)/(r-i+n-o)]);break;case 4:f.push([t-.25-.25*(o+i-2*c)/(i-o),e-.75-.25*(-i-r+2*c)/(i-r)]);break;case 5:f.push([t-.5-.5*(n+r+o+i-4*c)/(r-n+i-o),e-.5]);break;case 6:f.push([t-.5-.25*(-n-r+o+i)/(n-r+i-o),e-.5-.25*(-i-r+o+n)/(i-r+n-o)]);break;case 7:f.push([t-.75-.25*(o+i-2*c)/(i-o),e-.75-.25*(o+n-2*c)/(n-o)]);break;case 8:f.push([t-.75-.25*(-o-i+2*c)/(o-i),e-.75-.25*(-o-n+2*c)/(o-n)]);break;case 9:f.push([t-.5-.25*(n+r+-o-i)/(r-n+o-i),e-.5-.25*(i+r+-o-n)/(r-i+o-n)]);break;case 10:f.push([t-.5-.5*(-n-r+-o-i+4*c)/(n-r+o-i),e-.5]);break;case 11:f.push([t-.25-.25*(-o-i+2*c)/(o-i),e-.75-.25*(i+r-2*c)/(r-i)]);break;case 12:f.push([t-.5,e-.5-.5*(-i-r+-o-n+4*c)/(i-r+o-n)]);break;case 13:f.push([t-.75-.25*(n+r-2*c)/(r-n),e-.25-.25*(-o-n+2*c)/(o-n)]);break;case 14:f.push([t-.25-.25*(-n-r+2*c)/(n-r),e-.25-.25*(-i-r+2*c)/(i-r)])}},cell:function(t,e,r,n,i,o,a,s,u){i?s.push([t,e]):s.push([e,t])}});return function(t,e){var r=[],i=[];return n(t,r,i,e),{positions:r,cells:i}}}},a={}},529:function(t,e,r){"use strict";t.exports=function t(e,r,i){var i=i||{},o=i.fontStyle||"normal",s=i.fontWeight||"normal",u=i.fontVariant||"normal",h=[o,s,u,e].join("_"),f=a[h];f||(f=a[h]={" ":{data:new Float32Array(0),shape:.2}});var l=f[r];if(!l){if(r.length<=1||!/\d/.test(r))l=f[r]=function(t){for(var e=t.cells,r=t.positions,n=new Float32Array(6*e.length),i=0,o=0,a=0;a<e.length;++a)for(var s=e[a],u=0;u<3;++u){var h=r[s[u]];n[i++]=h[0],n[i++]=h[1]+1.4,o=Math.max(h[0],o)}return{data:n,shape:o}}(n(r,{triangles:!0,font:e,fontStyle:o,fontWeight:s,fontVariant:u,textAlign:i.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var c=r.split(/(\d|\s)/),p=Array(c.length),d=0,v=0,g=0;g<c.length;++g)p[g]=t(e,c[g]),d+=p[g].data.length,v+=p[g].shape,g>0&&(v+=.02);for(var m=new Float32Array(d),b=0,y=-.5*v,g=0;g<p.length;++g){for(var x=p[g].data,_=0;_<x.length;_+=2)m[b++]=x[_]+y,m[b++]=x[_+1];y+=p[g].shape+.02}l=f[r]={data:m,shape:v}}}return l};var n=r(4359),o=window||i.global||{},a=o.__TEXT_CACHE||{};o.__TEXT_CACHE={}},665:function(t,e,r){"use strict";var n=r(3202);function i(t,e){var r=n(getComputedStyle(t).getPropertyValue(e));return r[0]*o(r[1],t)}function o(t,e){switch(e=e||document.body,t=(t||"px").trim().toLowerCase(),(e===window||e===document)&&(e=document.body),t){case"%":return e.clientHeight/100;case"ch":case"ex":var r,n,o,a;return r=t,n=e,(o=document.createElement("div")).style["font-size"]="128"+r,n.appendChild(o),a=i(o,"font-size")/128,n.removeChild(o),a;case"em":return i(e,"font-size");case"rem":return i(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}t.exports=o},7261:function(t,e,r){"use strict";t.exports=function(t){var e=(t=t||{}).center||[0,0,0],r=t.up||[0,1,0],n=t.right||l(r),i=t.radius||1,o=t.theta||0,f=t.phi||0;if(e=[].slice.call(e,0,3),s(r=[].slice.call(r,0,3),r),s(n=[].slice.call(n,0,3),n),"eye"in t){var p=t.eye,d=[p[0]-e[0],p[1]-e[1],p[2]-e[2]];a(n,d,r),1e-6>h(n[0],n[1],n[2])?n=l(r):s(n,n),i=h(d[0],d[1],d[2]);var v=u(r,d)/i,g=u(n,d)/i;f=Math.acos(v),o=Math.acos(g)}return i=Math.log(i),new c(t.zoomMin,t.zoomMax,e,r,n,i,o,f)};var n=r(9215),i=r(7608),o=r(6079),a=r(5911),s=r(3536),u=r(244);function h(t,e,r){return Math.sqrt(Math.pow(t,2)+Math.pow(e,2)+Math.pow(r,2))}function f(t){return Math.min(1,Math.max(-1,t))}function l(t){var e=Math.abs(t[0]),r=Math.abs(t[1]),n=Math.abs(t[2]),i=[0,0,0];e>Math.max(r,n)?i[2]=1:r>Math.max(e,n)?i[0]=1:i[1]=1;for(var o=0,a=0,u=0;u<3;++u)o+=t[u]*t[u],a+=i[u]*t[u];for(var u=0;u<3;++u)i[u]-=a/o*t[u];return s(i,i),i}function c(t,e,r,i,o,a,s,u){this.center=n(r),this.up=n(i),this.right=n(o),this.radius=n([a]),this.angle=n([s,u]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(t,e),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=Array(16);for(var h=0;h<16;++h)this.computedMatrix[h]=.5;this.recalcMatrix(0)}var p=c.prototype;p.setDistanceLimits=function(t,e){t=t>0?Math.log(t):-1/0,e=Math.max(e=e>0?Math.log(e):1/0,t),this.radius.bounds[0][0]=t,this.radius.bounds[1][0]=e},p.getDistanceLimits=function(t){var e=this.radius.bounds[0];return t?(t[0]=Math.exp(e[0][0]),t[1]=Math.exp(e[1][0]),t):[Math.exp(e[0][0]),Math.exp(e[1][0])]},p.recalcMatrix=function(t){this.center.curve(t),this.up.curve(t),this.right.curve(t),this.radius.curve(t),this.angle.curve(t);for(var e=this.computedUp,r=this.computedRight,n=0,i=0,o=0;o<3;++o)i+=e[o]*r[o],n+=e[o]*e[o];for(var u=Math.sqrt(n),f=0,o=0;o<3;++o)r[o]-=e[o]*i/n,f+=r[o]*r[o],e[o]/=u;for(var l=Math.sqrt(f),o=0;o<3;++o)r[o]/=l;var c=this.computedToward;a(c,e,r),s(c,c);for(var p=Math.exp(this.computedRadius[0]),d=this.computedAngle[0],v=this.computedAngle[1],g=Math.cos(d),m=Math.sin(d),b=Math.cos(v),y=Math.sin(v),x=this.computedCenter,_=g*b,w=m*b,E=-g*y,M=-m*y,A=this.computedEye,T=this.computedMatrix,o=0;o<3;++o){var R=_*r[o]+w*c[o]+y*e[o];T[4*o+1]=E*r[o]+M*c[o]+b*e[o],T[4*o+2]=R,T[4*o+3]=0}var O=T[1],S=T[5],k=T[9],C=T[2],L=T[6],I=T[10],P=S*I-k*L,B=k*C-O*I,F=O*L-S*C,N=h(P,B,F);P/=N,B/=N,F/=N,T[0]=P,T[4]=B,T[8]=F;for(var o=0;o<3;++o)A[o]=x[o]+T[2+4*o]*p;for(var o=0;o<3;++o){for(var f=0,D=0;D<3;++D)f+=T[o+4*D]*A[D];T[12+o]=-f}T[15]=1},p.getMatrix=function(t,e){this.recalcMatrix(t);var r=this.computedMatrix;if(e){for(var n=0;n<16;++n)e[n]=r[n];return e}return r};var d=[0,0,0];p.rotate=function(t,e,r,n){if(this.angle.move(t,e,r),n){this.recalcMatrix(t);var i=this.computedMatrix;d[0]=i[2],d[1]=i[6],d[2]=i[10];for(var a=this.computedUp,s=this.computedRight,u=this.computedToward,h=0;h<3;++h)i[4*h]=a[h],i[4*h+1]=s[h],i[4*h+2]=u[h];o(i,i,n,d);for(var h=0;h<3;++h)a[h]=i[4*h],s[h]=i[4*h+1];this.up.set(t,a[0],a[1],a[2]),this.right.set(t,s[0],s[1],s[2])}},p.pan=function(t,e,r,n){e=e||0,r=r||0,n=n||0,this.recalcMatrix(t);var i=this.computedMatrix;this.computedRadius[0];var o=i[1],a=i[5],s=i[9],u=h(o,a,s);o/=u,a/=u,s/=u;var f=i[0],l=i[4],c=i[8],p=f*o+l*a+c*s,d=h(f-=o*p,l-=a*p,c-=s*p),v=(f/=d)*e+o*r,g=(l/=d)*e+a*r,m=(c/=d)*e+s*r;this.center.move(t,v,g,m);var b=Math.exp(this.computedRadius[0]);b=Math.max(1e-4,b+n),this.radius.set(t,Math.log(b))},p.translate=function(t,e,r,n){this.center.move(t,e||0,r||0,n||0)},p.setMatrix=function(t,e,r,n){var o,a,s=1;"number"==typeof r&&(s=0|r),(s<0||s>3)&&(s=1);var u=(s+2)%3;e||(this.recalcMatrix(t),e=this.computedMatrix);var l=e[s],c=e[s+4],p=e[s+8];if(n){var d=Math.abs(l),v=Math.abs(p),g=Math.max(d,Math.abs(c),v);d===g?(l=l<0?-1:1,c=p=0):v===g?(p=p<0?-1:1,l=c=0):(c=c<0?-1:1,l=p=0)}else{var m=h(l,c,p);l/=m,c/=m,p/=m}var b=e[u],y=e[u+4],x=e[u+8],_=b*l+y*c+x*p,w=h(b-=l*_,y-=c*_,x-=p*_);b/=w,y/=w;var E=c*(x/=w)-p*y,M=p*b-l*x,A=l*y-c*b,T=h(E,M,A);if(E/=T,M/=T,A/=T,this.center.jump(t,G,H,W),this.radius.idle(t),this.up.jump(t,l,c,p),this.right.jump(t,b,y,x),2===s){var R=e[1],O=e[5],S=e[9],k=R*b+O*y+S*x,C=R*E+O*M+S*A;o=B<0?-Math.PI/2:Math.PI/2,a=Math.atan2(C,k)}else{var L=e[2],I=e[6],P=e[10],B=L*l+I*c+P*p,F=L*b+I*y+P*x,N=L*E+I*M+P*A;o=Math.asin(f(B)),a=Math.atan2(N,F)}this.angle.jump(t,a,o),this.recalcMatrix(t);var D=e[2],U=e[6],z=e[10],j=this.computedMatrix;i(j,e);var V=j[15],G=j[12]/V,H=j[13]/V,W=j[14]/V,X=Math.exp(this.computedRadius[0]);this.center.jump(t,G-D*X,H-U*X,W-z*X)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(t){this.center.idle(t),this.up.idle(t),this.right.idle(t),this.radius.idle(t),this.angle.idle(t)},p.flush=function(t){this.center.flush(t),this.up.flush(t),this.right.flush(t),this.radius.flush(t),this.angle.flush(t)},p.setDistance=function(t,e){e>0&&this.radius.set(t,Math.log(e))},p.lookAt=function(t,e,r,n){this.recalcMatrix(t),e=e||this.computedEye,r=r||this.computedCenter;var i=(n=n||this.computedUp)[0],o=n[1],a=n[2],s=h(i,o,a);if(!(s<1e-6)){i/=s,o/=s,a/=s;var u=e[0]-r[0],l=e[1]-r[1],c=e[2]-r[2],p=h(u,l,c);if(!(p<1e-6)){u/=p,l/=p,c/=p;var d=this.computedRight,v=d[0],g=d[1],m=d[2],b=i*v+o*g+a*m,y=h(v-=b*i,g-=b*o,m-=b*a);if(!(y<.01&&(y=h(v=o*c-a*l,g=a*u-i*c,m=i*l-o*u))<1e-6)){v/=y,g/=y,m/=y,this.up.set(t,i,o,a),this.right.set(t,v,g,m),this.center.set(t,r[0],r[1],r[2]),this.radius.set(t,Math.log(p));var x=o*m-a*g,_=a*v-i*m,w=i*g-o*v,E=h(x,_,w),M=i*u+o*l+a*c,A=v*u+g*l+m*c,T=(x/=E)*u+(_/=E)*l+(w/=E)*c,R=Math.asin(f(M)),O=Math.atan2(T,A),S=this.angle._state,k=S[S.length-1],C=S[S.length-2],L=Math.abs((k%=2*Math.PI)+2*Math.PI-O),I=Math.abs(k-O),P=Math.abs(k-2*Math.PI-O);L<I&&(k+=2*Math.PI),P<I&&(k-=2*Math.PI),this.angle.jump(this.angle.lastT(),k,C),this.angle.set(t,O,R)}}}}},5250:function(t){"use strict";t.exports=function(t,r,n){var i=t*r,o=e*t,a=o-(o-t),s=t-a,u=e*r,h=u-(u-r),f=r-h,l=s*f-(i-a*h-s*h-a*f);return n?(n[0]=l,n[1]=i,n):[l,i]};var e=134217729},9362:function(t){"use strict";t.exports=function(t,e,r){var n=t+e,i=n-t,o=e-i,a=t-(n-i);return r?(r[0]=a+o,r[1]=n,r):[a+o,n]}},1888:function(t,e,r){"use strict";var n=r(8828),i=r(1338),o=r(4793).hp;r.g.__TYPEDARRAY_POOL||(r.g.__TYPEDARRAY_POOL={UINT8:i([32,0]),UINT16:i([32,0]),UINT32:i([32,0]),BIGUINT64:i([32,0]),INT8:i([32,0]),INT16:i([32,0]),INT32:i([32,0]),BIGINT64:i([32,0]),FLOAT:i([32,0]),DOUBLE:i([32,0]),DATA:i([32,0]),UINT8C:i([32,0]),BUFFER:i([32,0])});var a="undefined"!=typeof Uint8ClampedArray,s="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,h=r.g.__TYPEDARRAY_POOL;h.UINT8C||(h.UINT8C=i([32,0])),h.BIGUINT64||(h.BIGUINT64=i([32,0])),h.BIGINT64||(h.BIGINT64=i([32,0])),h.BUFFER||(h.BUFFER=i([32,0]));var f=h.DATA,l=h.BUFFER;function c(t){if(t){var e=t.length||t.byteLength;f[n.log2(e)].push(t)}}function p(t){var t=n.nextPow2(t),e=f[n.log2(t)];return e.length>0?e.pop():new ArrayBuffer(t)}function d(t){return new Uint8Array(p(t),0,t)}function v(t){return new Uint16Array(p(2*t),0,t)}function g(t){return new Uint32Array(p(4*t),0,t)}function m(t){return new Int8Array(p(t),0,t)}function b(t){return new Int16Array(p(2*t),0,t)}function y(t){return new Int32Array(p(4*t),0,t)}function x(t){return new Float32Array(p(4*t),0,t)}function _(t){return new Float64Array(p(8*t),0,t)}function w(t){return a?new Uint8ClampedArray(p(t),0,t):d(t)}function E(t){return s?new BigUint64Array(p(8*t),0,t):null}function M(t){return u?new BigInt64Array(p(8*t),0,t):null}function A(t){return new DataView(p(t),0,t)}function T(t){t=n.nextPow2(t);var e=l[n.log2(t)];return e.length>0?e.pop():new o(t)}e.free=function(t){if(o.isBuffer(t))l[n.log2(t.length)].push(t);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(t)&&(t=t.buffer),!t)return;var e=t.length||t.byteLength;f[0|n.log2(e)].push(t)}},e.freeUint8=e.freeUint16=e.freeUint32=e.freeBigUint64=e.freeInt8=e.freeInt16=e.freeInt32=e.freeBigInt64=e.freeFloat32=e.freeFloat=e.freeFloat64=e.freeDouble=e.freeUint8Clamped=e.freeDataView=function(t){c(t.buffer)},e.freeArrayBuffer=c,e.freeBuffer=function(t){l[n.log2(t.length)].push(t)},e.malloc=function(t,e){if(void 0===e||"arraybuffer"===e)return p(t);switch(e){case"uint8":return d(t);case"uint16":return v(t);case"uint32":return g(t);case"int8":return m(t);case"int16":return b(t);case"int32":return y(t);case"float":case"float32":return x(t);case"double":case"float64":return _(t);case"uint8_clamped":return w(t);case"bigint64":return M(t);case"biguint64":return E(t);case"buffer":return T(t);case"data":case"dataview":return A(t)}return null},e.mallocArrayBuffer=p,e.mallocUint8=d,e.mallocUint16=v,e.mallocUint32=g,e.mallocInt8=m,e.mallocInt16=b,e.mallocInt32=y,e.mallocFloat32=e.mallocFloat=x,e.mallocFloat64=e.mallocDouble=_,e.mallocUint8Clamped=w,e.mallocBigUint64=E,e.mallocBigInt64=M,e.mallocDataView=A,e.mallocBuffer=T,e.clearCache=function(){for(var t=0;t<32;++t)h.UINT8[t].length=0,h.UINT16[t].length=0,h.UINT32[t].length=0,h.INT8[t].length=0,h.INT16[t].length=0,h.INT32[t].length=0,h.FLOAT[t].length=0,h.DOUBLE[t].length=0,h.BIGUINT64[t].length=0,h.BIGINT64[t].length=0,h.UINT8C[t].length=0,f[t].length=0,l[t].length=0}},1755:function(t){"use strict";function e(t){this.roots=Array(t),this.ranks=Array(t);for(var e=0;e<t;++e)this.roots[e]=e,this.ranks[e]=0}t.exports=e;var r=e.prototype;Object.defineProperty(r,"length",{get:function(){return this.roots.length}}),r.makeSet=function(){var t=this.roots.length;return this.roots.push(t),this.ranks.push(0),t},r.find=function(t){for(var e=t,r=this.roots;r[t]!==t;)t=r[t];for(;r[e]!==t;){var n=r[e];r[e]=t,e=n}return t},r.link=function(t,e){var r=this.find(t),n=this.find(e);if(r!==n){var i=this.ranks,o=this.roots,a=i[r],s=i[n];a<s?o[r]=n:s<a?o[n]=r:(o[n]=r,++i[r])}}},1682:function(t){"use strict";t.exports=function(t,e,r){return 0===t.length?t:e?(r||t.sort(e),function(t,e){for(var r=1,n=t.length,i=t[0],o=t[0],a=1;a<n;++a)if(o=i,e(i=t[a],o)){if(a===r){r++;continue}t[r++]=i}return t.length=r,t}(t,e)):(r||t.sort(),function(t){for(var e=1,r=t.length,n=t[0],i=t[0],o=1;o<r;++o,i=n)if(i=n,(n=t[o])!==i){if(o===e){e++;continue}t[e++]=n}return t.length=e,t}(t))}},4359:function(t,e,r){"use strict";t.exports=function(t,e){return("object"!=typeof e||null===e)&&(e={}),n(t,e.canvas||i,e.context||o,e)};var n=r(7718),i=null,o=null;"undefined"!=typeof document&&((i=document.createElement("canvas")).width=8192,i.height=1024,o=i.getContext("2d"))},7718:function(t,e,r){t.exports=function(t,e,r,n){var o=64,a=1.25,s={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return n&&(n.size&&n.size>0&&(o=n.size),n.lineSpacing&&n.lineSpacing>0&&(a=n.lineSpacing),n.styletags&&n.styletags.breaklines&&(s.breaklines=!!n.styletags.breaklines),n.styletags&&n.styletags.bolds&&(s.bolds=!!n.styletags.bolds),n.styletags&&n.styletags.italics&&(s.italics=!!n.styletags.italics),n.styletags&&n.styletags.subscripts&&(s.subscripts=!!n.styletags.subscripts),n.styletags&&n.styletags.superscripts&&(s.superscripts=!!n.styletags.superscripts)),r.font=[n.fontStyle,n.fontVariant,n.fontWeight,o+"px",n.font].filter(function(t){return t}).join(" "),r.textAlign="start",r.textBaseline="alphabetic",r.direction="ltr",l(function(t,e,r,n,o,a){r=r.replace(/\n/g,""),r=!0===a.breaklines?r.replace(/\<br\>/g,"\n"):r.replace(/\<br\>/g," ");var s,u,f,l,c,p="",d=[];for(u=0;u<r.length;++u)d[u]=p;!0===a.bolds&&(d=h("b","b|",r,d)),!0===a.italics&&(d=h("i","i|",r,d)),!0===a.superscripts&&(d=h("sup","+1",r,d)),!0===a.subscripts&&(d=h("sub","-1",r,d));var v=[],g="";for(u=0;u<r.length;++u)null!==d[u]&&(g+=r[u],v.push(d[u]));var m=g.split("\n"),b=m.length,y=Math.round(o*n),x=2*n,_=0,w=b*y+x;t.height<w&&(t.height=w),e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.fillStyle="#fff";var E=0,M="";function A(){if(""!==M){var t=e.measureText(M).width;e.fillText(M,n+f,x+l),f+=t}}function T(){return""+Math.round(c)+"px "}for(s=0;s<b;++s){var R=m[s]+"\n";for(u=0,f=0,l=s*y,c=n,M="";u<R.length;++u){var O=u+E<v.length?v[u+E]:v[v.length-1];p===O?M+=R[u]:(A(),M=R[u],void 0!==O&&(function(t,r){var n=""+e.font;if(!0===a.subscripts){var i=t.indexOf("-"),o=r.indexOf("-"),s=i>-1?parseInt(t[1+i]):0,u=o>-1?parseInt(r[1+o]):0;s!==u&&(n=n.replace(T(),"?px "),c*=Math.pow(.75,u-s),n=n.replace("?px ",T())),l+=.25*y*(u-s)}if(!0===a.superscripts){var h=t.indexOf("+"),f=r.indexOf("+"),p=h>-1?parseInt(t[1+h]):0,d=f>-1?parseInt(r[1+f]):0;p!==d&&(n=n.replace(T(),"?px "),c*=Math.pow(.75,d-p),n=n.replace("?px ",T())),l-=.25*y*(d-p)}if(!0===a.bolds){var v=t.indexOf("b|")>-1,g=r.indexOf("b|")>-1;!v&&g&&(n=m?n.replace("italic ","italic bold "):"bold "+n),v&&!g&&(n=n.replace("bold ",""))}if(!0===a.italics){var m=t.indexOf("i|")>-1,b=r.indexOf("i|")>-1;!m&&b&&(n="italic "+n),m&&!b&&(n=n.replace("italic ",""))}e.font=n}(p,O),p=O))}A(),E+=R.length;var S=0|Math.round(f+2*n);_<S&&(_=S)}var k=_,C=x+y*b;return i(e.getImageData(0,0,k,C).data,[C,k,4]).pick(-1,-1,0).transpose(1,0)}(e,r,t,o,a,s),n,o)},t.exports.processPixels=l;var n=r(3711),i=r(9618),o=r(5878),a=r(332),s=r(2538),u=r(2095);function h(t,e,r,n){for(var i="<"+t+">",o="</"+t+">",a=i.length,s=o.length,u="+"===e[0]||"-"===e[0],h=0,f=-s;h>-1&&-1!==(h=r.indexOf(i,h))&&-1!==(f=r.indexOf(o,h+a))&&!(f<=h);){for(var l=h;l<f+s;++l)if(l<h+a||l>=f)n[l]=null,r=r.substr(0,l)+" "+r.substr(l+1);else if(null!==n[l]){var c=n[l].indexOf(e[0]);-1===c?n[l]+=e:u&&(n[l]=n[l].substr(0,c+1)+(1+parseInt(n[l][c+1]))+n[l].substr(c+2))}var p=h+a,d=r.substr(p,f-p).indexOf(i);h=-1!==d?d:f+s}return n}function f(t,e,r,i){var h,f=(h=n(t,128),i?o(h.cells,h.positions,.25):{edges:h.cells,positions:h.positions}),l=function(t,e,r){for(var n=e.textAlign||"start",i=e.textBaseline||"alphabetic",o=[1073741824,1073741824],a=[0,0],s=t.length,u=0;u<s;++u)for(var h=t[u],f=0;f<2;++f)o[f]=0|Math.min(o[f],h[f]),a[f]=0|Math.max(a[f],h[f]);var l=0;switch(n){case"center":l=-.5*(o[0]+a[0]);break;case"right":case"end":l=-a[0];break;case"left":case"start":l=-o[0];break;default:throw Error("vectorize-text: Unrecognized textAlign: '"+n+"'")}var c=0;switch(i){case"hanging":case"top":c=-o[1];break;case"middle":c=-.5*(o[1]+a[1]);break;case"alphabetic":case"ideographic":c=-3*r;break;case"bottom":c=-a[1];break;default:throw Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var p=1/r;return"lineHeight"in e?p*=+e.lineHeight:"width"in e?p=e.width/(a[0]-o[0]):"height"in e&&(p=e.height/(a[1]-o[1])),t.map(function(t){return[p*(t[0]+l),p*(t[1]+c)]})}(f.positions,e,r),c=f.edges,p="ccw"===e.orientation;if(a(l,c),e.polygons||e.polygon||e.polyline){for(var d=u(c,l),v=Array(d.length),g=0;g<d.length;++g){for(var m=d[g],b=Array(m.length),y=0;y<m.length;++y){for(var x=m[y],_=Array(x.length),w=0;w<x.length;++w)_[w]=l[x[w]].slice();p&&_.reverse(),b[y]=_}v[g]=b}return v}return e.triangles||e.triangulate||e.triangle?{cells:s(l,c,{delaunay:!1,exterior:!1,interior:!0}),positions:l}:{edges:c,positions:l}}function l(t,e,r){try{return f(t,e,r,!0)}catch(t){}try{return f(t,e,r,!1)}catch(t){}return e.polygons||e.polyline||e.polygon?[]:e.triangles||e.triangulate||e.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},1538:function(t){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=b);var e,r,n,i=!1;if("function"==typeof WeakMap){var o=WeakMap;if("undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var a=new o,s=Object.freeze({});if(a.set(s,1),1!==a.get(s))i=!0;else{t.exports=WeakMap;return}}}Object.prototype.hasOwnProperty;var u=Object.getOwnPropertyNames,h=Object.defineProperty,f=Object.isExtensible,l="weakmap:",c=l+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var p=new Uint8Array(new ArrayBuffer(25));crypto.getRandomValues(p),c=l+"rand:"+Array.prototype.map.call(p,function(t){return(t%36).toString(36)}).join("")+"___"}if(h(Object,"getOwnPropertyNames",{value:function(t){return u(t).filter(y)}}),"getPropertyNames"in Object){var d=Object.getPropertyNames;h(Object,"getPropertyNames",{value:function(t){return d(t).filter(y)}})}e=Object.freeze,h(Object,"freeze",{value:function(t){return x(t),e(t)}}),r=Object.seal,h(Object,"seal",{value:function(t){return x(t),r(t)}}),n=Object.preventExtensions,h(Object,"preventExtensions",{value:function(t){return x(t),n(t)}});var v=!1,g=0,m=function(){this instanceof m||w();var t=[],e=[],r=g++;return Object.create(m.prototype,{get___:{value:_(function(n,i){var o,a=x(n);return a?r in a?a[r]:i:(o=t.indexOf(n))>=0?e[o]:i})},has___:{value:_(function(e){var n=x(e);return n?r in n:t.indexOf(e)>=0})},set___:{value:_(function(n,i){var o,a=x(n);return a?a[r]=i:(o=t.indexOf(n))>=0?e[o]=i:(e[o=t.length]=i,t[o]=n),this})},delete___:{value:_(function(n){var i,o,a=x(n);return a?r in a&&delete a[r]:!((i=t.indexOf(n))<0)&&(o=t.length-1,t[i]=void 0,e[i]=e[o],t[i]=t[o],t.length=o,e.length=o,!0)})}})};m.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof o?function(){function e(){this instanceof m||w();var t,e=new o,r=void 0,n=!1;return t=i?function(t,n){return e.set(t,n),e.has(t)||(r||(r=new m),r.set(t,n)),this}:function(t,i){if(n)try{e.set(t,i)}catch(e){r||(r=new m),r.set___(t,i)}else e.set(t,i);return this},Object.create(m.prototype,{get___:{value:_(function(t,n){return r?e.has(t)?e.get(t):r.get___(t,n):e.get(t,n)})},has___:{value:_(function(t){return e.has(t)||!!r&&r.has___(t)})},set___:{value:_(t)},delete___:{value:_(function(t){var n=!!e.delete(t);return r&&r.delete___(t)||n})},permitHostObjects___:{value:_(function(t){if(t===b)n=!0;else throw Error("bogus call to permitHostObjects___")})}})}i&&"undefined"!=typeof Proxy&&(Proxy=void 0),e.prototype=m.prototype,t.exports=e,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),t.exports=m)}function b(t){t.permitHostObjects___&&t.permitHostObjects___(b)}function y(t){return!(t.substr(0,l.length)==l&&"___"===t.substr(t.length-3))}function x(t){if(t!==Object(t))throw TypeError("Not an object: "+t);var e=t[c];if(e&&e.key===t)return e;if(f(t)){e={key:t};try{return h(t,c,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function _(t){return t.prototype=null,Object.freeze(t)}function w(){v||"undefined"==typeof console||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},236:function(t,e,r){var n=r(8284);t.exports=function(){var t={};return function(e){if(("object"!=typeof e||null===e)&&"function"!=typeof e)throw Error("Weakmap-shim: Key must be object");var r=e.valueOf(t);return r&&r.identity===t?r:n(e,t)}}},8284:function(t){t.exports=function(t,e){var r={identity:e},n=t.valueOf;return Object.defineProperty(t,"valueOf",{value:function(t){return t!==e?n.apply(this,arguments):r},writable:!0}),r}},606:function(t,e,r){var n=r(236);t.exports=function(){var t=n();return{get:function(e,r){var n=t(e);return n.hasOwnProperty("value")?n.value:r},set:function(e,r){return t(e).value=r,this},has:function(e){return"value"in t(e)},delete:function(e){return delete t(e).value}}}},3349:function(t){"use strict";var e,r;t.exports=(e=(function(){return function(t,e,r,n,i,o){var a=t[0],s=r[0],u=[0];n|=0;var h=0;for(h=0;h<a;++h){var f=e[n]-o,l=e[n+s]-o;f>=0!=l>=0&&i.push(u[0]+.5+.5*(f+l)/(f-l)),n+=s,++u[0]}}}).bind(void 0,{funcName:"zeroCrossings"}),r={},function(t,n,i){var o=t.dtype,a=t.order,s=[o,a.join()].join(),u=r[s];return u||(r[s]=u=e([o,a])),u(t.shape.slice(0),t.data,t.stride,0|t.offset,n,i)})},781:function(t,e,r){"use strict";t.exports=function(t,e){var r=[];return e=+e||0,n(t.hi(t.shape[0]-1),r,e),r};var n=r(3349)},7790:function(){}},r={};function o(t){var n=r[t];if(void 0!==n)return n.exports;var i=r[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t};var a=o(1964);t.exports=a}()}}]);