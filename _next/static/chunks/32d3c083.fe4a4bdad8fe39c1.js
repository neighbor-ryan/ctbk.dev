"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[230],{6531:function(t,e,i){var r=i(80897),n=i(2740),a=i(37862),o=i(95675),s=i(62482),l=s.strTranslate,c=i(50651),d=i(80934),f=i(66373),u=i(5935),h=i(86682),p=i(8633),k=i(3530),v=k.ONEMAXYEAR,g=k.ONEAVGYEAR,m=k.ONEMINYEAR,_=k.ONEMAXQUARTER,x=k.ONEAVGQUARTER,y=k.ONEMINQUARTER,b=k.ONEMAXMONTH,M=k.ONEAVGMONTH,w=k.ONEMINMONTH,A=k.ONEWEEK,T=k.ONEDAY,L=T/2,S=k.ONEHOUR,O=k.ONEMIN,I=k.ONESEC,F=k.ONEMILLI,D=k.ONEMICROSEC,N=k.MINUS_SIGN,z=k.BADNUM,E={K:"zeroline"},P={K:"gridline",L:"path"},C={K:"minor-gridline",L:"path"},R={K:"tick",L:"path"},B={K:"tick",L:"text"},U={width:["x","r","l","xl","xr"],height:["y","t","b","yt","yb"],right:["r","xr"],left:["l","xl"],top:["t","yt"],bottom:["b","yb"]},H=i(43376),G=H.MID_SHIFT,K=H.CAP_SHIFT,j=H.LINE_SPACING,V=H.OPPOSITE_SIDE,W=t.exports={};W.setConvert=i(63135);var X=i(17669),Y=i(32975),Z=Y.idSort,q=Y.isLinked;W.id2name=Y.id2name,W.name2id=Y.name2id,W.cleanId=Y.cleanId,W.list=Y.list,W.listIds=Y.listIds,W.getFromId=Y.getFromId,W.getFromTrace=Y.getFromTrace;var Q=i(55493);function $(t){var e=(t[1]-t[0])*1e-4;return[t[0]-e,t[1]+e]}W.getAutoRange=Q.getAutoRange,W.findExtremes=Q.findExtremes,W.coerceRef=function(t,e,i,r,n,a){var o=r.charAt(r.length-1),l=i._fullLayout._subplots[o+"axis"],c=r+"ref",d={};return n||(n=l[0]||("string"==typeof a?a:a[0])),a||(a=n),l=l.concat(l.map(function(t){return t+" domain"})),d[c]={valType:"enumerated",values:l.concat(a?"string"==typeof a?[a]:a:[]),dflt:n},s.coerce(t,e,d,c)},W.getRefType=function(t){return void 0===t?t:"paper"===t?"paper":"pixel"===t?"pixel":/( domain)$/.test(t)?"domain":"range"},W.coercePosition=function(t,e,i,r,n,a){var o,l;if("range"!==W.getRefType(r))o=s.ensureNumber,l=i(n,a);else{var c=W.getFromId(e,r);l=i(n,a=c.fraction2r(a)),o=c.cleanPos}t[n]=o(l)},W.cleanPosition=function(t,e,i){return("paper"===i||"pixel"===i?s.ensureNumber:W.getFromId(e,i).cleanPos)(t)},W.redrawComponents=function(t,e){e=e||W.listIds(t);var i=t._fullLayout;function r(r,n,a,s){for(var l=o.getComponentMethod(r,n),c={},d=0;d<e.length;d++)for(var f=i[W.id2name(e[d])][a],u=0;u<f.length;u++){var h=f[u];if(!c[h]&&(l(t,h),c[h]=1,s))return}}r("annotations","drawOne","_annIndices"),r("shapes","drawOne","_shapeIndices"),r("images","draw","_imgIndices",!0),r("selections","drawOne","_selectionIndices")};var J=W.getDataConversions=function(t,e,i,r){var n,a="x"===i||"y"===i||"z"===i?i:r;if(s.isArrayOrTypedArray(a)){if(n={type:X(r,void 0,{autotypenumbers:t._fullLayout.autotypenumbers}),_categories:[]},W.setConvert(n),"category"===n.type)for(var o=0;o<r.length;o++)n.d2c(r[o])}else n=W.getFromTrace(t,e,a);return n?{d2c:n.d2c,c2d:n.c2d}:"ids"===a?{d2c:te,c2d:te}:{d2c:tt,c2d:tt}};function tt(t){return+t}function te(t){return String(t)}function ti(t,e){return .001>Math.abs((t/e+.5)%1-.5)}function tr(t,e){return .001>Math.abs(t/e-1)}function tn(t){return+t.substring(1)}function ta(t,e){return t.rangebreaks&&(e=e.filter(function(e){return t.maskBreaks(e.x)!==z})),e}function to(t,e){var i=$(s.simpleMap(t.range,t.r2l)),r=Math.min(i[0],i[1]),n=Math.max(i[0],i[1]),a="category"===t.type?t.d2l_noadd:t.d2l;"log"===t.type&&"L"!==String(t.dtick).charAt(0)&&(t.dtick="L"+Math.pow(10,Math.floor(Math.min(t.range[0],t.range[1]))-1));for(var o=[],l=0;l<=1;l++)if((void 0===e||(!e||!l)&&(!1!==e||l))&&(!l||t.minor)){var c=l?t.minor.tickvals:t.tickvals,d=l?[]:t.ticktext;if(c){s.isArrayOrTypedArray(d)||(d=[]);for(var f=0;f<c.length;f++){var u=a(c[f]);if(u>r&&u<n){var h=W.tickText(t,u,!1,String(d[f]));l&&(h.minor=!0,h.text=""),o.push(h)}}}}return ta(t,o)}W.getDataToCoordFunc=function(t,e,i,r){return J(t,e,i,r).d2c},W.counterLetter=function(t){var e=t.charAt(0);return"x"===e?"y":"y"===e?"x":void 0},W.minDtick=function(t,e,i,r){-1===["log","category","multicategory"].indexOf(t.type)&&r?void 0===t._minDtick?(t._minDtick=e,t._forceTick0=i):t._minDtick&&((t._minDtick/e+1e-6)%1<2e-6&&((i-t._forceTick0)/e%1+1.000001)%1<2e-6?(t._minDtick=e,t._forceTick0=i):((e/t._minDtick+1e-6)%1>2e-6||((i-t._forceTick0)/t._minDtick%1+1.000001)%1>2e-6)&&(t._minDtick=0)):t._minDtick=0},W.saveRangeInitial=function(t,e){for(var i=W.list(t,"",!0),r=!1,n=0;n<i.length;n++){var a=i[n],o=void 0===a._rangeInitial0&&void 0===a._rangeInitial1,s=o||a.range[0]!==a._rangeInitial0||a.range[1]!==a._rangeInitial1,l=a.autorange;(o&&!0!==l||e&&s)&&(a._rangeInitial0="min"===l||"max reversed"===l?void 0:a.range[0],a._rangeInitial1="max"===l||"min reversed"===l?void 0:a.range[1],a._autorangeInitial=l,r=!0)}return r},W.saveShowSpikeInitial=function(t,e){for(var i=W.list(t,"",!0),r=!1,n="on",a=0;a<i.length;a++){var o=i[a],s=void 0===o._showSpikeInitial,l=s||o.showspikes!==o._showspikes;(s||e&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==n||o.showspikes||(n="off")}return t._fullLayout._cartesianSpikesEnabled=n,r},W.autoBin=function(t,e,i,r,a,o){var l,c,d,f,u=s.aggNums(Math.min,null,t),h=s.aggNums(Math.max,null,t);if("category"===e.type||"multicategory"===e.type)return{start:u-.5,end:h+.5,size:Math.max(1,Math.round(o)||1),_dataSpan:h-u};if(a||(a=e.calendar),l="log"===e.type?{type:"linear",range:[u,h]}:{type:e.type,range:s.simpleMap([u,h],e.c2r,0,a),calendar:a},W.setConvert(l),o=o&&p.dtick(o,l.type))l.dtick=o,l.tick0=p.tick0(void 0,l.type,a);else{if(i)c=(h-u)/i;else{var k=s.distinctVals(t),v=Math.pow(10,Math.floor(Math.log(k.minDiff)/Math.LN10));n(c=Math.max(v*s.roundUp(k.minDiff/v,[.9,1.9,4.9,9.9],!0),2*s.stdev(t)/Math.pow(t.length,r?.25:.4)))||(c=1)}W.autoTicks(l,c)}var g=l.dtick,m=W.tickIncrement(W.tickFirst(l),g,"reverse",a);if("number"==typeof g)m=function(t,e,i,r,a){var o=0,s=0,l=0,c=0;function d(e){return(1+(e-t)*100/i.dtick)%100<2}for(var f=0;f<e.length;f++)e[f]%1==0?l++:!n(e[f])&&c++,d(e[f])&&o++,d(e[f]+i.dtick/2)&&s++;var u=e.length-c;if(l===u&&"date"!==i.type)i.dtick<1?t=r-.5*i.dtick:(t-=.5)+i.dtick<r&&(t+=i.dtick);else if(s<.1*u&&(o>.3*u||d(r)||d(a))){var h=i.dtick/2;t+=t+h<r?h:-h}return t}(m,t,l,u,h),f=1+Math.floor((h-m)/g),d=m+f*g;else for("M"===l.dtick.charAt(0)&&(m=function(t,e,i,r,n){var a=s.findExactDates(e,n);if(a.exactDays>.8){var o=Number(i.substr(1));a.exactYears>.8&&o%12==0?t=W.tickIncrement(t,"M6","reverse")+1.5*T:a.exactMonths>.8?t=W.tickIncrement(t,"M1","reverse")+15.5*T:t-=L;var l=W.tickIncrement(t,i);if(l<=r)return l}return t}(m,t,g,u,a)),d=m,f=0;d<=h;)d=W.tickIncrement(d,g,!1,a),f++;return{start:e.c2r(m,0,a),end:e.c2r(d,0,a),size:g,_dataSpan:h-u}},W.prepMinorTicks=function(t,e,i){if(!e.minor.dtick){delete t.dtick;var r,a=e.dtick&&n(e._tmin);if(a){var o=W.tickIncrement(e._tmin,e.dtick,!0);r=[e._tmin,.99*o+.01*e._tmin]}else{var l=s.simpleMap(e.range,e.r2l);r=[l[0],.8*l[0]+.2*l[1]]}if(t.range=s.simpleMap(r,e.l2r),t._isMinor=!0,W.prepTicks(t,i),a){var c=n(e.dtick),d=n(t.dtick),f=c?e.dtick:+e.dtick.substring(1),u=d?t.dtick:+t.dtick.substring(1);c&&d?ti(f,u)?f===2*A&&u===2*T&&(t.dtick=A):f===2*A&&u===3*T?t.dtick=A:f!==A||(e._input.minor||{}).nticks?tr(f/u,2.5)?t.dtick=f/2:t.dtick=f:t.dtick=T:"M"===String(e.dtick).charAt(0)?d?t.dtick="M1":ti(f,u)?f>=12&&2===u&&(t.dtick="M3"):t.dtick=e.dtick:"L"===String(t.dtick).charAt(0)?"L"===String(e.dtick).charAt(0)?ti(f,u)||(t.dtick=tr(f/u,2.5)?e.dtick/2:e.dtick):t.dtick="D1":"D2"===t.dtick&&+e.dtick>1&&(t.dtick=1)}t.range=e.range}void 0===e.minor._tick0Init&&(t.tick0=e.tick0)},W.prepTicks=function(t,e){var i=s.simpleMap(t.range,t.r2l,void 0,void 0,e);if("auto"===t.tickmode||!t.dtick){var r,a=t.nticks;a||("category"===t.type||"multicategory"===t.type?(r=t.tickfont?s.bigFont(t.tickfont.size||12):15,a=t._length/r):(r="y"===t._id.charAt(0)?40:80,a=s.constrain(t._length/r,4,9)+1),"radialaxis"!==t._name||(a*=2)),t.minor&&"array"!==t.minor.tickmode||"array"!==t.tickmode||(a*=100),t._roughDTick=Math.abs(i[1]-i[0])/a,W.autoTicks(t,t._roughDTick),t._minDtick>0&&t.dtick<2*t._minDtick&&(t.dtick=t._minDtick,t.tick0=t.l2r(t._forceTick0))}"period"===t.ticklabelmode&&function(t){function e(){return!(n(t.dtick)||"M"!==t.dtick.charAt(0))}var i,r=e(),a=W.getTickFormat(t);if(a){var o=t._dtickInit!==t.dtick;!/%[fLQsSMX]/.test(a)&&(/%[HI]/.test(a)?(i=S,o&&!r&&t.dtick<S&&(t.dtick=S)):/%p/.test(a)?(i=L,o&&!r&&t.dtick<L&&(t.dtick=L)):/%[Aadejuwx]/.test(a)?(i=T,o&&!r&&t.dtick<T&&(t.dtick=T)):/%[UVW]/.test(a)?(i=A,o&&!r&&t.dtick<A&&(t.dtick=A)):/%[Bbm]/.test(a)?(i=M,o&&(r?1>tn(t.dtick):t.dtick<w)&&(t.dtick="M1")):/%[q]/.test(a)?(i=x,o&&(r?3>tn(t.dtick):t.dtick<y)&&(t.dtick="M3")):/%[Yy]/.test(a)&&(i=g,o&&(r?12>tn(t.dtick):t.dtick<m)&&(t.dtick="M12")))}(r=e())&&t.tick0===t._dowTick0&&(t.tick0=t._rawTick0),t._definedDelta=i}(t),t.tick0||(t.tick0="date"===t.type?"2000-01-01":0),"date"===t.type&&t.dtick<.1&&(t.dtick=.1),tk(t)},W.calcTicks=function(t,e){for(var i,r,a,o,l,c=t.type,d=t.calendar,f=t.ticklabelstep,u="period"===t.ticklabelmode,h=t.range[0]>t.range[1],p=!t.ticklabelindex||s.isArrayOrTypedArray(t.ticklabelindex)?t.ticklabelindex:[t.ticklabelindex],k=s.simpleMap(t.range,t.r2l,void 0,void 0,e),N=k[1]<k[0],E=Math.min(k[0],k[1]),P=Math.max(k[0],k[1]),C=Math.max(1e3,t._length||0),R=[],B=[],U=[],H=[],G=[],K=t.minor&&(t.minor.ticks||t.minor.showgrid),j=1;j>=(K?0:1);j--){var V,X,Y=!j;j?(t._dtickInit=t.dtick,t._tick0Init=t.tick0):(t.minor._dtickInit=t.minor.dtick,t.minor._tick0Init=t.minor.tick0);var Z=j?t:s.extendFlat({},t,t.minor);if(Y?W.prepMinorTicks(Z,t,e):W.prepTicks(Z,e),"array"===Z.tickmode){j?(U=[],R=to(t,!Y)):(H=[],B=to(t,!Y));continue}if("sync"===Z.tickmode){U=[],R=function(t){var e=t._mainAxis,i=[];if(e._vals){for(var r=0;r<e._vals.length;r++)if(!e._vals[r].noTick){var n=e.l2p(e._vals[r].x),a=t.p2l(n),o=W.tickText(t,a);e._vals[r].minor&&(o.minor=!0,o.text=""),i.push(o)}}return ta(t,i)}(t);continue}var q=$(k),Q=q[0],J=q[1],tt=n(Z.dtick),te="log"===c&&!(tt||"L"===Z.dtick.charAt(0)),ti=W.tickFirst(Z,e);if(j){if(t._tmin=ti,ti<Q!==N)break;("category"===c||"multicategory"===c)&&(J=N?Math.max(-.5,J):Math.min(t._categories.length-.5,J))}var tr=null,tn=ti;j&&(tt?X=t.dtick:"date"===c?"string"==typeof t.dtick&&"M"===t.dtick.charAt(0)&&(X=M*t.dtick.substring(1)):X=t._roughDTick,V=Math.round((t.r2l(tn)-t.r2l(t.tick0))/X)-1);var ts=Z.dtick;for(Z.rangebreaks&&Z._tick0Init!==Z.tick0&&(tn=tD(tn,t),N||(tn=W.tickIncrement(tn,ts,!N,d))),j&&u&&(tn=W.tickIncrement(tn,ts,!N,d),V--);N?tn>=J:tn<=J;tn=W.tickIncrement(tn,ts,N,d)){if(j&&V++,Z.rangebreaks&&!N){if(tn<Q)continue;if(Z.maskBreaks(tn)===z&&tD(tn,Z)>=P)break}if(U.length>C||tn===tr)break;tr=tn;var tl={value:tn};j?(te&&tn!==(0|tn)&&(tl.simpleLabel=!0),f>1&&V%f&&(tl.skipLabel=!0),U.push(tl)):(tl.minor=!0,H.push(tl))}}if(!H||H.length<2?p=!1:(i=(H[1].value-H[0].value)*(h?-1:1),r=t.tickformat,(/%f/.test(r)?i>=D:/%L/.test(r)?i>=F:/%[SX]/.test(r)?i>=I:/%M/.test(r)?i>=O:/%[HI]/.test(r)?i>=S:/%p/.test(r)?i>=L:/%[Aadejuwx]/.test(r)?i>=T:/%[UVW]/.test(r)?i>=A:/%[Bbm]/.test(r)?i>=w:/%[q]/.test(r)?i>=y:!/%[Yy]/.test(r)||i>=m)||(p=!1)),p){var tc=U.concat(H);u&&U.length&&(tc=tc.slice(1)),(tc=tc.sort(function(t,e){return t.value-e.value}).filter(function(t,e,i){return 0===e||t.value!==i[e-1].value})).map(function(t,e){return void 0!==t.minor||t.skipLabel?null:e}).filter(function(t){return null!==t}).forEach(function(t){p.map(function(e){var i=t+e;i>=0&&i<tc.length&&s.pushUnique(G,tc[i])})})}else G=U;if(K&&!("inside"===t.minor.ticks&&"outside"===t.ticks||"outside"===t.minor.ticks&&"inside"===t.ticks)){for(var td=U.map(function(t){return t.value}),tf=[],tu=0;tu<H.length;tu++){var th=H[tu],tp=th.value;if(-1===td.indexOf(tp)){for(var tk=!1,tv=0;!tk&&tv<U.length;tv++)1e7+U[tv].value===1e7+tp&&(tk=!0);tk||tf.push(th)}}H=tf}if(u&&function(t,e,i){for(var r=0;r<t.length;r++){var n,a=t[r].value,o=r,s=r+1;r<t.length-1?(o=r,s=r+1):(o=r>0?r-1:r,s=r);var l=t[o].value,c=Math.abs(t[s].value-l),d=i||c,f=0;d>=m?f=c>=m&&c<=v?c:g:i===x&&d>=y?f=c>=y&&c<=_?c:x:d>=w?f=c>=w&&c<=b?c:M:i===A&&d>=A?f=A:d>=T?f=T:i===L&&d>=L?f=L:i===S&&d>=S&&(f=S),f>=c&&(f=c,n=!0);var u=a+f;if(e.rangebreaks&&f>0){for(var h=0,p=0;p<84;p++){var k=(p+.5)/84;e.maskBreaks(a*(1-k)+k*u)!==z&&h++}(f*=h/84)||(t[r].drop=!0),n&&c>A&&(f=c)}(f>0||0===r)&&(t[r].periodX=a+f/2)}}(G,t,t._definedDelta),t.rangebreaks){var tg="y"===t._id.charAt(0),tm=1;"auto"===t.tickmode&&(tm=t.tickfont?t.tickfont.size:12);var t_=NaN;for(a=U.length-1;a>-1;a--){if(U[a].drop){U.splice(a,1);continue}U[a].value=tD(U[a].value,t);var tx=t.c2p(U[a].value);(tg?t_>tx-tm:t_<tx+tm)?U.splice(N?a+1:a,1):t_=tx}}tF(t)&&360===Math.abs(k[1]-k[0])&&U.pop(),t._tmax=(U[U.length-1]||{}).value,t._prevDateHead="",t._inCalcTicks=!0;var ty=function(e){e.text="",t._prevDateHead=o};function tb(t,e){var i=W.tickText(t,e.value,!1,e.simpleLabel),r=e.periodX;return void 0!==r&&(i.periodX=r,(r>P||r<E)&&(r>P&&(i.periodX=P),r<E&&(i.periodX=E),ty(i))),i}for(a=0,U=U.concat(H);a<U.length;a++){var tM=U[a].minor,tw=U[a].value;tM?((l=p&&-1!==G.indexOf(U[a])?tb(t,U[a]):{x:tw}).minor=!0,B.push(l)):(o=t._prevDateHead,l=tb(t,U[a]),(U[a].skipLabel||p&&-1===G.indexOf(U[a]))&&ty(l),R.push(l))}return R=R.concat(B),t._inCalcTicks=!1,u&&R.length&&(R[0].noTick=!0),R};var ts=[2,5,10],tl=[1,2,3,6,12],tc=[1,2,5,10,15,30],td=[1,2,3,7,14],tf=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],tu=[-.301,0,.301,.699,1],th=[15,30,45,90,180];function tp(t,e,i){return e*s.roundUp(t/e,i)}function tk(t){var e=t.dtick;if(t._tickexponent=0,n(e)||"string"==typeof e||(e=1),("category"===t.type||"multicategory"===t.type)&&(t._tickround=null),"date"===t.type){var i=t.r2l(t.tick0),r=t.l2r(i).replace(/(^-|i)/g,""),a=r.length;if("M"===String(e).charAt(0))a>10||"01-01"!==r.substr(5)?t._tickround="d":t._tickround=+e.substr(1)%12==0?"y":"m";else if(e>=T&&a<=10||e>=15*T)t._tickround="d";else if(e>=O&&a<=16||e>=S)t._tickround="M";else if(e>=I&&a<=19||e>=O)t._tickround="S";else{var o=t.l2r(i+e).replace(/^-/,"").length;t._tickround=Math.max(a,o)-20,t._tickround<0&&(t._tickround=4)}}else if(n(e)||"L"===e.charAt(0)){var s=t.range.map(t.r2d||Number);n(e)||(e=Number(e.substr(1))),t._tickround=2-Math.floor(Math.log(e)/Math.LN10+.01);var l=Math.floor(Math.log(Math.max(Math.abs(s[0]),Math.abs(s[1])))/Math.LN10+.01);Math.abs(l)>(void 0===t.minexponent?3:t.minexponent)&&(tm(t.exponentformat)&&!t_(l)?t._tickexponent=3*Math.round((l-1)/3):t._tickexponent=l)}else t._tickround=null}function tv(t,e,i){var r=t.tickfont||{};return{x:e,dx:0,dy:0,text:i||"",fontSize:r.size,font:r.family,fontWeight:r.weight,fontStyle:r.style,fontVariant:r.variant,fontTextcase:r.textcase,fontLineposition:r.lineposition,fontShadow:r.shadow,fontColor:r.color}}W.autoTicks=function(t,e,i){var r;function a(t){return Math.pow(t,Math.floor(Math.log(e)/Math.LN10))}if("date"===t.type){t.tick0=s.dateTick0(t.calendar,0);var o=2*e;if(o>g)e/=g,r=a(10),t.dtick="M"+12*tp(e,r,ts);else if(o>M)e/=M,t.dtick="M"+tp(e,1,tl);else if(o>T){if(t.dtick=tp(e,T,t._hasDayOfWeekBreaks?[1,2,7,14]:td),!i){var l=W.getTickFormat(t),c="period"===t.ticklabelmode;c&&(t._rawTick0=t.tick0),/%[uVW]/.test(l)?t.tick0=s.dateTick0(t.calendar,2):t.tick0=s.dateTick0(t.calendar,1),c&&(t._dowTick0=t.tick0)}}else o>S?t.dtick=tp(e,S,tl):o>O?t.dtick=tp(e,O,tc):o>I?t.dtick=tp(e,I,tc):(r=a(10),t.dtick=tp(e,r,ts))}else if("log"===t.type){t.tick0=0;var d=s.simpleMap(t.range,t.r2l);if(t._isMinor&&(e*=1.5),e>.7)t.dtick=Math.ceil(e);else if(1>Math.abs(d[1]-d[0])){var f=1.5*Math.abs((d[1]-d[0])/e);e=Math.abs(Math.pow(10,d[1])-Math.pow(10,d[0]))/f,r=a(10),t.dtick="L"+tp(e,r,ts)}else t.dtick=e>.3?"D2":"D1"}else"category"===t.type||"multicategory"===t.type?(t.tick0=0,t.dtick=Math.ceil(Math.max(e,1))):tF(t)?(t.tick0=0,r=1,t.dtick=tp(e,r,th)):(t.tick0=0,r=a(10),t.dtick=tp(e,r,ts));if(0===t.dtick&&(t.dtick=1),!n(t.dtick)&&"string"!=typeof t.dtick){var u=t.dtick;throw t.dtick=1,"ax.dtick error: "+String(u)}},W.tickIncrement=function(t,e,i,a){var o=i?-1:1;if(n(e))return s.increment(t,o*e);var l=e.charAt(0),c=o*Number(e.substr(1));if("M"===l)return s.incrementMonth(t,c,a);if("L"===l)return Math.log(Math.pow(10,t)+c)/Math.LN10;if("D"===l){var d="D2"===e?tu:tf,f=t+.01*o,u=s.roundUp(s.mod(f,1),d,i);return Math.floor(f)+Math.log(r.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(e)},W.tickFirst=function(t,e){var i=t.r2l||Number,a=s.simpleMap(t.range,i,void 0,void 0,e),o=a[1]<a[0],l=o?Math.floor:Math.ceil,c=$(a)[0],d=t.dtick,f=i(t.tick0);if(n(d)){var u=l((c-f)/d)*d+f;return("category"===t.type||"multicategory"===t.type)&&(u=s.constrain(u,0,t._categories.length-1)),u}var h=d.charAt(0),p=Number(d.substr(1));if("M"===h){for(var k,v,g,m=0,_=f;m<10;){if(((k=W.tickIncrement(_,d,o,t.calendar))-c)*(_-c)<=0){if(o)return Math.min(_,k);return Math.max(_,k)}g=h+(Math.abs(Math.round(v=(c-(_+k)/2)/(k-_)))||1)*p,_=W.tickIncrement(_,g,v<0?!o:o,t.calendar),m++}return s.error("tickFirst did not converge",t),_}if("L"===h)return Math.log(l((Math.pow(10,c)-f)/p)*p+f)/Math.LN10;if("D"===h){var x="D2"===d?tu:tf,y=s.roundUp(s.mod(c,1),x,o);return Math.floor(c)+Math.log(r.round(Math.pow(10,y),1))/Math.LN10}throw"unrecognized dtick "+String(d)},W.tickText=function(t,e,i,r){var a,o,l,c,d,f,u,h=tv(t,e),p="array"===t.tickmode,k=i||p,v=t.type,g="category"===v?t.d2l_noadd:t.d2l,m=function(e){var i=t.l2p(e);return i>=0&&i<=t._length?e:null};if(p&&s.isArrayOrTypedArray(t.ticktext)){var _=s.simpleMap(t.range,t.r2l),x=(Math.abs(_[1]-_[0])-(t._lBreaks||0))/1e4;for(u=0;u<t.ticktext.length&&!(Math.abs(e-g(t.tickvals[u]))<x);u++);if(u<t.ticktext.length)return h.text=String(t.ticktext[u]),h.xbnd=[m(h.x-.5),m(h.x+t.dtick-.5)],h}function y(r){if(void 0===r)return!0;if(i)return"none"===r;var n={first:t._tmin,last:t._tmax}[r];return"all"!==r&&e!==n}var b=i?"never":"none"!==t.exponentformat&&y(t.showexponent)?"hide":"";if("date"===v?function(t,e,i,r){var a,o=t._tickround,l=i&&t.hoverformat||W.getTickFormat(t);(r=!l&&r)&&(o=n(o)?4:({y:"m",m:"d",d:"M",M:"S",S:4})[o]);var c=s.formatDate(e.x,l,o,t._dateFormat,t.calendar,t._extraFormat),d=c.indexOf("\n");if(-1!==d&&(a=c.substr(d+1),c=c.substr(0,d)),r&&(void 0!==a&&("00:00:00"===c||"00:00"===c)?(c=a,a=""):8===c.length&&(c=c.replace(/:00$/,""))),a){if(i)"d"===o?c+=", "+a:c=a+(c?", "+c:"");else if(t._inCalcTicks&&t._prevDateHead===a){var f=tN(t),u=t._trueSide||t.side;(!f&&"top"===u||f&&"bottom"===u)&&(c+="<br> ")}else t._prevDateHead=a,c+="<br>"+a}e.text=c}(t,h,i,k):"log"===v?function(t,e,i,r,a){var o=t.dtick,l=e.x,c=t.tickformat,d="string"==typeof o&&o.charAt(0);if("never"===a&&(a=""),r&&"L"!==d&&(o="L3",d="L"),c||"L"===d)e.text=tx(Math.pow(10,l),t,a,r);else if(n(o)||"D"===d&&.1>s.mod(l+.01,1)){var f=Math.round(l),u=Math.abs(f),h=t.exponentformat;"power"===h||tm(h)&&t_(f)?(0===f?e.text=1:1===f?e.text="10":e.text="10<sup>"+(f>1?"":N)+u+"</sup>",e.fontSize*=1.25):("e"===h||"E"===h)&&u>2?e.text="1"+h+(f>0?"+":N)+u:(e.text=tx(Math.pow(10,l),t,"","fakehover"),"D1"===o&&"y"===t._id.charAt(0)&&(e.dy-=e.fontSize/6))}else if("D"===d)e.text=String(Math.round(Math.pow(10,s.mod(l,1)))),e.fontSize*=.75;else throw"unrecognized dtick "+String(o);if("D1"===t.dtick){var p=String(e.text).charAt(0);("0"===p||"1"===p)&&("y"===t._id.charAt(0)?e.dx-=e.fontSize/4:(e.dy+=e.fontSize/2,e.dx+=(t.range[1]>t.range[0]?1:-1)*e.fontSize*(l<0?.5:.25)))}}(t,h,0,k,b):"category"===v?(void 0===(a=t._categories[Math.round(h.x)])&&(a=""),h.text=String(a)):"multicategory"===v?(o=Math.round(h.x),c=void 0===(l=t._categories[o]||[])[1]?"":String(l[1]),d=void 0===l[0]?"":String(l[0]),i?h.text=d+" - "+c:(h.text=c,h.text2=d)):tF(t)?function(t,e,i,r,n){if("radians"!==t.thetaunit||i)e.text=tx(e.x,t,n,r);else{var a=e.x/180;if(0===a)e.text="0";else{var o=function(t){function e(t,e){return 1e-6>=Math.abs(t-e)}var i=function(t){for(var i=1;!e(Math.round(t*i)/i,t);)i*=10;return i}(t),r=t*i,n=Math.abs(function t(i,r){return e(r,0)?i:t(r,i%r)}(r,i));return[Math.round(r/n),Math.round(i/n)]}(a);if(o[1]>=100)e.text=tx(s.deg2rad(e.x),t,n,r);else{var l=e.x<0;1===o[1]?1===o[0]?e.text="π":e.text=o[0]+"π":e.text=["<sup>",o[0],"</sup>","⁄","<sub>",o[1],"</sub>","π"].join(""),l&&(e.text=N+e.text)}}}}(t,h,i,k,b):("never"===(f=b)?f="":"all"===t.showexponent&&1e-6>Math.abs(h.x/t.dtick)&&(f="hide"),h.text=tx(h.x,t,f,k)),r||(t.tickprefix&&!y(t.showtickprefix)&&(h.text=t.tickprefix+h.text),!t.ticksuffix||y(t.showticksuffix)||(h.text+=t.ticksuffix)),t.labelalias&&t.labelalias.hasOwnProperty(h.text)){var M=t.labelalias[h.text];"string"==typeof M&&(h.text=M)}return("boundaries"===t.tickson||t.showdividers)&&(h.xbnd=[m(h.x-.5),m(h.x+t.dtick-.5)]),h},W.hoverLabelText=function(t,e,i){i&&(t=s.extendFlat({},t,{hoverformat:i}));var r=s.isArrayOrTypedArray(e)?e[0]:e,n=s.isArrayOrTypedArray(e)?e[1]:void 0;if(void 0!==n&&n!==r)return W.hoverLabelText(t,r,i)+" - "+W.hoverLabelText(t,n,i);var a="log"===t.type&&r<=0,o=W.tickText(t,t.c2l(a?-r:r),"hover").text;return a?0===r?"0":N+o:o};var tg=["f","p","n","μ","m","","k","M","G","T"];function tm(t){return"SI"===t||"B"===t}function t_(t){return t>14||t<-15}function tx(t,e,i,r){var a,o=t<0,l=e._tickround,c=i||e.exponentformat||"B",d=e._tickexponent,f=W.getTickFormat(e),u=e.separatethousands;if(r){var h={exponentformat:c,minexponent:e.minexponent,dtick:"none"===e.showexponent?e.dtick:n(t)&&Math.abs(t)||1,range:"none"===e.showexponent?e.range.map(e.r2d):[0,t||1]};tk(h),l=(Number(h._tickround)||0)+4,d=h._tickexponent,e.hoverformat&&(f=e.hoverformat)}if(f)return e._numFormat(f)(t).replace(/-/g,N);var p=Math.pow(10,-l)/2;if("none"===c&&(d=0),(t=Math.abs(t))<p)t="0",o=!1;else{if(t+=p,d&&(t*=Math.pow(10,-d),l+=d),0===l)t=String(Math.floor(t));else if(l<0){t=(t=String(Math.round(t))).substr(0,t.length+l);for(var k=l;k<0;k++)t+="0"}else{var v=(t=String(t)).indexOf(".")+1;v&&(t=t.substr(0,v+l).replace(/\.?0+$/,""))}t=s.numSeparate(t,e._separators,u)}return(d&&"hide"!==c&&(tm(c)&&t_(d)&&(c="power"),a=d<0?N+-d:"power"!==c?"+"+d:String(d),"e"===c||"E"===c?t+=c+a:"power"===c?t+="\xd710<sup>"+a+"</sup>":"B"===c&&9===d?t+="B":tm(c)&&(t+=tg[d/3+5])),o)?N+t:t}function ty(t,e){if(t){var i=Object.keys(U).reduce(function(t,i){return -1!==e.indexOf(i)&&U[i].forEach(function(e){t[e]=1}),t},{});Object.keys(t).forEach(function(e){i[e]||(1===e.length?t[e]=0:delete t[e])})}}function tb(t){return void 0!==t.periodX?t.periodX:t.x}function tM(t){return[t.text,t.x,t.axInfo,t.font,t.fontSize,t.fontColor].join("_")}function tw(t){var e=t.title.font.size,i=(t.title.text.match(c.BR_TAG_ALL)||[]).length;return t.title.hasOwnProperty("standoff")?e*(K+i*j):i?e*(i+1)*j:e}function tA(t,e){var i=t.l2p(e);return i>1&&i<t._length-1}function tT(t){var e=r.select(t),i=e.select(".text-math-group");return i.empty()?e.select("text"):i}function tL(t){return t._id+".automargin"}function tS(t){return tL(t)+".mirror"}function tO(t){return t._id+".rangeslider"}function tI(t,e){for(var i=0;i<e.length;i++)-1===t.indexOf(e[i])&&t.push(e[i])}function tF(t){return"angularaxis"===t._id}function tD(t,e){for(var i=e._rangebreaks.length,r=0;r<i;r++){var n=e._rangebreaks[r];if(t>=n.min&&t<n.max)return n.max}return t}function tN(t){return -1!==(t.ticklabelposition||"").indexOf("inside")}function tz(t,e){tN(t._anchorAxis||{})&&t._hideCounterAxisInsideTickLabels&&t._hideCounterAxisInsideTickLabels(e)}function tE(t,e,i,r){var n,a="free"!==t.anchor&&(void 0===t.overlaying||!1===t.overlaying)?t._id:t.overlaying;n=r?"right"===t.side?e:-e:e,a in i||(i[a]={}),t.side in i[a]||(i[a][t.side]=0),i[a][t.side]+=n}W.getTickFormat=function(t){var e,i,r;function n(t){return"string"!=typeof t?t:Number(t.replace("M",""))*M}function a(t,e){var i=["L","D"];if(typeof t!=typeof e)return"number"==typeof t?1:-1;if("number"==typeof t)return t-e;var r=i.indexOf(t.charAt(0)),n=i.indexOf(e.charAt(0));return r===n?Number(t.replace(/(L|D)/g,""))-Number(e.replace(/(L|D)/g,"")):r-n}if(t.tickformatstops&&t.tickformatstops.length>0)switch(t.type){case"date":case"linear":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&function(t,e,i){var r=i||function(t){return t},n=e[0],a=e[1];return(!n&&"number"!=typeof n||r(n)<=r(t))&&(!a&&"number"!=typeof a||r(a)>=r(t))}(t.dtick,r.dtickrange,n)){i=r;break}break;case"log":for(e=0;e<t.tickformatstops.length;e++)if((r=t.tickformatstops[e]).enabled&&function(t,e){var i=null===e[0],r=null===e[1],n=a(t,e[0])>=0,o=0>=a(t,e[1]);return(i||n)&&(r||o)}(t.dtick,r.dtickrange)){i=r;break}}return i?i.value:t.tickformat},W.getSubplots=function(t,e){var i=t._fullLayout._subplots,r=i.cartesian.concat(i.gl2d||[]),n=e?W.findSubplotsWithAxis(r,e):r;return n.sort(function(t,e){var i=t.substr(1).split("y"),r=e.substr(1).split("y");return i[0]===r[0]?+i[1]-+r[1]:+i[0]-+r[0]}),n},W.findSubplotsWithAxis=function(t,e){for(var i=new RegExp("x"===e._id.charAt(0)?"^"+e._id+"y":e._id+"$"),r=[],n=0;n<t.length;n++){var a=t[n];i.test(a)&&r.push(a)}return r},W.makeClipPaths=function(t){var e,i,n=t._fullLayout;if(!n._hasOnlyLargeSploms){var a={_offset:0,_length:n.width,_id:""},o={_offset:0,_length:n.height,_id:""},s=W.list(t,"x",!0),l=W.list(t,"y",!0),c=[];for(e=0;e<s.length;e++)for(c.push({x:s[e],y:o}),i=0;i<l.length;i++)0===e&&c.push({x:a,y:l[i]}),c.push({x:s[e],y:l[i]});var d=n._clips.selectAll(".axesclip").data(c,function(t){return t.x._id+t.y._id});d.enter().append("clipPath").classed("axesclip",!0).attr("id",function(t){return"clip"+n._uid+t.x._id+t.y._id}).append("rect"),d.exit().remove(),d.each(function(t){r.select(this).select("rect").attr({x:t.x._offset||0,y:t.y._offset||0,width:t.x._length||1,height:t.y._length||1})})}},W.draw=function(t,e,i){var r=t._fullLayout;"redraw"===e&&r._paper.selectAll("g.subplot").each(function(t){var e=t[0],i=r._plots[e];if(i){var n=i.xaxis,a=i.yaxis;i.xaxislayer.selectAll("."+n._id+"tick").remove(),i.yaxislayer.selectAll("."+a._id+"tick").remove(),i.xaxislayer.selectAll("."+n._id+"tick2").remove(),i.yaxislayer.selectAll("."+a._id+"tick2").remove(),i.xaxislayer.selectAll("."+n._id+"divider").remove(),i.yaxislayer.selectAll("."+a._id+"divider").remove(),i.minorGridlayer&&i.minorGridlayer.selectAll("path").remove(),i.gridlayer&&i.gridlayer.selectAll("path").remove(),i.zerolinelayer&&i.zerolinelayer.selectAll("path").remove(),r._infolayer.select(".g-"+n._id+"title").remove(),r._infolayer.select(".g-"+a._id+"title").remove()}});var n=e&&"redraw"!==e?e:W.listIds(t),a=W.list(t).filter(function(t){return t.autoshift}).map(function(t){return t.overlaying});n.map(function(e){var i=W.getFromId(t,e);if("sync"===i.tickmode&&i.overlaying){var r=n.findIndex(function(t){return t===i.overlaying});r>=0&&n.unshift(n.splice(r,1).shift())}});var o={false:{left:0,right:0}};return s.syncOrAsync(n.map(function(e){return function(){if(e){var r=W.getFromId(t,e);i||(i={}),i.axShifts=o,i.overlayingShiftedAx=a;var n=W.drawOne(t,r,i);return r._shiftPusher&&tE(r,r._fullDepth||0,o,!0),r._r=r.range.slice(),r._rl=s.simpleMap(r._r,r.r2l),n}}}))},W.drawOne=function(t,e,i){var r=(i=i||{}).axShifts||{},n=i.overlayingShiftedAx||[];e.setScale();var l=t._fullLayout,h=e._id,p=h.charAt(0),k=W.counterLetter(h),v=l._plots[e._mainSubplot];if(v){if(e._shiftPusher=e.autoshift||-1!==n.indexOf(e._id)||-1!==n.indexOf(e.overlaying),e._shiftPusher&"free"===e.anchor){var g=e.linewidth/2||0;"inside"===e.ticks&&(g+=e.ticklen),tE(e,g,r,!0),tE(e,e.shift||0,r,!1)}(!0!==i.skipTitle||void 0===e._shift)&&(e._shift=e.autoshift?r[e.overlaying][e.side]:e.shift||0);var m=v[p+"axislayer"],_=e._mainLinePosition,x=_+=e._shift,y=e._mainMirrorPosition,b=e._vals=W.calcTicks(e),M=[e.mirror,x,y].join("_");for(B=0;B<b.length;B++)b[B].axInfo=M;e._selections={},e._tickAngles&&(e._prevTickAngles=e._tickAngles),e._tickAngles={},e._depth=null;var w={};if(e.visible){var A=W.makeTransTickFn(e),T=W.makeTransTickLabelFn(e),L="inside"===e.ticks,S="outside"===e.ticks;if("boundaries"===e.tickson){var O=function(t,e){var i,r=[],n=function(t,e){var i=t.xbnd[e];null!==i&&r.push(s.extendFlat({},t,{x:i}))};if(e.length){for(i=0;i<e.length;i++)n(e[i],0);n(e[i-1],1)}return r}(0,b);Y=W.clipEnds(e,O),X=L?Y:O}else Y=W.clipEnds(e,b),X=L&&"period"!==e.ticklabelmode?Y:b;var I=e._gridVals=Y,F=function(t,e){var i,r,n=[],a=e.length&&e[e.length-1].x<e[0].x,o=function(t,e){var i=t.xbnd[e];null!==i&&n.push(s.extendFlat({},t,{x:i}))};if(t.showdividers&&e.length){for(i=0;i<e.length;i++){var l=e[i];l.text2!==r&&o(l,a?1:0),r=l.text2}o(e[i-1],a?0:1)}return n}(e,b);if(!l._hasOnlyLargeSploms){var D=e._subplotsWith,N={};for(B=0;B<D.length;B++){U=D[B];var z=(H=l._plots[U])[k+"axis"],E=z._mainAxis._id;if(!N[E]){N[E]=1;var P="x"===p?"M0,"+z._offset+"v"+z._length:"M"+z._offset+",0h"+z._length;W.drawGrid(t,e,{vals:I,counterAxis:z,layer:H.gridlayer.select("."+h),minorLayer:H.minorGridlayer.select("."+h),path:P,transFn:A}),W.drawZeroLine(t,e,{counterAxis:z,layer:H.zerolinelayer,path:P,transFn:A})}}}var C=W.getTickSigns(e),R=W.getTickSigns(e,"minor");if(e.ticks||e.minor&&e.minor.ticks){var B,U,H,X,Y,Z,q,Q,$,J,tt=W.makeTickPath(e,x,C[2]),te=W.makeTickPath(e,x,R[2],{minor:!0});if(e._anchorAxis&&e.mirror&&!0!==e.mirror?(q=W.makeTickPath(e,y,C[3]),Q=W.makeTickPath(e,y,R[3],{minor:!0}),$=tt+q,J=te+Q):(q="",Q="",$=tt,J=te),e.showdividers&&S&&"boundaries"===e.tickson){var ti={};for(B=0;B<F.length;B++)ti[F[B].x]=1;Z=function(t){return ti[t.x]?q:$}}else Z=function(t){return t.minor?J:$}}if(W.drawTicks(t,e,{vals:X,layer:m,path:Z,transFn:A}),"allticks"===e.mirror){var tr=Object.keys(e._linepositions||{});for(B=0;B<tr.length;B++){U=tr[B],H=l._plots[U];var tn=e._linepositions[U]||[],ta=tn[0],to=tn[1],ts=tn[2],tl=W.makeTickPath(e,ta,ts?C[0]:R[0],{minor:ts})+W.makeTickPath(e,to,ts?C[1]:R[1],{minor:ts});W.drawTicks(t,e,{vals:X,layer:H[p+"axislayer"],path:tl,transFn:A})}}var tc=[];if(tc.push(function(){return W.drawLabels(t,e,{vals:b,layer:m,plotinfo:H,transFn:T,labelFns:W.makeLabelFns(e,x)})}),"multicategory"===e.type){var td={x:2,y:10}[p];tc.push(function(){var i=tu()[({x:"height",y:"width"})[p]]+td+(e._tickAngles[h+"tick"]?e.tickfont.size*j:0);return W.drawLabels(t,e,{vals:function(t,e){for(var i=[],r={},n=0;n<e.length;n++){var a=e[n];r[a.text2]?r[a.text2].push(a.x):r[a.text2]=[a.x]}for(var o in r)i.push(tv(t,s.interp(r[o],.5),o));return i}(e,b),layer:m,cls:h+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:A,labelFns:W.makeLabelFns(e,x+i*C[4])})}),tc.push(function(){var i,r,n,a;return e._depth=C[4]*(tu("tick2")[e.side]-x),i={vals:F,layer:m,path:W.makeTickPath(e,x,C[4],{len:e._depth}),transFn:A},r=e._id+"divider",n=i.vals,void((a=i.layer.selectAll("path."+r).data(n,tM)).exit().remove(),a.enter().insert("path",":first-child").classed(r,1).classed("crisp",1).call(f.stroke,e.dividercolor).style("stroke-width",u.crispRound(t,e.dividerwidth,1)+"px"),a.attr("transform",i.transFn).attr("d",i.path))})}else e.title.hasOwnProperty("standoff")&&tc.push(function(){e._depth=C[4]*(tu()[e.side]-x)});var tf=o.getComponentMethod("rangeslider","isVisible")(e);return i.skipTitle||tf&&"bottom"===e.side||tc.push(function(){return function(t,e){var i,r,n,a,o,s=t._fullLayout,l=e._id,f=l.charAt(0),h=e.title.font.size,p=(e.title.text.match(c.BR_TAG_ALL)||[]).length;if(e.title.hasOwnProperty("standoff"))"bottom"===e.side||"right"===e.side?i=e._depth+e.title.standoff+h*K:("top"===e.side||"left"===e.side)&&(i=e._depth+e.title.standoff+h*(G+p*j));else{var k=tN(e);if("multicategory"===e.type)i=e._depth;else{var v=1.5*h;k&&(v=.5*h,"outside"===e.ticks&&(v+=e.ticklen)),i=10+v+(e.linewidth?e.linewidth-1:0)}k||("x"===f?i+="top"===e.side?h*(e.showticklabels?1:0):h*(e.showticklabels?1.5:.5):i+="right"===e.side?h*(e.showticklabels?1:.5):h*(e.showticklabels?.5:0))}var g=W.getPxPosition(t,e);if("x"===f?(n=e._offset+e._length/2,a="top"===e.side?g-i:g+i):(a=e._offset+e._length/2,n="right"===e.side?g+i:g-i,r={rotate:"-90",offset:0}),"multicategory"!==e.type){var m=e._selections[e._id+"tick"];if(o={selection:m,side:e.side},m&&m.node()&&m.node().parentNode){var _=u.getTranslate(m.node().parentNode);o.offsetLeft=_.x,o.offsetTop=_.y}e.title.hasOwnProperty("standoff")&&(o.pad=0)}return e._titleStandoff=i,d.draw(t,l+"title",{propContainer:e,propName:e._name+".title.text",placeholder:s._dfltTitle[f],avoid:o,transform:r,attributes:{x:n,y:a,"text-anchor":"middle"}})}(t,e)}),tc.push(function(){var i,r,n,s,c=e.side.charAt(0),d=V[e.side].charAt(0),f=W.getPxPosition(t,e),u=S?e.ticklen:0;(e.automargin||tf||e._shiftPusher)&&("multicategory"===e.type?i=tu("tick2"):(i=tu(),"x"===p&&"b"===c&&(e._depth=Math.max(i.width>0?i.bottom-f:0,u))));var h=0,v=0;if(e._shiftPusher&&(h=Math.max(u,i.height>0?"l"===c?f-i.left:i.right-f:0),e.title.text!==l._dfltTitle[p]&&(v=(e._titleStandoff||0)+(e._titleScoot||0),"l"===c&&(v+=tw(e))),e._fullDepth=Math.max(h,v)),e.automargin){r={x:0,y:0,r:0,l:0,t:0,b:0};var g=[0,1],m="number"==typeof e._shift?e._shift:0;if("x"===p){if("b"===c?r[c]=e._depth:(r[c]=e._depth=Math.max(i.width>0?f-i.top:0,u),g.reverse()),i.width>0){var _=i.right-(e._offset+e._length);_>0&&(r.xr=1,r.r=_);var x=e._offset-i.left;x>0&&(r.xl=0,r.l=x)}}else if("l"===c?(e._depth=Math.max(i.height>0?f-i.left:0,u),r[c]=e._depth-m):(e._depth=Math.max(i.height>0?i.right-f:0,u),r[c]=e._depth+m,g.reverse()),i.height>0){var y=i.bottom-(e._offset+e._length);y>0&&(r.yb=0,r.b=y);var b=e._offset-i.top;b>0&&(r.yt=1,r.t=b)}r[k]="free"===e.anchor?e.position:e._anchorAxis.domain[g[0]],e.title.text!==l._dfltTitle[p]&&(r[c]+=tw(e)+(e.title.standoff||0)),e.mirror&&"free"!==e.anchor&&((n={x:0,y:0,r:0,l:0,t:0,b:0})[d]=e.linewidth,e.mirror&&!0!==e.mirror&&(n[d]+=u),!0===e.mirror||"ticks"===e.mirror?n[k]=e._anchorAxis.domain[g[1]]:("all"===e.mirror||"allticks"===e.mirror)&&(n[k]=[e._counterDomainMin,e._counterDomainMax][g[1]]))}tf&&(s=o.getComponentMethod("rangeslider","autoMarginOpts")(t,e)),"string"==typeof e.automargin&&(ty(r,e.automargin),ty(n,e.automargin)),a.autoMargin(t,tL(e),r),a.autoMargin(t,tS(e),n),a.autoMargin(t,tO(e),s)}),s.syncOrAsync(tc)}}function tu(t){var i=h+(t||"tick");return w[i]||(w[i]=function(t,e,i){if(t._selections[e].size())r=1/0,n=-1/0,a=1/0,o=-1/0,t._selections[e].each(function(){var t=tT(this),e=u.bBox(t.node().parentNode);r=Math.min(r,e.top),n=Math.max(n,e.bottom),a=Math.min(a,e.left),o=Math.max(o,e.right)});else{var r,n,a,o,s=W.makeLabelFns(t,i);r=n=s.yFn({dx:0,dy:0,fontSize:0}),a=o=s.xFn({dx:0,dy:0,fontSize:0})}return{top:r,bottom:n,left:a,right:o,height:n-r,width:o-a}}(e,i,x)),w[i]}},W.getTickSigns=function(t,e){var i=t._id.charAt(0),r=t.side===({x:"top",y:"right"})[i]?1:-1,n=[-1,1,r,-r];return"inside"!==(e?(t.minor||{}).ticks:t.ticks)==("x"===i)&&(n=n.map(function(t){return-t})),t.side&&n.push({l:-1,t:-1,r:1,b:1}[t.side.charAt(0)]),n},W.makeTransTickFn=function(t){return"x"===t._id.charAt(0)?function(e){return l(t._offset+t.l2p(e.x),0)}:function(e){return l(0,t._offset+t.l2p(e.x))}},W.makeTransTickLabelFn=function(t){var e=function(t){var e=t.ticklabelposition||"",i=function(t){return -1!==e.indexOf(t)},r=i("top"),n=i("left"),a=i("right"),o=i("bottom"),s=i("inside"),l=o||n||r||a;if(!l&&!s)return[0,0];var c=t.side,d=l?(t.tickwidth||0)/2:0,f=3,u=t.tickfont?t.tickfont.size:12;return(o||r)&&(d+=u*K,f+=(t.linewidth||0)/2),(n||a)&&(d+=(t.linewidth||0)/2,f+=3),s&&"top"===c&&(f-=u*(1-K)),(n||r)&&(d=-d),("bottom"===c||"right"===c)&&(f=-f),[l?d:0,s?f:0]}(t),i=t.ticklabelshift||0,r=t.ticklabelstandoff||0,n=e[0],a=e[1],o=t.range[0]>t.range[1],s=t.ticklabelposition&&-1!==t.ticklabelposition.indexOf("inside");if(i&&(i*=o?-1:1),r){var c=t.side;r*=s&&("top"===c||"left"===c)||!s&&("bottom"===c||"right"===c)?1:-1}return"x"===t._id.charAt(0)?function(e){return l(n+t._offset+t.l2p(tb(e))+i,a+r)}:function(e){return l(a+r,n+t._offset+t.l2p(tb(e))+i)}},W.makeTickPath=function(t,e,i,r){r||(r={});var n=r.minor;if(n&&!t.minor)return"";var a=void 0!==r.len?r.len:n?t.minor.ticklen:t.ticklen,o=t._id.charAt(0),s=(t.linewidth||1)/2;return"x"===o?"M0,"+(e+s*i)+"v"+a*i:"M"+(e+s*i)+",0h"+a*i},W.makeLabelFns=function(t,e,i){var r,a,o,l,c,d=t.ticklabelposition||"",f=function(t){return -1!==d.indexOf(t)},u=f("top"),h=f("left"),p=f("right"),k=f("bottom")||h||u||p,v=f("inside"),g="inside"===d&&"inside"===t.ticks||!v&&"outside"===t.ticks&&"boundaries"!==t.tickson,m=0,_=0,x=g?t.ticklen:0;if(v?x*=-1:k&&(x=0),g&&(m+=x,i)){var y=s.deg2rad(i);m=x*Math.cos(y)+1,_=x*Math.sin(y)}t.showticklabels&&(g||t.showline)&&(m+=.2*t.tickfont.size);var b={labelStandoff:m+=(t.linewidth||1)/2*(v?-1:1),labelShift:_},M=0,w=t.side,A=t._id.charAt(0),T=t.tickangle;if("x"===A)l=(c=!v&&"bottom"===w||v&&"top"===w)?1:-1,v&&(l*=-1),r=_*l,a=e+m*l,o=c?1:-.2,90===Math.abs(T)&&(v?o+=G:o=-90===T&&"bottom"===w?K:90===T&&"top"===w?G:.5,M=G/2*(T/90)),b.xFn=function(t){return t.dx+r+M*t.fontSize},b.yFn=function(t){return t.dy+a+t.fontSize*o},b.anchorFn=function(t,e){if(k){if(h)return"end";if(p)return"start"}return n(e)&&0!==e&&180!==e?e*l<0!==v?"end":"start":"middle"},b.heightFn=function(e,i,r){return i<-60||i>60?-.5*r:"top"===t.side!==v?-r:0};else if("y"===A){if(l=(c=!v&&"left"===w||v&&"right"===w)?1:-1,v&&(l*=-1),r=m,a=_*l,o=0,v||90!==Math.abs(T)||(o=-90===T&&"left"===w||90===T&&"right"===w?K:.5),v){var L=n(T)?+T:0;0!==L&&(M=Math.abs(Math.sin(s.deg2rad(L)))*K*l,o=0)}b.xFn=function(t){return t.dx+e-(r+t.fontSize*o)*l+M*t.fontSize},b.yFn=function(t){return t.dy+a+t.fontSize*G},b.anchorFn=function(t,e){return n(e)&&90===Math.abs(e)?"middle":c?"end":"start"},b.heightFn=function(e,i,r){return"right"===t.side&&(i*=-1),i<-30?-r:i<30?-.5*r:0}}return b},W.drawTicks=function(t,e,i){i=i||{};var n=e._id+"tick",a=[].concat(e.minor&&e.minor.ticks?i.vals.filter(function(t){return t.minor&&!t.noTick}):[]).concat(e.ticks?i.vals.filter(function(t){return!t.minor&&!t.noTick}):[]),o=i.layer.selectAll("path."+n).data(a,tM);o.exit().remove(),o.enter().append("path").classed(n,1).classed("ticks",1).classed("crisp",!1!==i.crisp).each(function(t){return f.stroke(r.select(this),t.minor?e.minor.tickcolor:e.tickcolor)}).style("stroke-width",function(i){return u.crispRound(t,i.minor?e.minor.tickwidth:e.tickwidth,1)+"px"}).attr("d",i.path).style("display",null),tz(e,[R]),o.attr("transform",i.transFn)},W.drawGrid=function(t,e,i){if(i=i||{},"sync"!==e.tickmode){var n=e._id+"grid",a=e.minor&&e.minor.showgrid,o=a?i.vals.filter(function(t){return t.minor}):[],s=e.showgrid?i.vals.filter(function(t){return!t.minor}):[],l=i.counterAxis;if(l&&W.shouldShowZeroLine(t,e,l))for(var c="array"===e.tickmode,d=0;d<s.length;d++){var h=s[d].x;if(c?!h:Math.abs(h)<e.dtick/100){if(s=s.slice(0,d).concat(s.slice(d+1)),c)d--;else break}}e._gw=u.crispRound(t,e.gridwidth,1);for(var p=a?u.crispRound(t,e.minor.gridwidth,1):0,k=i.layer,v=i.minorLayer,g=1;g>=0;g--){var m=g?k:v;if(m){var _=m.selectAll("path."+n).data(g?s:o,tM);_.exit().remove(),_.enter().append("path").classed(n,1).classed("crisp",!1!==i.crisp),_.attr("transform",i.transFn).attr("d",i.path).each(function(t){return f.stroke(r.select(this),t.minor?e.minor.gridcolor:e.gridcolor||"#ddd")}).style("stroke-dasharray",function(t){return u.dashStyle(t.minor?e.minor.griddash:e.griddash,t.minor?e.minor.gridwidth:e.gridwidth)}).style("stroke-width",function(t){return(t.minor?p:e._gw)+"px"}).style("display",null),"function"==typeof i.path&&_.attr("d",i.path)}}tz(e,[P,C])}},W.drawZeroLine=function(t,e,i){i=i||i;var r=e._id+"zl",n=W.shouldShowZeroLine(t,e,i.counterAxis),a=i.layer.selectAll("path."+r).data(n?[{x:0,id:e._id}]:[]);a.exit().remove(),a.enter().append("path").classed(r,1).classed("zl",1).classed("crisp",!1!==i.crisp).each(function(){i.layer.selectAll("path").sort(function(t,e){return Z(t.id,e.id)})}),a.attr("transform",i.transFn).attr("d",i.path).call(f.stroke,e.zerolinecolor||f.defaultLine).style("stroke-width",u.crispRound(t,e.zerolinewidth,e._gw||1)+"px").style("display",null),tz(e,[E])},W.drawLabels=function(t,e,i){i=i||{};var a=t._fullLayout,o=e._id,d=i.cls||o+"tick",f=i.vals.filter(function(t){return t.text}),h=i.labelFns,p=i.secondary?0:e.tickangle,k=(e._prevTickAngles||{})[d],v=i.layer.selectAll("g."+d).data(e.showticklabels?f:[],tM),g=[];function m(t,a){t.each(function(t){var o=r.select(this),s=o.select(".text-math-group"),d=h.anchorFn(t,a),f=i.transFn.call(o.node(),t)+(n(a)&&0!=+a?" rotate("+a+","+h.xFn(t)+","+(h.yFn(t)-t.fontSize/2)+")":""),p=c.lineCount(o),k=j*t.fontSize,v=h.heightFn(t,n(a)?+a:0,(p-1)*k);if(v&&(f+=l(0,v)),s.empty()){var g=o.select("text");g.attr({transform:f,"text-anchor":d}),g.style("opacity",1),e._adjustTickLabelsOverflow&&e._adjustTickLabelsOverflow()}else{var m=u.bBox(s.node()).width;s.attr("transform",f+l(m*({end:-.5,start:.5})[d],0))}})}v.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(e){var i=r.select(this),n=t._promises.length;i.call(c.positionText,h.xFn(e),h.yFn(e)).call(u.font,{family:e.font,size:e.fontSize,color:e.fontColor,weight:e.fontWeight,style:e.fontStyle,variant:e.fontVariant,textcase:e.fontTextcase,lineposition:e.fontLineposition,shadow:e.fontShadow}).text(e.text).call(c.convertToTspans,t),t._promises[n]?g.push(t._promises.pop().then(function(){m(i,p)})):m(i,p)}),tz(e,[B]),v.exit().remove(),i.repositionOnUpdate&&v.each(function(t){r.select(this).select("text").call(c.positionText,h.xFn(t),h.yFn(t))}),e._adjustTickLabelsOverflow=function(){var i=e.ticklabeloverflow;if(i&&"allow"!==i){var n=-1!==i.indexOf("hide"),o="x"===e._id.charAt(0),l=0,c=o?t._fullLayout.width:t._fullLayout.height;if(-1!==i.indexOf("domain")){var d=s.simpleMap(e.range,e.r2l);l=e.l2p(d[0])+e._offset,c=e.l2p(d[1])+e._offset}var f=Math.min(l,c),h=Math.max(l,c),p=e.side,k=1/0,g=-1/0;for(var m in v.each(function(t){var i=r.select(this);if(i.select(".text-math-group").empty()){var a=u.bBox(i.node()),s=0;o?a.right>h?s=1:a.left<f&&(s=1):a.bottom>h?s=1:a.top+(e.tickangle?0:t.fontSize/4)<f&&(s=1);var l=i.select("text");s?n&&l.style("opacity",0):(l.style("opacity",1),k="bottom"===p||"right"===p?Math.min(k,o?a.top:a.left):-1/0,g="top"===p||"left"===p?Math.max(g,o?a.bottom:a.right):1/0)}}),a._plots){var _=a._plots[m];if(e._id===_.xaxis._id||e._id===_.yaxis._id){var x=o?_.yaxis:_.xaxis;x&&(x["_visibleLabelMin_"+e._id]=k,x["_visibleLabelMax_"+e._id]=g)}}}},e._hideCounterAxisInsideTickLabels=function(t){var i="x"===e._id.charAt(0),n=[];for(var o in a._plots){var s=a._plots[o];(e._id===s.xaxis._id||e._id===s.yaxis._id)&&n.push(i?s.yaxis:s.xaxis)}n.forEach(function(i,n){i&&tN(i)&&(t||[E,C,P,R,B]).forEach(function(t){var o="tick"===t.K&&"text"===t.L&&"period"===e.ticklabelmode,s=a._plots[e._mainSubplot];(t.K===E.K?s.zerolinelayer.selectAll("."+e._id+"zl"):t.K===C.K?s.minorGridlayer.selectAll("."+e._id):t.K===P.K?s.gridlayer.selectAll("."+e._id):s[e._id.charAt(0)+"axislayer"]).each(function(){var a=r.select(this);t.L&&(a=a.selectAll(t.L)),a.each(function(a){var s=e.l2p(o?tb(a):a.x)+e._offset,l=r.select(this);s<e["_visibleLabelMax_"+i._id]&&s>e["_visibleLabelMin_"+i._id]?l.style("display","none"):"tick"!==t.K||n||l.style("display",null)})})})})},m(v,k+1?k:p);var _=null;e._selections&&(e._selections[d]=v);var x=[function(){return g.length&&Promise.all(g)}];e.automargin&&a._redrawFromAutoMarginCount&&90===k?(_=k,x.push(function(){m(v,k)})):x.push(function(){if(m(v,p),f.length&&e.autotickangles&&("log"!==e.type||"D"!==String(e.dtick).charAt(0))){_=e.autotickangles[0];var t,r=0,n=[],a=1;v.each(function(t){r=Math.max(r,t.fontSize);var i=e.l2p(t.x),o=tT(this),s=u.bBox(o.node());a=Math.max(a,c.lineCount(o)),n.push({top:0,bottom:10,height:10,left:i-s.width/2,right:i+s.width/2+2,width:s.width+2})});var o=("boundaries"===e.tickson||e.showdividers)&&!i.secondary,l=f.length,d=Math.abs((f[l-1].x-f[0].x)*e._m)/(l-1),h=o?d/2:d,k=h/Math.sqrt(Math.pow(h,2)+Math.pow(o?e.ticklen:1.25*r*a,2)),g=e.autotickangles.map(function(t){return t*Math.PI/180}),x=g.find(function(t){return Math.abs(Math.cos(t))<=k});void 0===x&&(x=g.reduce(function(t,e){return Math.abs(Math.cos(t))<Math.abs(Math.cos(e))?t:e},g[0]));var y=180/Math.PI*x;if(o){var b=2;for(e.ticks&&(b+=e.tickwidth/2),t=0;t<n.length;t++){var M=f[t].xbnd,w=n[t];if(null!==M[0]&&w.left-e.l2p(M[0])<b||null!==M[1]&&e.l2p(M[1])-w.right<b){_=y;break}}}else{var A=e.ticklabelposition||"",T=function(t){return -1!==A.indexOf(t)},L=T("top"),S=T("left"),O=T("right"),I=T("bottom")||S||L||O?(e.tickwidth||0)+6:0;for(t=0;t<n.length-1;t++)if(s.bBoxIntersect(n[t],n[t+1],I)){_=y;break}}_&&m(v,_)}}),e._tickAngles&&x.push(function(){e._tickAngles[d]=null===_?n(p)?p:0:_});var y=function(){var t=0,i=0;return v.each(function(r,n){var a,o=tT(this);o.select(".text-math-group").empty()&&(e._vals[n]&&(a=e._vals[n].bb||u.bBox(o.node()),e._vals[n].bb=a),t=Math.max(t,a.width),i=Math.max(i,a.height))}),{labelsMaxW:t,labelsMaxH:i}},b=e._anchorAxis;if(b&&(b.autorange||b.insiderange)&&tN(e)&&!q(a,e._id)&&(a._insideTickLabelsUpdaterange||(a._insideTickLabelsUpdaterange={}),b.autorange&&(a._insideTickLabelsUpdaterange[b._name+".autorange"]=b.autorange,x.push(y)),b.insiderange)){var M=y(),w="y"===e._id.charAt(0)?M.labelsMaxW:M.labelsMaxH;w+=6,"inside"===e.ticklabelposition&&(w+=e.ticklen||0);var A="right"===e.side||"top"===e.side?1:-1,T=1===A?1:0,L=1===A?0:1,S=[];S[L]=b.range[L];var O=b.range,I=b.r2p(O[T]),F=b.r2p(O[L]),D=a._insideTickLabelsUpdaterange[b._name+".range"];if(D){var N=b.r2p(D[T]),z=b.r2p(D[L]),U=A*("y"===e._id.charAt(0)?1:-1);U*I<U*N&&(I=N,S[T]=O[T]=D[T]),U*F>U*z&&(F=z,S[L]=O[L]=D[L])}var H=Math.abs(F-I);H-w>0?(H-=w,w*=1+w/H):w=0,"y"!==e._id.charAt(0)&&(w=-w),S[T]=b.p2r(b.r2p(O[T])+A*w),"min"===b.autorange||"max reversed"===b.autorange?(S[0]=null,b._rangeInitial0=void 0,b._rangeInitial1=void 0):("max"===b.autorange||"min reversed"===b.autorange)&&(S[1]=null,b._rangeInitial0=void 0,b._rangeInitial1=void 0),a._insideTickLabelsUpdaterange[b._name+".range"]=S}var G=s.syncOrAsync(x);return G&&G.then&&t._promises.push(G),G},W.getPxPosition=function(t,e){var i,r=t._fullLayout._size,n=e._id.charAt(0),a=e.side;return("free"!==e.anchor?i=e._anchorAxis:"x"===n?i={_offset:r.t+(1-(e.position||0))*r.h,_length:0}:"y"===n&&(i={_offset:r.l+(e.position||0)*r.w+e._shift,_length:0}),"top"===a||"left"===a)?i._offset:"bottom"===a||"right"===a?i._offset+i._length:void 0},W.shouldShowZeroLine=function(t,e,i){var r=s.simpleMap(e.range,e.r2l);return r[0]*r[1]<=0&&e.zeroline&&("linear"===e.type||"-"===e.type)&&!(e.rangebreaks&&e.maskBreaks(0)===z)&&(tA(e,0)||!function(t,e,i,r){var n=i._mainAxis;if(n){var a=t._fullLayout,o=e._id.charAt(0),s=W.counterLetter(e._id),l=e._offset+(Math.abs(r[0])<Math.abs(r[1])==("x"===o)?0:e._length),c=a._plots[i._mainSubplot];if(!(c.mainplotinfo||c).overlays.length)return h(i,l);for(var d=W.list(t,s),f=0;f<d.length;f++){var u=d[f];if(u._mainAxis===n&&h(u,l))return!0}}function h(t){if(!t.showline||!t.linewidth)return!1;var i=Math.max((t.linewidth+e.zerolinewidth)/2,1);function r(t){return"number"==typeof t&&Math.abs(t-l)<i}if(r(t._mainLinePosition)||r(t._mainMirrorPosition))return!0;var n=t._linepositions||{};for(var a in n)if(r(n[a][0])||r(n[a][1]))return!0}}(t,e,i,r)||function(t,e){for(var i=t._fullData,r=e._mainSubplot,n=e._id.charAt(0),a=0;a<i.length;a++){var s=i[a];if(!0===s.visible&&s.xaxis+s.yaxis===r&&(o.traceIs(s,"bar-like")&&s.orientation===({x:"h",y:"v"})[n]||s.fill&&s.fill.charAt(s.fill.length-1)===n))return!0}return!1}(t,e))},W.clipEnds=function(t,e){return e.filter(function(e){return tA(t,e.x)})},W.allowAutoMargin=function(t){for(var e=W.list(t,"",!0),i=0;i<e.length;i++){var r=e[i];r.automargin&&(a.allowAutoMargin(t,tL(r)),r.mirror&&a.allowAutoMargin(t,tS(r))),o.getComponentMethod("rangeslider","isVisible")(r)&&a.allowAutoMargin(t,tO(r))}},W.swap=function(t,e){for(var i=function(t,e){var i=[];for(r=0;r<e.length;r++){var r,n,a,o=[],s=t._fullData[e[r]].xaxis,l=t._fullData[e[r]].yaxis;if(s&&l){for(n=0;n<i.length;n++)(-1!==i[n].x.indexOf(s)||-1!==i[n].y.indexOf(l))&&o.push(n);if(!o.length){i.push({x:[s],y:[l]});continue}var c=i[o[0]];if(o.length>1)for(n=1;n<o.length;n++)a=i[o[n]],tI(c.x,a.x),tI(c.y,a.y);tI(c.x,[s]),tI(c.y,[l])}}return i}(t,e),r=0;r<i.length;r++)(function(t,e,i){var r,n,a=[],o=[],l=t.layout;for(r=0;r<e.length;r++)a.push(W.getFromId(t,e[r]));for(r=0;r<i.length;r++)o.push(W.getFromId(t,i[r]));var c=Object.keys(h),d=["anchor","domain","overlaying","position","side","tickangle","editType"],f=["linear","log"];for(r=0;r<c.length;r++){var u=c[r],p=a[0][u],k=o[0][u],v=!0,g=!1,m=!1;if("_"!==u.charAt(0)&&"function"!=typeof p&&-1===d.indexOf(u)){for(n=1;n<a.length&&v;n++){var _=a[n][u];"type"===u&&-1!==f.indexOf(p)&&-1!==f.indexOf(_)&&p!==_?g=!0:_!==p&&(v=!1)}for(n=1;n<o.length&&v;n++){var x=o[n][u];"type"===u&&-1!==f.indexOf(k)&&-1!==f.indexOf(x)&&k!==x?m=!0:o[n][u]!==k&&(v=!1)}v&&(g&&(l[a[0]._name].type="linear"),m&&(l[o[0]._name].type="linear"),function(t,e,i,r,n){var a,o=s.nestedProperty,l=o(t[i[0]._name],e).get(),c=o(t[r[0]._name],e).get();for("title"===e&&(l&&l.text===n.x&&(l.text=n.y),c&&c.text===n.y&&(c.text=n.x)),a=0;a<i.length;a++)o(t,i[a]._name+"."+e).set(c);for(a=0;a<r.length;a++)o(t,r[a]._name+"."+e).set(l)}(l,u,a,o,t._fullLayout._dfltTitle))}}for(r=0;r<t._fullLayout.annotations.length;r++){var y=t._fullLayout.annotations[r];-1!==e.indexOf(y.xref)&&-1!==i.indexOf(y.yref)&&s.swapAttrs(l.annotations[r],["?"])}})(t,i[r].x,i[r].y)}}}]);